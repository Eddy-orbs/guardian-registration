(this["webpackJsonpguardian-registration"]=this["webpackJsonpguardian-registration"]||[]).push([[0],{326:function(e,t,r){e.exports=r(644)},331:function(e,t,r){},346:function(e,t){},354:function(e,t){},371:function(e,t){},373:function(e,t){},388:function(e,t){},389:function(e,t){},391:function(e,t){},392:function(e,t){},466:function(e,t){},468:function(e,t){},477:function(e,t){},479:function(e,t){},504:function(e,t){},506:function(e,t){},512:function(e,t){},513:function(e,t){},516:function(e,t){},532:function(e,t){},535:function(e,t){},549:function(e,t){},552:function(e,t){},644:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(21),o=r.n(i);r(331),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,s,u,l,d,p,m,h,f,b,v,g,y,E,w,O,x,j,k,C,A,I,S,T,R,D,P,W,F=r(189),G=r(61),q=r(8),_=r(5),L=r.n(_),M=r(16),N=r(41),U=r(10),H=r(12),B=r(25),V=(r(205),c=Object(q.action)("setWalletConnectionRequestApproved"),s=Object(q.action)("setMainAddress"),u=function(){function e(t){var r=this;Object(U.a)(this,e),this.cryptoWalletConnectionService=t,Object(N.a)(this,"walletConnectionRequestApproved",l,this),Object(N.a)(this,"hasEthereumProvider",d,this),Object(N.a)(this,"hasEventsSupport",p,this),Object(N.a)(this,"mainAddress",m,this),this.addressCheckingInterval=void 0,this.reactionToWalletConnection=void 0,this.hasEthereumProvider=t.hasEthereumProvider,this.hasEventsSupport=t.hasEventsSupport,this.reactionToWalletConnection=Object(q.reaction)((function(){return r.isConnectedToWallet}),function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&r.readInformationFromConnectedWallet();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0}),this.hasEthereumProvider&&(this.cryptoWalletConnectionService.hasEventsSupport?this.cryptoWalletConnectionService.onMainAddressChange((function(e){return r.setMainAddress(e)})):(this.cryptoWalletConnectionService.readMainAddress().then((function(e){return r.setMainAddress(e)})),this.addressCheckingInterval=setInterval((function(){return r.cryptoWalletConnectionService.readMainAddress().then((function(e){return r.setMainAddress(e)}))}),1e3)))}return Object(H.a)(e,[{key:"askToConnect",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isConnectedToWallet){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.cryptoWalletConnectionService.requestConnectionPermission();case 6:return t=e.sent,this.setWalletConnectionRequestApproved(t),e.abrupt("return",this.walletConnectionRequestApproved);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readInformationFromConnectedWallet",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readMainAddress();case 2:t=e.sent,this.setMainAddress(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWalletConnectionRequestApproved",value:function(e){this.walletConnectionRequestApproved=e}},{key:"setMainAddress",value:function(e){this.mainAddress=e}},{key:"isConnectedToWallet",get:function(){return this.hasEthereumProvider&&(this.cryptoWalletConnectionService.didUserApproveDappInThePast||this.walletConnectionRequestApproved)}}]),e}(),l=Object(B.a)(u.prototype,"walletConnectionRequestApproved",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(B.a)(u.prototype,"hasEthereumProvider",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(B.a)(u.prototype,"hasEventsSupport",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(B.a)(u.prototype,"mainAddress",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(B.a)(u.prototype,"isConnectedToWallet",[q.computed],Object.getOwnPropertyDescriptor(u.prototype,"isConnectedToWallet"),u.prototype),Object(B.a)(u.prototype,"setWalletConnectionRequestApproved",[c],Object.getOwnPropertyDescriptor(u.prototype,"setWalletConnectionRequestApproved"),u.prototype),Object(B.a)(u.prototype,"setMainAddress",[s],Object.getOwnPropertyDescriptor(u.prototype,"setMainAddress"),u.prototype),u),z=function(e){e.slice(2);return[e.slice(2,4),e.slice(4,6),e.slice(6,8),e.slice(8)].map((function(e){return parseInt(e,16)})).join(".")},K=function(e){var t=e.split(".").map((function(e){return parseInt(e).toString(16).padStart(2,"0")})).join("");return"0x".concat(t)},Y={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200},$={orbsAddr:"",ip:"",website:"",name:""},X={registrationTime:0,lastUpdateTime:0};var J=(h=Object(q.action)("setDoneLoading"),f=Object(q.action)("setErrorLoading"),b=Object(q.action)("setTxPending"),v=Object(q.action)("setTxCanceled"),g=Object(q.action)("setTxHadError"),y=Object(q.action)("setIsGuardian"),E=Object(q.action)("setGuardianInfo"),w=Object(q.action)("setGuardianRegistrationTimes"),O=Object(q.action)("setRewardDistributionFrequencyInHours"),x=Object(q.action)("setEthereumBalance"),j=function(){function e(t,r,n){var a=this;Object(U.a)(this,e),this.cryptoWalletIntegrationStore=t,this.guardiansV2Service=r,this.cryptoWalletConnectionService=n,Object(N.a)(this,"doneLoading",k,this),Object(N.a)(this,"errorLoading",C,this),Object(N.a)(this,"txPending",A,this),Object(N.a)(this,"txHadError",I,this),Object(N.a)(this,"txCanceled",S,this),Object(N.a)(this,"isGuardian",T,this),Object(N.a)(this,"guardianInfo",R,this),Object(N.a)(this,"guardianContractInteractionTimes",D,this),Object(N.a)(this,"rewardDistributionFrequencyInHours",P,this),Object(N.a)(this,"ethBalance",W,this),this.addressChangeReaction=void 0,this.addressChangeReaction=Object(q.reaction)((function(){return a.cryptoWalletIntegrationStore.mainAddress}),function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setDoneLoading(!1),e.next=3,a.reactToConnectedAddressChanged(t);case 3:a.setDoneLoading(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0})}return Object(H.a)(e,[{key:"handlePromievent",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r,n=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:"A promivent",this.resetTxIndicators(),this.setTxPending(!0),console.log("Waiting for promievent of ".concat(r)),e.prev=4,e.next=7,t;case 7:return e.sent,console.log("Got Results for promievent of ".concat(r)),e.abrupt("return");case 12:if(e.prev=12,e.t0=e.catch(4),e.t0.code!==Y.userRejectedRequest){e.next=18;break}this.setTxCanceled(!0),e.next=19;break;case 18:throw e.t0;case 19:return e.prev=19,this.setTxPending(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,12,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=this.guardiansV2Service.registerGuardian(t),e.next=4,this.handlePromievent(r,"Register guardian");case 4:return e.next=6,this.manuallyReadAccountData();case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed registering guardian ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=this.guardiansV2Service.updateGuardianInfo(t),e.next=4,this.handlePromievent(r,"Update guardian");case 4:return e.sent,e.next=7,this.manuallyReadAccountData();case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed updating guardian info ".concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuardianDistributionFrequency",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=3600*t,n=this.guardiansV2Service.setGuardianDistributionFrequency(r),e.prev=2,e.next=5,this.handlePromievent(n,"Set distribution frequency");case 5:return e.next=7,this.manuallyReadAccountData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed setting distribution frequency ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reactToConnectedAddressChanged",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.setDefaultAccountAddress(t),this.cryptoWalletIntegrationStore.hasEventsSupport&&this.refreshAccountListeners(t),e.prev=3,e.next=6,this.readDataForAccount(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.failLoadingProcess(e.t0),console.error("Error in reacting to address change in Orbs Account Store",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultAccountAddress",value:function(e){this.guardiansV2Service.setFromAccount(e)}},{key:"manuallyReadAccountData",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readDataForAccount(this.cryptoWalletIntegrationStore.mainAddress);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.failLoadingProcess(e.t0),console.error("Error in manually reading address data in Orbs Account Store",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"readDataForAccount",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readAndSetIsGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error read-n-set isGuardian ".concat(e.t0));case 8:this.isGuardian&&(this.readAndSetGuardianInfo(t).catch((function(e){return console.error("Error read-n-set Guardian Info ".concat(e))})),this.readAndSetRewardsDistributionFrequency(t).catch((function(e){return console.error("Error read-n-set Rewards Frequency ".concat(e))}))),this.readAndSetEthereumBalance(t).catch((function(e){return console.error("Error read-n-set Ethereum balance ".concat(e))}));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetIsGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansV2Service.isRegisteredGuardian(t);case 2:r=e.sent,this.setIsGuardian(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.guardiansV2Service.readGuardianInfo(t).then((function(e){var t=e.name,n=e.website,a=e.orbsAddr,i=e.ip,o=e.registrationTime,c=e.lastUpdateTime,s={name:t,website:n,ip:z(i),orbsAddr:a},u={registrationTime:o,lastUpdateTime:c};r.setGuardianInfo(s),r.setGuardianContractInteractionTimes(u)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetRewardsDistributionFrequency",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansV2Service.readGuardianDistributionFrequencyInSeconds(t);case 2:r=e.sent,n=r/3600,this.setRewardDistributionFrequencyInHours(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetEthereumBalance",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readEthereumBalance(t);case 2:r=e.sent,this.setEthereumBalance(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAccountListeners",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cancelAllCurrentSubscriptions();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllCurrentSubscriptions",value:function(){}},{key:"failLoadingProcess",value:function(e){this.setErrorLoading(!0),this.setDoneLoading(!0)}},{key:"resetTxIndicators",value:function(){this.setTxPending(!1),this.setTxHadError(!1),this.setTxCanceled(!1)}},{key:"setDoneLoading",value:function(e){this.doneLoading=e}},{key:"setErrorLoading",value:function(e){this.errorLoading=e}},{key:"setTxPending",value:function(e){this.txPending=e}},{key:"setTxCanceled",value:function(e){this.txCanceled=e}},{key:"setTxHadError",value:function(e){this.txHadError=e}},{key:"setIsGuardian",value:function(e){this.isGuardian=e}},{key:"setGuardianInfo",value:function(e){this.guardianInfo=e}},{key:"setGuardianContractInteractionTimes",value:function(e){this.guardianContractInteractionTimes=e}},{key:"setRewardDistributionFrequencyInHours",value:function(e){this.rewardDistributionFrequencyInHours=e}},{key:"setEthereumBalance",value:function(e){this.ethBalance=e}},{key:"isUsingDefaultRewardFrequency",get:function(){return 0===this.rewardDistributionFrequencyInHours}}]),e}(),k=Object(B.a)(j.prototype,"doneLoading",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Object(B.a)(j.prototype,"errorLoading",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=Object(B.a)(j.prototype,"txPending",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(B.a)(j.prototype,"txHadError",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=Object(B.a)(j.prototype,"txCanceled",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=Object(B.a)(j.prototype,"isGuardian",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(B.a)(j.prototype,"guardianInfo",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $}}),D=Object(B.a)(j.prototype,"guardianContractInteractionTimes",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X}}),P=Object(B.a)(j.prototype,"rewardDistributionFrequencyInHours",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(B.a)(j.prototype,"ethBalance",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(j.prototype,"isUsingDefaultRewardFrequency",[q.computed],Object.getOwnPropertyDescriptor(j.prototype,"isUsingDefaultRewardFrequency"),j.prototype),Object(B.a)(j.prototype,"setDoneLoading",[h],Object.getOwnPropertyDescriptor(j.prototype,"setDoneLoading"),j.prototype),Object(B.a)(j.prototype,"setErrorLoading",[f],Object.getOwnPropertyDescriptor(j.prototype,"setErrorLoading"),j.prototype),Object(B.a)(j.prototype,"setTxPending",[b],Object.getOwnPropertyDescriptor(j.prototype,"setTxPending"),j.prototype),Object(B.a)(j.prototype,"setTxCanceled",[v],Object.getOwnPropertyDescriptor(j.prototype,"setTxCanceled"),j.prototype),Object(B.a)(j.prototype,"setTxHadError",[g],Object.getOwnPropertyDescriptor(j.prototype,"setTxHadError"),j.prototype),Object(B.a)(j.prototype,"setIsGuardian",[y],Object.getOwnPropertyDescriptor(j.prototype,"setIsGuardian"),j.prototype),Object(B.a)(j.prototype,"setGuardianInfo",[E],Object.getOwnPropertyDescriptor(j.prototype,"setGuardianInfo"),j.prototype),Object(B.a)(j.prototype,"setGuardianContractInteractionTimes",[w],Object.getOwnPropertyDescriptor(j.prototype,"setGuardianContractInteractionTimes"),j.prototype),Object(B.a)(j.prototype,"setRewardDistributionFrequencyInHours",[O],Object.getOwnPropertyDescriptor(j.prototype,"setRewardDistributionFrequencyInHours"),j.prototype),Object(B.a)(j.prototype,"setEthereumBalance",[x],Object.getOwnPropertyDescriptor(j.prototype,"setEthereumBalance"),j.prototype),j);r(332);var Q=r(104),Z=r.n(Q),ee=r(43),te=function(){function e(t){Object(U.a)(this,e),this.ethereum=t,this.web3=void 0,this.hasEthereumProvider=void 0,this.hasEventsSupport=void 0,this.isMetamaskInstalled=void 0,this.isSemiCompliantEthereumProviderInstalled=void 0,this.hasEthereumProvider=void 0!==this.ethereum,this.isMetamaskInstalled=this.hasEthereumProvider&&!!this.ethereum.isMetaMask,this.isSemiCompliantEthereumProviderInstalled=this.hasEthereumProvider&&!this.ethereum.isMetaMask,this.hasEthereumProvider&&(this.web3=new Z.a(this.ethereum));var r=this.hasEthereumProvider?this.ethereum.on:void 0;this.hasEventsSupport=void 0!==r&&null!==r}return Object(H.a)(e,[{key:"requestConnectionPermission",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ethereum.enable();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"getIsMainNetwork",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isMetamaskInstalled&&"1"===this.ethereum.networkVersion);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readEthereumBalance",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r,n,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this.web3)||void 0===r?void 0:r.eth.getBalance(t);case 2:return n=e.sent,a=parseInt(Object(ee.fromWei)(n||"0")),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readMainAddress",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.web3)||void 0===t?void 0:t.eth.getAccounts();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return r=e.t0,e.abrupt("return",r[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readCurrentBlockNumber",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(t=this.web3)||void 0===t?void 0:t.eth.getBlockNumber())||0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMainAddressChange",value:function(e){var t=this;if(!this.hasEventsSupport)throw new Error("Cannot subscribe to events with given Ethereum provider");var r=function(t){return e(t[0])};return this.ethereum.on("accountsChanged",r),function(){t.ethereum.off("accountsChanged",r)}}},{key:"didUserApproveDappInThePast",get:function(){return this.isMetamaskInstalled&&!!this.ethereum.selectedAddress}}]),e}(),re=r(191),ne=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ETHEREUM_NETWORK,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_INFURA_KEY),ae={urlBase:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PUBLIC_BASE_PATH||"",v2contractsAddressesOverride:{},ETHEREUM_PROVIDER_WS:"wss://mainnet.infura.io/ws/v3/".concat(ne),privacyPolicyUrl:"https://www.orbs.com/guardian-portal-privacy-policy/",termsOfUseUrl:"https://www.orbs.com/guardian-portal-terms-of-use/"},ie=r(86),oe="".concat("https","://").concat("validator.orbs.com","/vchains/").concat(11e5.toString());var ce=r(301),se=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0xd095e7310616376BDeD74Afc7e0400E6d0894E6F";Object(U.a)(this,e),this.web3=t,this.guardiansRegistrationContract=void 0,console.log({guardiansRegistrationAddress:r}),this.guardiansRegistrationContract=new this.web3.eth.Contract(ce.abi,r)}return Object(H.a)(e,[{key:"setFromAccount",value:function(e){this.guardiansRegistrationContract.options.from=e}},{key:"isRegisteredGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.guardiansRegistrationContract.methods.isRegistered(t).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r,n,a,i,o,c,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansRegistrationContract.methods.getGuardianData(t).call();case 2:return r=e.sent,n=r.registration_time,a=r.orbsAddr,i=r.name,o=r.last_update_time,c=r.ip,r.contact,s=r.website,u={ip:c,lastUpdateTime:parseInt(o),name:i,orbsAddr:a,registrationTime:parseInt(n),website:s},e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readGuardianDistributionFrequencyInSeconds",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansRegistrationContract.methods.getMetadata(t,"REWARDS_FREQUENCY_SEC").call();case 2:if((r=e.sent)&&r.length){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",parseInt(r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuardianDistributionFrequency",value:function(e){return this.guardiansRegistrationContract.methods.setMetadata("REWARDS_FREQUENCY_SEC",e.toString()).send()}},{key:"registerGuardian",value:function(e){var t=e.website,r=e.name,n=e.orbsAddr,a=e.ip,i=K(a);return this.guardiansRegistrationContract.methods.registerGuardian(i,n,r,t," ").send()}},{key:"updateGuardianInfo",value:function(e){var t=e.ip,r=e.name,n=e.orbsAddr,a=e.website,i=K(t);return this.guardiansRegistrationContract.methods.updateGuardian(i,n,r,a," ").send()}}]),e}();var ue=r(137),le=r(678),de=r(302),pe=r.n(de),me=r(188),he=r.n(me),fe=pe()(he()({palette:{primary:{main:"rgba(16, 34, 91, 0.7)"},secondary:{main:"#7ccbf4"},text:{primary:"#dbdbdb",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#16317d"},action:{active:"#dbdbdb",disabled:"gba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",hover:"rgba(255, 255, 255, 0.08)",selected:"rgba(255, 255, 255, 0.16)"},divider:"rgba(255, 255, 255, 0.12)"},typography:{},overrides:{MuiPaper:{root:{}},MuiTypography:{colorPrimary:{}},MuiLink:{root:{}}}})),be=r(103);Object(q.configure)({enforceActions:"observed"});var ve=function(e){var t,r=function(){var e=Object(ie.createAccount)(),t=e.publicKey,r=e.privateKey,n=new ie.LocalSigner({publicKey:t,privateKey:r});return new ie.Client(oe,11e5,ie.NetworkType.NETWORK_TYPE_TEST_NET,n)}(),n=new re.OrbsClientService(r);return t=e?new Z.a(e):new Z.a(new Z.a.providers.WebsocketProvider(ae.ETHEREUM_PROVIDER_WS)),{cryptoWalletIntegrationService:new te(e),guardiansV2Service:new se(t,ae.v2contractsAddressesOverride.guardiansRegistration),guardiansService:new re.GuardiansService(t,n)}}(window.ethereum),ge=function(e,t){var r=new V(e);return{cryptoWalletIntegrationStore:r,orbsAccountStore:new J(r,t,e)}}(ve.cryptoWalletIntegrationService,ve.guardiansV2Service),ye=a.a.memo((function(e){console.log("Wrapper render");var t=e.appComponent;return a.a.createElement(F.a,null,a.a.createElement(G.b,Object.assign({},ge,ve),a.a.createElement(ue.b,{injectFirst:!0},a.a.createElement(le.a,{theme:fe},a.a.createElement(be.a,{maxSnack:3},t)))))})),Ee=r(685),we=r(650),Oe=r(679),xe=r(680),je=r(692),ke=r(677),Ce=r(695),Ae=r(306),Ie=r(313),Se=Object(ke.a)((function(e){return{link:{color:e.palette.secondary.light,"&:hover":{color:e.palette.secondary.main}}}})),Te=a.a.memo((function(e){var t=Se(),r=e.text,n=e.href,i=Object(Ie.a)(e,["text","href"]);return a.a.createElement("a",Object.assign({className:t.link,href:n||"",target:"_blank",rel:"noopener noreferrer"},i),r)})),Re=Object(ke.a)((function(e){return{noEthereumProviderSection:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"2em",backgroundColor:"rgba(0,0,0, 0.2)",borderRadius:"5%",width:"fit-content",maxWidth:"90%",boxSizing:"border-box"}}})),De=a.a.memo((function(e){var t=Re(),r=e.walletConnectionPhase,n=e.actionFunction,i=(e.pressedOnInstall,Object(Ce.a)(!1)),o="connect"===r,c=!o||i.value,s="install"===r,u=s?"No Ethereum provider detected":"Please connect",l=s?"you should install MetaMask and refresh the page":"To begin, connect your wallet",d="install"===r?"Install":"Connect",p=Object(Ae.renderToString)(a.a.createElement(we.a,null,"I agree to the"," ",a.a.createElement(Te,{href:ae.termsOfUseUrl,text:"Terms of Use"})," and"," ",a.a.createElement(Te,{href:ae.privacyPolicyUrl,text:"Privacy Policy"})));return a.a.createElement("div",{className:t.noEthereumProviderSection},a.a.createElement(we.a,{style:{marginBottom:"0.5rem"},variant:"h4"},u),a.a.createElement(we.a,{style:{marginBottom:"1rem"}},l),a.a.createElement(Oe.a,{variant:"outlined",onClick:n,disabled:!c},d),o&&a.a.createElement(xe.a,{style:{marginTop:"0.5rem"},control:a.a.createElement(je.a,{checked:i.value,onChange:function(e){return i.setValue(e.target.checked)},name:"legalTicker"}),label:a.a.createElement(we.a,{dangerouslySetInnerHTML:{__html:p}})}))})),Pe=r(681),We=r(682),Fe=r(307),Ge=r.n(Fe),qe=Object(ke.a)((function(e){return{centeredContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"}}})),_e=a.a.memo((function(e){var t=qe(),r=Ge()(),n=Object(Pe.a)(r.breakpoints.down("sm"));return a.a.createElement(We.a,Object.assign({className:t.centeredContainer,component:"main",disableGutters:n},e))})),Le=r(23),Me=r(22),Ne=r(673),Ue=r(7),He=Object(Ue.a)((function(e){return Object(Ne.a)({root:{width:"100%",height:"100%",zIndex:-1e3,position:"absolute",overflow:"hidden"},appVersion:{position:"fixed",bottom:4,left:4},triangle:{opacity:.25,fill:"#08e4f4"},svgElm:{top:-320,left:-80,position:"relative",height:1500,opacity:.1,transform:"rotate(15deg)",animation:"rotate 500s linear infinite"},"@keyframes rotate":{"0%":{transform:"rotate(15deg)"},"100%":{transform:"rotate(375deg)"}}})}))(function(e){Object(Le.a)(r,e);var t=Object(Me.a)(r);function r(){return Object(U.a)(this,r),t.apply(this,arguments)}return Object(H.a)(r,[{key:"render",value:function(){var e=this.props.classes;return n.createElement("div",{id:"appBackground",className:e.root},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:e.svgElm,viewBox:"0 0 100 100"},n.createElement("path",{className:e.triangle,d:"m8.44388,72.186002l59.79,0a5.46,5.46 0 0 0 4.58,-8.41l-29.85,-46.28a5.45,5.45 0 0 0 -9.16,0l-29.93,46.28a5.45,5.45 0 0 0 4.57,8.41z"}),n.createElement("path",{className:e.triangle,d:"m20.93,78.176003l58.6,0a6.09,6.09 0 0 0 5.12,-9.4l-29.2,-45.28a5.45,5.45 0 0 0 -9.16,0l-29.93,46.27a5.45,5.45 0 0 0 4.57,8.41z"}),n.createElement("path",{className:e.triangle,d:"m32.443882,84.176l58.6,0a6.09,6.09 0 0 0 5.12,-9.4l-29.2,-45.28a5.45,5.45 0 0 0 -9.16,0l-29.93,46.27a5.45,5.45 0 0 0 4.57,8.41z"})))}}]),r}(n.Component)),Be=r(683),Ve=r(684),ze=Object(ke.a)((function(e){return{title:{flexGrow:1,textAlign:"center",marginTop:"1em",marginBottom:"1em"}}})),Ke=a.a.memo((function(e){var t=ze();return a.a.createElement(Be.a,{position:"absolute"},a.a.createElement(Ve.a,null,a.a.createElement("div",{className:t.title},a.a.createElement(we.a,{variant:"h5"},"ORBS Guardians Portal"))))})),Ye=Object(ke.a)((function(e){return{page:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"100%",boxSizing:"border-box",padding:"2em",height:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),$e=a.a.memo((function(e){var t=e.children,r=Ye();return a.a.createElement("div",{className:r.page},a.a.createElement(Ve.a,null),t)})),Xe=a.a.memo((function(e){var t=Object(Ce.a)(!1),r=Object(n.useCallback)((function(){window.open("https://metamask.io/","_blank"),t.setTrue()}),[t]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ke,null),a.a.createElement("main",{className:"App",style:{height:"100%"}},a.a.createElement(He,null),a.a.createElement(_e,{id:"appContainer"},a.a.createElement($e,null,a.a.createElement(De,{walletConnectionPhase:"install",actionFunction:r}))),a.a.createElement(Ee.a,null)))})),Je=r(30);function Qe(){return a.a.useContext(G.a)}function Ze(){return Qe().cryptoWalletIntegrationStore}function et(){return Qe().orbsAccountStore}var tt=r(693),rt=r(686),nt=r(46),at=r(691),it=(r(694),r(149)),ot=(r(309),Object(ke.a)((function(e){return{helperText:{color:e.palette.secondary.main},textsList:{listStylePosition:"outside",paddingLeft:"1rem"}}}))),ct=a.a.memo((function(e){var t=ot(),r=e.helperTexts;r.length;return a.a.createElement("ul",{className:t.textsList},r.map((function(e,r){return a.a.createElement(a.a.Fragment,{key:"fragment_".concat(e)},a.a.createElement("li",{id:r.toString(),key:e,className:t.helperText},a.a.createElement(we.a,{style:{wordWrap:"break-word"},variant:"caption"},e)))})))})),st=/^0x[a-fA-F0-9]{40}$/,ut=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,lt=["The name that the Guardian will be recognized by."],dt=["The Guardian website is used by Delegators when selecting a Guardian."],pt=["A valid IPv4 address is required to allow the Guardian\u2019s node to connect to the network gossip topology."],mt=["Used by the Orbs node to automatically send transactions such as ReadyForCommittee.","Used to sign blocks on Orbs platform.","Should hold ETH for the automated transactions gas (A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian).","The Orbs Node address should differ from the Guardian address."];function ht(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}var ft=Object(ke.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}}}})),bt=a.a.memo((function(e){var t=ft(),r=(e.guardianAddress,e.guardianInitialInfo),i=e.submitInfo,o=e.actionButtonTitle,c=e.disableSubmit,s=e.messageForSubmitButton,u=Object(it.a)(),l=u.register,d=u.handleSubmit,p=u.errors,m=Object(rt.a)(r.name),h=Object(rt.a)(r.website),f=Object(rt.a)(r.ip),b=Object(rt.a)(r.orbsAddr),v=!!p.nodeAddress,g=!!p.ipAddress,y=!!p.website,E=m.setValue,w=h.setValue,O=f.setValue,x=b.setValue;Object(n.useEffect)((function(){r&&(console.log("Re-setting data"),E(r.name),w(r.website),O(r.ip),x(r.orbsAddr))}),[r,O,E,x,w]);var j=Object(nt.a)(),k=Object(Pe.a)(j.breakpoints.down("xs"));console.log(k);var C=Object(n.useCallback)((function(e,t,r){var n;return r&&(n=a.a.createElement(ct,{helperTexts:r})),e&&t&&(n=t),n}),[]),A=Object(n.useCallback)((function(e){var t={ip:e.ipAddress,orbsAddr:e.nodeAddress,name:e.name,website:e.website};i(t)}),[i]);return a.a.createElement("form",{onSubmit:d((function(e){return A(e)})),style:{maxWidth:"100%",width:"100%"}},a.a.createElement(at.a,{InputLabelProps:{style:{pointerEvents:"auto"}},name:"name",label:"Guardian name",title:lt[0],helperText:C(!1,void 0,lt),value:m.value,onChange:function(e){return m.setValue(e.target.value)},required:!0,inputRef:l,fullWidth:!0,className:t.textField}),a.a.createElement("br",null),a.a.createElement(at.a,{fullWidth:!0,name:"website",label:"Guardian website",title:dt[0],helperText:C(y,"Must use a URL",dt),value:h.value,onChange:function(e){return h.setValue(e.target.value)},required:!0,error:y,inputRef:l({validate:ht}),className:t.textField}),a.a.createElement("br",null),a.a.createElement(at.a,{fullWidth:!0,name:"ipAddress",label:"Node IP",title:pt[0],value:f.value,onChange:function(e){return f.setValue(e.target.value)},required:!0,inputRef:l({pattern:ut}),error:g,helperText:C(g,"Must use a valid IPV4 address",pt),className:t.textField}),a.a.createElement("br",null),a.a.createElement(at.a,{name:"nodeAddress",label:"Node address",title:mt[0],value:b.value,onChange:function(e){return b.setValue(e.target.value)},error:v,helperText:C(v,"Must use a valid address",mt),required:!0,inputRef:l({pattern:st}),fullWidth:!0,className:t.textField}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(Oe.a,{variant:"outlined",fullWidth:!0,type:"submit",disabled:c},o),a.a.createElement("br",null),a.a.createElement("br",null),s&&a.a.createElement(we.a,{variant:"body2",color:"error",style:{width:"fit-content"}},s))})),vt=r(697),gt=r(310),yt=r.n(gt),Et=r(148),wt=Object(ke.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),Ot=a.a.memo((function(e){var t=wt(),r=e.guardianInfo,i=e.guardianAddress,o=e.updateGuardianDetails,c=e.guardianContractInteractionTimes,s=c.lastUpdateTime,u=c.registrationTime,l=(Object(n.useMemo)((function(){return Object(tt.a)(u)}),[u]),Object(n.useMemo)((function(){return Object(tt.a)(s)}),[s]));return a.a.createElement(a.a.Fragment,null,a.a.createElement(vt.a,{className:t.avatar},a.a.createElement(yt.a,null)),a.a.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignContent:"center",overflow:"hidden"}},a.a.createElement(we.a,{variant:"h5"},"Guardian details update"),a.a.createElement(we.a,{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},i)),a.a.createElement(bt,{guardianAddress:i,submitInfo:o,guardianInitialInfo:r,actionButtonTitle:"Update"}),a.a.createElement("br",null),a.a.createElement(Et.Transition,{items:l,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"},update:{opacity:1}},(function(e){return function(e){return a.a.createElement(we.a,{variant:"h6",style:e},"Details Last updated: ",l.toLocaleString())}})),a.a.createElement("br",null))})),xt=r(29),jt=r(311),kt=r.n(jt),Ct=Object(ke.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),At={orbsAddr:"",ip:"",website:"",name:""},It=a.a.memo((function(e){var t=Ct(),r=e.guardianAddress,i=e.registerGuardian,o=e.cryptoWalletConnectionService,c=Object(n.useState)(void 0),s=Object(xt.a)(c,2),u=s[0],l=s[1],d=Object(n.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orbsAddr!==r){e.next=3;break}return l("Orbs node address cannot be the same as the Guardian address ".concat(r)),e.abrupt("return");case 3:return e.next=5,o.readEthereumBalance(t.orbsAddr);case 5:if(!(e.sent<1)){e.next=9;break}return l("A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian."),e.abrupt("return");case 9:i(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r,i]);return a.a.createElement("div",{id:"RegisterGuardianSection",style:{display:"flex",flexDirection:"column",maxWidth:"100%",width:"min-content"}},a.a.createElement(vt.a,{className:t.avatar},a.a.createElement(kt.a,null)),a.a.createElement("div",{style:{maxWidth:"100%",textAlign:"center"}},a.a.createElement(we.a,{variant:"h5"},"Guardian Registration"),a.a.createElement(we.a,{style:{textOverflow:"ellipsis",overflow:"hidden"}},r)),a.a.createElement(bt,{guardianAddress:r,submitInfo:d,guardianInitialInfo:At,actionButtonTitle:"Register",messageForSubmitButton:u}))})),St=r(688),Tt=r(698),Rt=r(689),Dt=r(194),Pt=r(696),Wt=Object(ke.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}}}})),Ft=a.a.memo((function(e){var t=Wt(),r=e.currentFrequencyInHours,i=e.updateRewardsFrequency,o=e.isUsingDefaultValue,c=Object(Ce.a)(!1),s=Object(Pt.a)(Math.max(r,12),{lowerLimit:12}),u=s.setValue;Object(n.useEffect)((function(){u(Math.max(r,12))}),[r,u]);var l=Object(it.a)(),d=l.register,p=l.handleSubmit,m=!!l.errors.rewardsFrequencyInHours,h=Object(n.useCallback)((function(e){i(e.rewardsFrequencyInHours)}),[i]),f=Math.floor(r/24),b=Math.floor(r%24),v=0===f?"":1===f?"1 day and":"".concat(f," days"),g=0===b?"":1===b?"1 hour":"".concat(b," hours"),y=""!==v&&""!==g?" and ":"",E=""!==v?" (".concat(r," hours)"):"",w="".concat(v).concat(y).concat(g).concat(E);o||"Current distribution frequency is once every ".concat(w);return a.a.createElement("form",{style:{maxWidth:"100%",width:"100%"},onSubmit:p(h)},a.a.createElement(we.a,{variant:"body1",style:{display:"inline"}},"Current distribution frequency is once every"," "),a.a.createElement(we.a,{variant:"body1",style:{display:"inline",fontWeight:"bold"}},w),a.a.createElement("br",null),a.a.createElement(Et.Transition,{items:c.value,initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"}},(function(e){return e?function(e){return a.a.createElement("div",{style:Object(Dt.a)(Object(Dt.a)({},e),{},{maxWidth:"100%",width:"100%"})},a.a.createElement(at.a,{fullWidth:!0,name:"rewardsFrequencyInHours",title:"Rewards Frequency in hours - Minimum ".concat(12," hours"),label:"Rewards Frequency in hours",value:s.value,onChange:function(e){return s.setValue(parseInt(e.target.value)||0)},required:!0,type:"number",inputRef:d({min:12}),error:m,helperText:m?"Minimum frequency is 12 hours":"Default frequency is 14 days (336 hours), cannot be lower than half a day (12 hours)",className:t.textField}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(Oe.a,{variant:"outlined",type:"submit",fullWidth:!0},"Update"))}:function(e){return a.a.createElement(Oe.a,{onClick:c.setTrue,variant:"outlined",fullWidth:!0,style:e},"Set to other value")}})))})),Gt=r(312),qt=r.n(Gt),_t=Object(ke.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),Lt=a.a.memo((function(e){var t=_t(),r=e.isUsingDefaultValue,n=e.currentFrequencyInHours,i=e.updateRewardsFrequency;return a.a.createElement(a.a.Fragment,null,a.a.createElement(vt.a,{className:t.avatar},a.a.createElement(qt.a,null)),a.a.createElement(we.a,{variant:"h5"},"Rewards Distribution Frequency"),a.a.createElement(Ft,{currentFrequencyInHours:n,updateRewardsFrequency:i,isUsingDefaultValue:r}))})),Mt=Object(ke.a)((function(e){return{contentFitter:{height:"100%",width:"fit-content",maxWidth:"100%"}}})),Nt=a.a.memo((function(e){var t=Mt(),r=e.children;return a.a.createElement("div",{className:t.contentFitter},r)}));function Ut(){var e=a.a.useContext(G.a);if(!e)throw new Error("Tried to use services before initialising them");return e}var Ht,Bt=Object(ke.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),Vt=Object(G.c)((function(e){var t,r=Bt(),i=Object(be.b)().enqueueSnackbar,o=et(),c=Ze(),s=Ut().cryptoWalletIntegrationService,u=(o.isGuardian,Object(n.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.updateGuardianInfo(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Guardian Details Update' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o])),l=Object(n.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.setGuardianDistributionFrequency(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Rewards Frequency Update' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o]),d=Object(n.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.registerGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Guardian Registration' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o]);return o.errorLoading?a.a.createElement($e,null,a.a.createElement(Nt,null,a.a.createElement(we.a,null,"Error loading"))," "):o.doneLoading?(t=o.isGuardian?a.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%",width:"min-content",textAlign:"center"}},a.a.createElement(Ot,{guardianInfo:o.guardianInfo,guardianAddress:c.mainAddress,guardianContractInteractionTimes:o.guardianContractInteractionTimes,updateGuardianDetails:u}),a.a.createElement(St.a,{style:{width:"100%",height:"3px"}}),a.a.createElement(Lt,{currentFrequencyInHours:o.rewardDistributionFrequencyInHours,updateRewardsFrequency:l,isUsingDefaultValue:o.isUsingDefaultRewardFrequency})):a.a.createElement(It,{registerGuardian:d,guardianAddress:c.mainAddress,cryptoWalletConnectionService:s}),a.a.createElement($e,null,a.a.createElement(Nt,null,a.a.createElement("div",{style:{display:"flex",maxWidth:"100%"}},t),a.a.createElement(Tt.a,{className:r.backdrop,open:o.txPending},a.a.createElement(Rt.a,{color:"inherit"}))))):a.a.createElement($e,null,a.a.createElement(Nt,null,a.a.createElement(we.a,null,"Loading..."))," ")})),zt=r(690),Kt=r(674),Yt=Object(ke.a)((function(e){return{bottomAppBar:{height:"3em",bottom:0,top:"auto",display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:"1em",paddingLeft:"1em"},appVersion:{marginLeft:"auto"}}})),$t=(a.a.memo((function(e){var t=e.children,r=Object(zt.a)();return console.log(r),a.a.createElement(Kt.a,{appear:!1,direction:"up",in:r},t)})),a.a.memo((function(e){var t=Yt(),r=e.version;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve.a,{style:{}}),a.a.createElement(Be.a,{className:t.bottomAppBar,position:"fixed"},a.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},a.a.createElement("div",{style:{marginRight:"auto",marginLeft:"auto",position:"absolute"}},a.a.createElement(Te,{text:"Term of use",href:ae.termsOfUseUrl,style:{paddingInlineEnd:"1em",justifySelf:"center"}}),a.a.createElement(Te,{href:ae.privacyPolicyUrl,text:"Privacy Policy"})),a.a.createElement("div",{className:t.appVersion},a.a.createElement(we.a,{variant:"caption"},"version ",r)))))}))),Xt=Object(ke.a)((function(){return{app:{flex:1}}})),Jt=Object(G.c)((function(){var e=Xt(),t=Ze(),r=et(),i=Object(be.b)().enqueueSnackbar,o=t.isConnectedToWallet,c=Object(n.useMemo)((function(){return o?a.a.createElement(Je.c,null,a.a.createElement(Je.a,{path:"/"},a.a.createElement(Vt,null))):a.a.createElement($e,null,a.a.createElement(De,{walletConnectionPhase:"connect",actionFunction:function(){return t.askToConnect()}}))}),[t,o]),s=r.txHadError;Object(n.useEffect)((function(){s&&i("Error in Transaction",{variant:"error"})}),[i,s]);var u=r.txCanceled;return Object(n.useEffect)((function(){u&&i("Transaction canceled",{variant:"info"})}),[i,u]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Ke,null),a.a.createElement("main",{className:e.app},a.a.createElement(He,null),a.a.createElement(_e,{id:"appContainer"},c),a.a.createElement(Ee.a,null)),a.a.createElement($t,{version:"0.1"}))}));Ht=!!window.ethereum?a.a.createElement(Jt,null):a.a.createElement(Xe,null),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ye,{appComponent:Ht})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[326,1,2]]]);
//# sourceMappingURL=main.7d6dba9d.chunk.js.map