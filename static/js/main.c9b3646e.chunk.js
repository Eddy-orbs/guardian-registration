(this["webpackJsonpguardian-registration"]=this["webpackJsonpguardian-registration"]||[]).push([[0],{330:function(e,t,a){e.exports=a(664)},335:function(e,t,a){},360:function(e,t){},368:function(e,t){},386:function(e,t){},388:function(e,t){},402:function(e,t){},403:function(e,t){},405:function(e,t){},406:function(e,t){},479:function(e,t){},481:function(e,t){},491:function(e,t){},493:function(e,t){},518:function(e,t){},520:function(e,t){},526:function(e,t){},527:function(e,t){},529:function(e,t){},541:function(e,t){},544:function(e,t){},558:function(e,t){},561:function(e,t){},664:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(20),o=a.n(i);a(335),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,s,u,l,d,p,m,f,g,h,b,v,y,E,O,w,x,j,C,k,S,D,R,T,P,A,I,G,U,W,L,F,N,B,M,q,_,V,H=a(192),z=a(50),K=a(6),X=a(5),Y=a.n(X),$=a(14),J=a(31),Q=a(11),Z=a(13),ee=a(16),te=(a(204),c=Object(K.f)("setWalletConnectionRequestApproved"),s=Object(K.f)("setMainAddress"),u=function(){function e(t){var a=this;Object(Q.a)(this,e),this.cryptoWalletConnectionService=t,Object(J.a)(this,"walletConnectionRequestApproved",l,this),Object(J.a)(this,"hasEthereumProvider",d,this),Object(J.a)(this,"hasEventsSupport",p,this),Object(J.a)(this,"mainAddress",m,this),this.addressCheckingInterval=void 0,this.reactionToWalletConnection=void 0,this.hasEthereumProvider=t.hasEthereumProvider,this.hasEventsSupport=t.hasEventsSupport,this.reactionToWalletConnection=Object(K.o)((function(){return a.isConnectedToWallet}),function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&a.readInformationFromConnectedWallet();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0}),this.hasEthereumProvider&&(this.cryptoWalletConnectionService.hasEventsSupport?this.cryptoWalletConnectionService.onMainAddressChange((function(e){return a.setMainAddress(e)})):(this.cryptoWalletConnectionService.readMainAddress().then((function(e){return a.setMainAddress(e)})),this.addressCheckingInterval=setInterval((function(){return a.cryptoWalletConnectionService.readMainAddress().then((function(e){return a.setMainAddress(e)}))}),1e3)))}return Object(Z.a)(e,[{key:"askToConnect",value:function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isConnectedToWallet){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.cryptoWalletConnectionService.requestConnectionPermission();case 6:return t=e.sent,this.setWalletConnectionRequestApproved(t),e.abrupt("return",this.walletConnectionRequestApproved);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readInformationFromConnectedWallet",value:function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readMainAddress();case 2:t=e.sent,this.setMainAddress(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWalletConnectionRequestApproved",value:function(e){this.walletConnectionRequestApproved=e}},{key:"setMainAddress",value:function(e){this.mainAddress=e}},{key:"isConnectedToWallet",get:function(){return this.hasEthereumProvider&&(this.cryptoWalletConnectionService.didUserApproveDappInThePast||this.walletConnectionRequestApproved)}}]),e}(),l=Object(ee.a)(u.prototype,"walletConnectionRequestApproved",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(ee.a)(u.prototype,"hasEthereumProvider",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(ee.a)(u.prototype,"hasEventsSupport",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(ee.a)(u.prototype,"mainAddress",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ee.a)(u.prototype,"isConnectedToWallet",[K.g],Object.getOwnPropertyDescriptor(u.prototype,"isConnectedToWallet"),u.prototype),Object(ee.a)(u.prototype,"setWalletConnectionRequestApproved",[c],Object.getOwnPropertyDescriptor(u.prototype,"setWalletConnectionRequestApproved"),u.prototype),Object(ee.a)(u.prototype,"setMainAddress",[s],Object.getOwnPropertyDescriptor(u.prototype,"setMainAddress"),u.prototype),u),ae=function(e){e.slice(2);return[e.slice(2,4),e.slice(4,6),e.slice(6,8),e.slice(8)].map((function(e){return parseInt(e,16)})).join(".")},re={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200},ne=a(90),ie={orbsAddr:"",ip:"",website:"",name:""},oe={registrationTime:0,lastUpdateTime:0};var ce=(f=Object(K.f)("setDoneLoading"),g=Object(K.f)("setErrorLoading"),h=Object(K.f)("setTxPending"),b=Object(K.f)("setTxCanceled"),v=Object(K.f)("setTxHadError"),y=Object(K.f)("setIsGuardian"),E=Object(K.f)("setGuardianInfo"),O=Object(K.f)("setGuardianRegistrationTimes"),w=Object(K.f)("setRewardDistributionFrequencyInHours"),x=Object(K.f)("setRewardsContractSettings"),j=Object(K.f)("setGuardianRewardsSettings"),C=Object(K.f)("setDelegatorsCutPercentage"),k=Object(K.f)("setDetailsPageURL"),S=Object(K.f)("setGuardianId"),D=Object(K.f)("setEthereumBalance"),R=function(){function e(t,a,r,n){var i=this;Object(Q.a)(this,e),this.cryptoWalletIntegrationStore=t,this.guardiansService=a,this.stakingRewardsService=r,this.cryptoWalletConnectionService=n,Object(J.a)(this,"doneLoading",T,this),Object(J.a)(this,"errorLoading",P,this),Object(J.a)(this,"txPending",A,this),Object(J.a)(this,"txHadError",I,this),Object(J.a)(this,"txCanceled",G,this),Object(J.a)(this,"isGuardian",U,this),Object(J.a)(this,"guardianInfo",W,this),Object(J.a)(this,"guardianContractInteractionTimes",L,this),Object(J.a)(this,"rewardDistributionFrequencyInHours",F,this),Object(J.a)(this,"rewardsContractSettings",N,this),Object(J.a)(this,"guardianRewardsSettings",B,this),Object(J.a)(this,"delegatorsCutPercentage",M,this),Object(J.a)(this,"detailsPageUrl",q,this),Object(J.a)(this,"guardianId",_,this),Object(J.a)(this,"ethBalance",V,this),this.addressChangeReaction=void 0,this.addressChangeReaction=Object(K.o)((function(){return i.cryptoWalletIntegrationStore.mainAddress}),function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.setDoneLoading(!1),e.next=3,i.reactToConnectedAddressChanged(t);case 3:i.setDoneLoading(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0})}return Object(Z.a)(e,[{key:"handlePromievent",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a,r=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"A promivent",this.resetTxIndicators(),this.setTxPending(!0),console.log("Waiting for promievent of ".concat(a)),e.prev=4,e.next=7,t;case 7:return e.sent,console.log("Got Results for promievent of ".concat(a)),e.abrupt("return");case 12:if(e.prev=12,e.t0=e.catch(4),e.t0.code!==re.userRejectedRequest){e.next=18;break}this.setTxCanceled(!0),e.next=19;break;case 18:throw e.t0;case 19:return e.prev=19,this.setTxPending(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,12,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerGuardian",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.guardiansService.registerGuardian(t),e.next=4,this.handlePromievent(a,"Register guardian");case 4:return e.next=6,this.manuallyReadAccountData();case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed registering guardian ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGuardianInfo",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=this.guardiansService.updateGuardianInfo(t),e.next=4,this.handlePromievent(a,"Update guardian");case 4:return e.sent,e.next=7,this.manuallyReadAccountData();case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed updating guardian info ".concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"unregisterGuardian",value:function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.guardiansService.unregisterGuardian(),e.next=4,this.handlePromievent(t,"Unregister guardian");case 4:return e.sent,e.next=7,this.manuallyReadAccountData();case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed unregistering guardian ".concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"setGuardianDistributionFrequency",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=3600*t,r=this.guardiansService.setGuardianDistributionFrequency(a),e.prev=2,e.next=5,this.handlePromievent(r,"Set distribution frequency");case 5:return e.next=7,this.manuallyReadAccountData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed setting distribution frequency ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"writeGuardianDelegatorsCutPercentage",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Writing :",t),a=this.stakingRewardsService.setDelegatorsCutPercentage(t),e.prev=2,e.next=5,this.handlePromievent(a,"Set delegators cut percentage");case 5:return e.next=7,this.manuallyReadAccountData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed setting delegators cut percentage ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"writeGuardianDetailsPageURL",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Writing :",t),a=this.guardiansService.setGuardianDetailsPageUrl(t),e.prev=2,e.next=5,this.handlePromievent(a,"Set Details page URL");case 5:return e.next=7,this.manuallyReadAccountData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed setting Details page URL ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"writeGuardianId",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.guardiansService.setGuardianId(t),e.prev=1,e.next=4,this.handlePromievent(a,"Set Guardian ID");case 4:return e.next=6,this.manuallyReadAccountData();case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed setting Guardian ID ".concat(e.t0)),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reactToConnectedAddressChanged",value:function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.setDefaultAccountAddress(t),this.cryptoWalletIntegrationStore.hasEventsSupport&&this.refreshAccountListeners(t),e.prev=3,e.next=6,this.readDataForAccount(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.failLoadingProcess(e.t0),console.error("Error in reacting to address change in Orbs Account Store",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultAccountAddress",value:function(e){this.guardiansService.setFromAccount(e),this.stakingRewardsService.setFromAccount(e)}},{key:"manuallyReadAccountData",value:function(){var e=Object($.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readDataForAccount(this.cryptoWalletIntegrationStore.mainAddress);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.failLoadingProcess(e.t0),console.error("Error in manually reading address data in Orbs Account Store",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"readDataForAccount",value:function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readAndSetIsGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error read-n-set isGuardian ".concat(e.t0));case 8:this.isGuardian&&(this.readAndSetGuardianInfo(t).catch((function(e){return console.error("Error read-n-set Guardian Info ".concat(e))})),this.readAndSetRewardsDistributionFrequency(t).catch((function(e){return console.error("Error read-n-set Rewards Frequency ".concat(e))})),this.readAndSetDelegatorsCut(t).catch((function(e){return console.error("Error read-n-set delegators cut percentage ".concat(e))})),this.readAndSetGuardianRewardsSettings(t).catch((function(e){return console.error("Error read-n-set Guardian rewards settings ".concat(e))})),this.readAndSetDetailsPageUrl(t).catch((function(e){return console.error("Error read-n-set Details page URL ".concat(e))}))),this.readAndSetRewardsContractSettings().catch((function(e){return console.error("Error read-n-set Ethereum balance ".concat(e))})),this.readAndSetEthereumBalance(t).catch((function(e){return console.error("Error read-n-set Ethereum balance ".concat(e))}));case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetIsGuardian",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansService.isRegisteredGuardian(t);case 2:a=e.sent,this.setIsGuardian(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetGuardianInfo",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.guardiansService.readGuardianInfo(t).then((function(e){var t=e.name,r=e.website,n=e.orbsAddr,i=e.ip,o=e.registrationTime,c=e.lastUpdateTime,s={name:t,website:r,ip:ae(i),orbsAddr:n},u={registrationTime:o,lastUpdateTime:c};a.setGuardianInfo(s),a.setGuardianContractInteractionTimes(u)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetRewardsDistributionFrequency",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansService.readGuardianDistributionFrequencyInSeconds(t);case 2:a=e.sent,r=a/3600,this.setRewardDistributionFrequencyInHours(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetDelegatorsCut",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stakingRewardsService.readDelegatorsCutPercentage(t);case 2:a=e.sent,console.log("Setting delegtors cut",a),this.setDelegatorsCutPercentage(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetDetailsPageUrl",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansService.readGuardianDetailsPageUrl(t);case 2:a=e.sent,this.setDetailsPageURL(a||void 0);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetRewardsContractSettings",value:function(){var e=Object($.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stakingRewardsService.readContractRewardsSettings();case 2:t=e.sent,this.setRewardsContractSettings(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readAndSetGuardianRewardsSettings",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stakingRewardsService.readGuardianRewardsSettings(t);case 2:a=e.sent,this.setGuardianRewardsSettings(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetEthereumBalance",value:function(){var e=Object($.a)(Y.a.mark((function e(t){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readEthereumBalance(t);case 2:a=e.sent,this.setEthereumBalance(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAccountListeners",value:function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cancelAllCurrentSubscriptions();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllCurrentSubscriptions",value:function(){}},{key:"failLoadingProcess",value:function(e){this.setErrorLoading(!0),this.setDoneLoading(!0)}},{key:"resetTxIndicators",value:function(){this.setTxPending(!1),this.setTxHadError(!1),this.setTxCanceled(!1)}},{key:"setDoneLoading",value:function(e){this.doneLoading=e}},{key:"setErrorLoading",value:function(e){this.errorLoading=e}},{key:"setTxPending",value:function(e){this.txPending=e}},{key:"setTxCanceled",value:function(e){this.txCanceled=e}},{key:"setTxHadError",value:function(e){this.txHadError=e}},{key:"setIsGuardian",value:function(e){this.isGuardian=e}},{key:"setGuardianInfo",value:function(e){this.guardianInfo=e}},{key:"setGuardianContractInteractionTimes",value:function(e){this.guardianContractInteractionTimes=e}},{key:"setRewardDistributionFrequencyInHours",value:function(e){this.rewardDistributionFrequencyInHours=e}},{key:"setRewardsContractSettings",value:function(e){this.rewardsContractSettings=e}},{key:"setGuardianRewardsSettings",value:function(e){this.guardianRewardsSettings=e}},{key:"setDelegatorsCutPercentage",value:function(e){this.delegatorsCutPercentage=e}},{key:"setDetailsPageURL",value:function(e){this.detailsPageUrl=e}},{key:"setGuardianId",value:function(e){this.guardianId=e}},{key:"setEthereumBalance",value:function(e){this.ethBalance=e}},{key:"isUsingDefaultRewardFrequency",get:function(){return this.rewardDistributionFrequencyInHours===ne.GUARDIANS_SERVICE_CONSTANTS.emptyRewardsFrequencyValue}},{key:"isUsingDefaultDelegatorsCutPercentage",get:function(){return this.guardianRewardsSettings.isUsingDefaultRewardsPercent}},{key:"hasGuardianDetailsURL",get:function(){return!!this.detailsPageUrl}},{key:"hasGuardianId",get:function(){return void 0!==this.guardianId}}]),e}(),T=Object(ee.a)(R.prototype,"doneLoading",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(ee.a)(R.prototype,"errorLoading",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=Object(ee.a)(R.prototype,"txPending",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(ee.a)(R.prototype,"txHadError",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Object(ee.a)(R.prototype,"txCanceled",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object(ee.a)(R.prototype,"isGuardian",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=Object(ee.a)(R.prototype,"guardianInfo",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie}}),L=Object(ee.a)(R.prototype,"guardianContractInteractionTimes",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe}}),F=Object(ee.a)(R.prototype,"rewardDistributionFrequencyInHours",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.GUARDIANS_SERVICE_CONSTANTS.emptyRewardsFrequencyValue}}),N=Object(ee.a)(R.prototype,"rewardsContractSettings",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxDelegatorsStakingRewardsPercent:0,defaultDelegatorsStakingRewardsPercent:0}}}),B=Object(ee.a)(R.prototype,"guardianRewardsSettings",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isUsingDefaultRewardsPercent:!0,delegatorsStakingRewardsPercent:0}}}),M=Object(ee.a)(R.prototype,"delegatorsCutPercentage",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=Object(ee.a)(R.prototype,"detailsPageUrl",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=Object(ee.a)(R.prototype,"guardianId",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=Object(ee.a)(R.prototype,"ethBalance",[K.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(ee.a)(R.prototype,"isUsingDefaultRewardFrequency",[K.g],Object.getOwnPropertyDescriptor(R.prototype,"isUsingDefaultRewardFrequency"),R.prototype),Object(ee.a)(R.prototype,"isUsingDefaultDelegatorsCutPercentage",[K.g],Object.getOwnPropertyDescriptor(R.prototype,"isUsingDefaultDelegatorsCutPercentage"),R.prototype),Object(ee.a)(R.prototype,"hasGuardianDetailsURL",[K.g],Object.getOwnPropertyDescriptor(R.prototype,"hasGuardianDetailsURL"),R.prototype),Object(ee.a)(R.prototype,"hasGuardianId",[K.g],Object.getOwnPropertyDescriptor(R.prototype,"hasGuardianId"),R.prototype),Object(ee.a)(R.prototype,"setDoneLoading",[f],Object.getOwnPropertyDescriptor(R.prototype,"setDoneLoading"),R.prototype),Object(ee.a)(R.prototype,"setErrorLoading",[g],Object.getOwnPropertyDescriptor(R.prototype,"setErrorLoading"),R.prototype),Object(ee.a)(R.prototype,"setTxPending",[h],Object.getOwnPropertyDescriptor(R.prototype,"setTxPending"),R.prototype),Object(ee.a)(R.prototype,"setTxCanceled",[b],Object.getOwnPropertyDescriptor(R.prototype,"setTxCanceled"),R.prototype),Object(ee.a)(R.prototype,"setTxHadError",[v],Object.getOwnPropertyDescriptor(R.prototype,"setTxHadError"),R.prototype),Object(ee.a)(R.prototype,"setIsGuardian",[y],Object.getOwnPropertyDescriptor(R.prototype,"setIsGuardian"),R.prototype),Object(ee.a)(R.prototype,"setGuardianInfo",[E],Object.getOwnPropertyDescriptor(R.prototype,"setGuardianInfo"),R.prototype),Object(ee.a)(R.prototype,"setGuardianContractInteractionTimes",[O],Object.getOwnPropertyDescriptor(R.prototype,"setGuardianContractInteractionTimes"),R.prototype),Object(ee.a)(R.prototype,"setRewardDistributionFrequencyInHours",[w],Object.getOwnPropertyDescriptor(R.prototype,"setRewardDistributionFrequencyInHours"),R.prototype),Object(ee.a)(R.prototype,"setRewardsContractSettings",[x],Object.getOwnPropertyDescriptor(R.prototype,"setRewardsContractSettings"),R.prototype),Object(ee.a)(R.prototype,"setGuardianRewardsSettings",[j],Object.getOwnPropertyDescriptor(R.prototype,"setGuardianRewardsSettings"),R.prototype),Object(ee.a)(R.prototype,"setDelegatorsCutPercentage",[C],Object.getOwnPropertyDescriptor(R.prototype,"setDelegatorsCutPercentage"),R.prototype),Object(ee.a)(R.prototype,"setDetailsPageURL",[k],Object.getOwnPropertyDescriptor(R.prototype,"setDetailsPageURL"),R.prototype),Object(ee.a)(R.prototype,"setGuardianId",[S],Object.getOwnPropertyDescriptor(R.prototype,"setGuardianId"),R.prototype),Object(ee.a)(R.prototype,"setEthereumBalance",[D],Object.getOwnPropertyDescriptor(R.prototype,"setEthereumBalance"),R.prototype),R);a(633);var se=a(101),ue=a.n(se),le=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ETHEREUM_NETWORK,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_INFURA_KEY),de={urlBase:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PUBLIC_BASE_PATH||"",v2contractsAddressesOverride:{},ETHEREUM_PROVIDER_WS:"wss://mainnet.infura.io/ws/v3/".concat(le),privacyPolicyUrl:"https://www.orbs.com/guardian-portal-privacy-policy/",termsOfUseUrl:"https://www.orbs.com/guardian-portal-terms-of-use/"};var pe=a(137),me=a(698),fe=a(306),ge=a.n(fe),he=a(191),be=a.n(he),ve=ge()(be()({palette:{primary:{main:"#09142c"},secondary:{main:"#74f6fd"},text:{primary:"#dbdbdb",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#16317d"},action:{active:"#dbdbdb",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",hover:"rgba(255, 255, 255, 0.08)",selected:"rgba(255, 255, 255, 0.16)"},divider:"rgba(255, 255, 255, 0.12)"},typography:{},overrides:{MuiPaper:{root:{}},MuiTypography:{colorPrimary:{}},MuiLink:{root:{}}}})),ye=a(75);Object(K.h)({enforceActions:"observed"});var Ee=function(e){var t,a,r;return r=e?new ue.a(e):new ue.a(new ue.a.providers.WebsocketProvider(de.ETHEREUM_PROVIDER_WS)),{cryptoWalletIntegrationService:new ne.CryptoWalletConnectionService(e),guardiansService:new ne.GuardiansService(r,null===de||void 0===de||null===(t=de.v2contractsAddressesOverride)||void 0===t?void 0:t.guardiansRegistration),stakingRewardsService:new ne.StakingRewardsService(r,null===de||void 0===de||null===(a=de.v2contractsAddressesOverride)||void 0===a?void 0:a.stakingRewards)}}(window.ethereum),Oe=function(e,t,a){var r=new te(e);return{cryptoWalletIntegrationStore:r,orbsAccountStore:new ce(r,t,a,e)}}(Ee.cryptoWalletIntegrationService,Ee.guardiansService,Ee.stakingRewardsService),we=n.a.memo((function(e){console.log("Wrapper render");var t=e.appComponent;return n.a.createElement(H.a,null,n.a.createElement(z.b,Object.assign({},Oe,Ee),n.a.createElement(pe.b,{injectFirst:!0},n.a.createElement(me.a,{theme:ve},n.a.createElement(ye.a,{maxSnack:3},t)))))})),xe=a(705),je=a(27),Ce=a(669),ke=a(700),Se=a(697),De=a(699),Re=a(711),Te=a(310),Pe=a(147),Ae=Object(Se.a)((function(e){return{link:{color:e.palette.secondary.light,"&:hover":{color:e.palette.secondary.dark}}}})),Ie=n.a.memo((function(e){var t=Ae(),a=e.text,r=e.href,i=Object(Pe.a)(e,["text","href"]);return n.a.createElement("a",Object.assign({className:t.link,href:r||"",target:"_blank",rel:"noopener noreferrer"},i),a)})),Ge=n.a.memo((function(e){var t=e.value,a=e.onValueChange,r=Object(Te.renderToString)(n.a.createElement(me.a,{theme:ve},n.a.createElement(Ce.a,null,"I agree to the"," ",n.a.createElement(Ie,{href:de.termsOfUseUrl,text:"Terms of Use"})," and"," ",n.a.createElement(Ie,{href:de.privacyPolicyUrl,text:"Privacy Policy"}))));return n.a.createElement(De.a,{style:{marginTop:"0.5rem"},control:n.a.createElement(Re.a,{checked:t,onChange:function(e){return a(e.target.checked)},name:"legalTicker"}),label:n.a.createElement(Ce.a,{dangerouslySetInnerHTML:{__html:r}})})})),Ue=a(311),We=a.n(Ue),Le=Object(Se.a)((function(e){return{boldText:{fontWeight:"bold",display:"contents",color:e.palette.secondary.main}}})),Fe=n.a.memo((function(e){var t=e.children,a=Le();return n.a.createElement("div",{className:a.boldText},t)})),Ne=We()((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"start",padding:"0.5em"},textsList:{listStylePosition:"outside",paddingLeft:"1.5rem","& li":{margin:"0 0 0.2rem 0"},"& li:last-child":{margin:0}}}})),Be=n.a.memo((function(e){var t=Ne(),a=e.conceptName,r=e.details,i=e.caption,o=Object(Pe.a)(e,["conceptName","details","caption"]);return n.a.createElement("div",Object.assign({className:t.container},o),n.a.createElement(Ce.a,null,"Your ",n.a.createElement(Fe,null,a,":")),n.a.createElement("ul",{className:t.textsList},r.map((function(e){return n.a.createElement("li",{key:e.toString()},n.a.createElement(Ce.a,{variant:i?"caption":"body2"},e))}))))})),Me=["Represents the Guardian in the Guardians list","Used by Delegators to delegate to the Guardian","Holds the Guardian's self-delegated stake","Receives the Guardians rewards"],qe=[n.a.createElement(n.a.Fragment,null,"Should be different from the ",n.a.createElement(Fe,null,"Guardian address")),"Used by the node to sign blocks on Orbs blockchain","Holds ETH for node automated transactions gas","A minimal balance of 1 ETH is required upon registration","Does NOT hold your Guardian ORBS tokens"],_e=Object(Se.a)((function(e){return{noEthereumProviderSection:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"2em",backgroundColor:"rgba(0,0,0, 0.2)",borderRadius:"5%",width:"fit-content",maxWidth:"90%",boxSizing:"border-box"}}})),Ve=n.a.memo((function(e){var t=_e(),a=e.walletConnectionPhase,i=e.actionFunction,o=(e.pressedOnInstall,e.isMetaMaskProvider),c=Object(r.useState)(!1),s=Object(je.a)(c,2),u=s[0],l=s[1],d="connect"===a,p=Object(r.useMemo)((function(){return{shouldDisplayLegalTicker:d,hasExtraDetailsSection:d,buttonIsEnabled:!d||u,isInstall:"install"===a}}),[d,u,a]),m=p.shouldDisplayLegalTicker,f=p.isInstall,g=p.buttonIsEnabled,h=p.hasExtraDetailsSection,b=Object(r.useMemo)((function(){return{titleText:f?"No Ethereum provider detected":"".concat(o?"MetaMask":"Account"," connection required"),subTitleText:f?"you should install MetaMask and refresh the page":n.a.createElement(n.a.Fragment,null,"To begin, please connect with your"," ",n.a.createElement(Fe,null,"Guardian address.")),buttonText:"install"===a?"Install":"Connect"}}),[f,o,a]),v=b.titleText,y=b.buttonText,E=b.subTitleText;return n.a.createElement("div",{className:t.noEthereumProviderSection},n.a.createElement(Ce.a,{style:{marginBottom:"0.5rem"},variant:"h4"},v),n.a.createElement(Ce.a,{style:{marginBottom:"1rem"}},E),h&&n.a.createElement(Be,{conceptName:"Guardian Address",details:Me}),n.a.createElement(ke.a,{variant:"outlined",onClick:i,disabled:!g},y),m&&n.a.createElement(Ge,{value:u,onValueChange:l}))})),He=a(713),ze=a(701),Ke=a(702),Xe=a(312),Ye=a.n(Xe),$e=Object(Se.a)((function(e){return{centeredContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"}}})),Je=n.a.memo((function(e){var t=$e(),a=Ye()(),r=Object(ze.a)(a.breakpoints.down("sm"));return n.a.createElement(Ke.a,Object.assign({className:t.centeredContainer,component:"main",disableGutters:r},e))})),Qe=a(703),Ze=a(704),et=Object(Se.a)((function(e){return{appBar:{height:"".concat(5,"rem"),paddingTop:"0.5rem",paddingBottom:"0.5rem",boxSizing:"border-box"},title:{flexGrow:1,textAlign:"center",marginTop:"1em",marginBottom:"1em"}}})),tt=n.a.memo((function(e){var t=et();return n.a.createElement(Qe.a,{className:t.appBar,position:"fixed"},n.a.createElement(Ze.a,null,n.a.createElement("div",{className:t.title},n.a.createElement(Ce.a,{variant:"h5"},"ORBS Guardians Portal"))))})),at=Object(Se.a)((function(e){return{page:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"100%",boxSizing:"border-box",padding:"2em",height:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),rt=n.a.memo((function(e){var t=e.children,a=at();return n.a.createElement("div",{className:a.page},n.a.createElement(Ze.a,null),t)})),nt=Object(Se.a)((function(e){return{app:{minHeight:"100%",flex:1,backgroundColor:"#06142e",backgroundRepeat:"repeat-y",backgroundImage:"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)",backgroundAttachment:"scroll",backgroundPosition:"top center"}}})),it=n.a.memo((function(e){var t=nt(),a=Object(He.a)(!1),i=Object(r.useCallback)((function(){window.open("https://metamask.io/","_blank"),a.setTrue()}),[a]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(tt,null),n.a.createElement("main",{className:t.app},n.a.createElement(Je,{id:"appContainer"},n.a.createElement(rt,null,n.a.createElement(Ve,{walletConnectionPhase:"install",actionFunction:i}))),n.a.createElement(xe.a,null)))})),ot=a(30);function ct(){return n.a.useContext(z.a)}function st(){return ct().cryptoWalletIntegrationStore}function ut(){return ct().orbsAccountStore}var lt=Object(Se.a)((function(e){return{contentFitter:{height:"100%",width:"fit-content",maxWidth:"100%"}}})),dt=n.a.memo((function(e){var t=lt(),a=e.children;return n.a.createElement("div",{className:t.contentFitter},a)})),pt=n.a.memo((function(e){return n.a.createElement(rt,null,n.a.createElement(dt,null,n.a.createElement(Ce.a,null,"Error loading")))})),mt=n.a.memo((function(e){return n.a.createElement(rt,null,n.a.createElement(dt,null,n.a.createElement(Ce.a,null,"Loading...")))})),ft=a(716),gt=a(707),ht=a(706),bt=a(49),vt=a(710),yt=a(76),Et=Object(Se.a)((function(e){return{helperText:{color:e.palette.secondary.main},textsList:{listStylePosition:"outside",paddingLeft:"1rem"}}})),Ot=n.a.memo((function(e){var t=Et(),a=e.helperTexts;e.header,a.length;return n.a.createElement(n.a.Fragment,null,n.a.createElement("ul",{className:t.textsList},a.map((function(e,a){return n.a.createElement(n.a.Fragment,{key:"fragment_".concat(e)},n.a.createElement("li",{id:a.toString(),key:e.toString(),className:t.helperText},n.a.createElement(Ce.a,{style:{wordWrap:"break-word"},variant:"caption"},e)))}))))}));function wt(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}var xt=/^0x[a-fA-F0-9]{40}$/,jt=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,Ct=["The name that the Guardian will be recognized by."],kt=["The Guardian website is used by Delegators when selecting a Guardian."],St=["A valid IPv4 address is required to allow the Guardian\u2019s node to connect to the network gossip topology."],Dt=[n.a.createElement(n.a.Fragment,null,"Should be different from the"," ",n.a.createElement("div",{style:{display:"contents",fontWeight:"bold"}},"Guardian address"),"."),"Used by the Orbs node to automatically send transactions such as ReadyForCommittee.","Used to sign blocks on Orbs platform.","Should hold ETH for the automated transactions gas (A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian).","The Orbs Node address should differ from the Guardian address."],Rt=Object(Se.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}},actionButton:{color:e.palette.secondary.main,borderColor:e.palette.secondary.main}}})),Tt=n.a.memo((function(e){var t=Rt(),a=(e.guardianAddress,e.guardianInitialInfo),i=e.submitInfo,o=e.actionButtonTitle,c=e.disableSubmit,s=e.messageForSubmitButton,u=Object(yt.a)(),l=u.register,d=u.handleSubmit,p=u.errors,m=Object(ht.a)(a.name),f=Object(ht.a)(a.website),g=Object(ht.a)(a.ip),h=Object(ht.a)(a.orbsAddr),b=!!p.nodeAddress,v=!!p.ipAddress,y=!!p.website,E=m.setValue,O=f.setValue,w=g.setValue,x=h.setValue;Object(r.useEffect)((function(){a&&(console.log("Re-setting data"),E(a.name),O(a.website),w(a.ip),x(a.orbsAddr))}),[a,w,E,x,O]);var j=Object(bt.a)(),C=Object(ze.a)(j.breakpoints.down("xs"));console.log(C);Object(r.useCallback)((function(e,t,a){var r;return a&&(r=n.a.createElement(Ot,{helperTexts:a})),e&&t&&(r=t),r}),[]);var k=Object(r.useCallback)((function(e){var t={ip:e.ipAddress,orbsAddr:e.nodeAddress,name:e.name,website:e.website};i(t)}),[i]);return n.a.createElement("form",{onSubmit:d((function(e){return k(e)})),style:{maxWidth:"100%",width:"100%"}},n.a.createElement(vt.a,{InputLabelProps:{style:{pointerEvents:"auto"}},name:"name",label:"Guardian name",placeholder:"e.g: Number One ORBS Guardian",title:Ct[0],value:m.value,onChange:function(e){return m.setValue(e.target.value)},required:!0,inputRef:l,fullWidth:!0,className:t.textField}),n.a.createElement("br",null),n.a.createElement(vt.a,{fullWidth:!0,name:"website",label:"Guardian website",placeholder:"e.g: https://www.number1guardian.com",title:kt[0],helperText:y&&"Please use a valid URL",value:f.value,onChange:function(e){return f.setValue(e.target.value)},required:!0,error:y,inputRef:l({validate:wt}),className:t.textField}),n.a.createElement("br",null),n.a.createElement(vt.a,{fullWidth:!0,name:"ipAddress",label:"Node IP",placeholder:"e.g: 123.17.46.251",title:St[0],value:g.value,onChange:function(e){return g.setValue(e.target.value)},required:!0,inputRef:l({pattern:jt}),error:v,helperText:v&&"Please use a valid IPV4 address",className:t.textField}),n.a.createElement("br",null),n.a.createElement(vt.a,{name:"nodeAddress",label:"Node address",placeholder:"e.g: 0x0cBb46287c93357be4CF60fe9601c2c7A2700dC2",title:Dt[1],value:h.value,onChange:function(e){return h.setValue(e.target.value)},error:b,helperText:b&&"Please use a valid address",required:!0,inputRef:l({pattern:xt}),fullWidth:!0,className:t.textField}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.actionButton,variant:"outlined",fullWidth:!0,type:"submit",disabled:c},o),n.a.createElement("br",null),n.a.createElement("br",null),s&&n.a.createElement(Ce.a,{variant:"body2",color:"error",style:{width:"fit-content"}},s))})),Pt=a(715),At=a(313),It=a.n(At),Gt=Object(Se.a)((function(e){return{container:{padding:"0.5rem 0",display:"flex",flexDirection:"column",flexWrap:"wrap",justifyItems:"center",justifyContent:"center"}}})),Ut=n.a.memo((function(e){var t=Gt(),a=e.children;return n.a.createElement("div",{className:t.container},a)})),Wt=n.a.memo((function(e){return n.a.createElement(Ut,null,n.a.createElement(Fe,null,"Please Notice:"),n.a.createElement(Be,{conceptName:"Guardian Address",details:Me}),n.a.createElement(Be,{conceptName:"Node Address",details:qe}))})),Lt=Object(Se.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"},boldText:{fontWeight:"bold",display:"contents"}}})),Ft={orbsAddr:"",ip:"",website:"",name:""},Nt=n.a.memo((function(e){var t=Lt(),a=e.guardianAddress,i=e.registerGuardian,o=e.cryptoWalletConnectionService,c=Object(r.useState)(void 0),s=Object(je.a)(c,2),u=s[0],l=s[1],d=Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orbsAddr.toLowerCase()!==a.toLowerCase()){e.next=3;break}return l("Your Orbs node address cannot be the same as your Guardian address ".concat(a)),e.abrupt("return");case 3:return e.next=5,o.readEthereumBalance(t.orbsAddr);case 5:if(!(e.sent<1)){e.next=9;break}return l("A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian."),e.abrupt("return");case 9:i(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,a,i]);return n.a.createElement("div",{id:"RegisterGuardianSection",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"min-content",maxWidth:"100%"}},n.a.createElement(Pt.a,{className:t.avatar},n.a.createElement(It.a,null)),n.a.createElement("div",{style:{maxWidth:"100%",textAlign:"center"}},n.a.createElement(Ce.a,{variant:"h5"},"Guardian Registration"),n.a.createElement(Ce.a,{variant:"h6"},"Your ",n.a.createElement("div",{className:t.boldText},"Guardian address "),"is:"),n.a.createElement(Ce.a,{style:{textOverflow:"ellipsis",overflow:"hidden"}},a)),n.a.createElement(Wt,null),n.a.createElement(Tt,{guardianAddress:a,submitInfo:d,guardianInitialInfo:Ft,actionButtonTitle:"Register",messageForSubmitButton:u}))}));function Bt(){var e=n.a.useContext(z.a);if(!e)throw new Error("Tried to use services before initialising them");return e}function Mt(){return Bt().cryptoWalletIntegrationService}var qt,_t=Object(Se.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Vt=n.a.memo((function(e){var t=_t(),a=Object(ye.b)().enqueueSnackbar,i=Mt(),o=st(),c=ut(),s=Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.registerGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a("Error in 'Guardian Registration' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[a,c]);return n.a.createElement(rt,null,n.a.createElement(dt,null,n.a.createElement("div",{style:{display:"flex",maxWidth:"100%"}},n.a.createElement(Nt,{registerGuardian:s,guardianAddress:o.mainAddress,cryptoWalletConnectionService:i})),n.a.createElement(ft.a,{className:t.backdrop,open:c.txPending},n.a.createElement(gt.a,{color:"inherit"}))))})),Ht=a(708),zt=a(712),Kt=a(314),Xt=a.n(Kt),Yt=a(74),$t=Object(Se.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),Jt=n.a.memo((function(e){var t=$t(),a=e.guardianInfo,i=e.guardianAddress,o=e.updateGuardianDetails,c=e.guardianContractInteractionTimes,s=c.lastUpdateTime,u=c.registrationTime,l=(Object(r.useMemo)((function(){return Object(zt.a)(u)}),[u]),Object(r.useMemo)((function(){return Object(zt.a)(s)}),[s]));return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pt.a,{className:t.avatar},n.a.createElement(Xt.a,null)),n.a.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignContent:"center",overflow:"hidden"}},n.a.createElement(Ce.a,{variant:"h5"},"Guardian details update"),n.a.createElement(Ce.a,{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},i)),n.a.createElement(Tt,{guardianAddress:i,submitInfo:o,guardianInitialInfo:a,actionButtonTitle:"Update"}),n.a.createElement("br",null),n.a.createElement(Yt.Transition,{items:l,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"},update:{opacity:1}},(function(e){return function(e){return n.a.createElement(Ce.a,{variant:"h6",style:e},"Details Last updated: ",l.toLocaleString())}})),n.a.createElement("br",null))})),Qt=a(315),Zt=a.n(Qt),ea=a(66),ta=Object(Se.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}},openUnregisterMenuButton:{color:e.palette.warning.main,borderColor:e.palette.warning.main},closeUnregisterMenuButton:{color:e.palette.secondary.main,borderColor:e.palette.secondary.main},unregisterButton:{color:e.palette.error.main,borderColor:e.palette.error.main}}})),aa=n.a.memo((function(e){var t=ta(),a=e.unregisterGuardian,i=Object(He.a)(!1),o=Object(yt.a)(),c=(o.register,o.handleSubmit),s=(o.errors,Object(r.useCallback)((function(e){a()}),[a]));return n.a.createElement("form",{style:{maxWidth:"100%",width:"100%"},onSubmit:c(s)},n.a.createElement(Yt.Transition,{items:i.value,initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"}},(function(e){return e?function(e){return n.a.createElement("div",{style:Object(ea.a)(Object(ea.a)({},e),{},{maxWidth:"100%",width:"100%"})},n.a.createElement(ke.a,{className:t.unregisterButton,variant:"outlined",type:"submit",fullWidth:!0},"Unregister"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.closeUnregisterMenuButton,onClick:i.setFalse,variant:"outlined",fullWidth:!0,style:e},"Close unregister section"))}:function(e){return n.a.createElement(ke.a,{className:t.openUnregisterMenuButton,onClick:i.setTrue,variant:"outlined",fullWidth:!0,style:e},"Open unregister section")}})))})),ra=Object(Se.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),na=n.a.memo((function(e){var t=ra(),a=e.unregisterGuardian;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pt.a,{className:t.avatar},n.a.createElement(Zt.a,null)),n.a.createElement(Ce.a,{variant:"h5"},"Guardian Unregistering"),n.a.createElement("br",null),n.a.createElement(aa,{unregisterGuardian:a}))})),ia=a(316),oa=a.n(ia),ca=a(714),sa=Object(Se.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}},actionButton:{color:e.palette.secondary.main,borderColor:e.palette.secondary.main}}})),ua=n.a.memo((function(e){var t=sa(),a=e.currentDelegatorsCut,i=e.updateDelegatorsCut,o=e.isUsingDefaultValue,c=e.delegatorsCutDefaultValue,s=e.delegatorsCutMaxValue,u="Valid values are between 0 and ".concat(s),l=Object(He.a)(!1),d=Object(yt.a)(),p=d.register,m=d.handleSubmit,f=d.errors,g=Object(ca.a)(Math.min(a||0,66),{upperLimit:s}),h=!!f.delegatorsCut,b=Object(r.useCallback)((function(e){i(parseFloat(e.delegatorsCut))}),[i]),v=g.setValue;Object(r.useEffect)((function(){v(Math.min(a||0,s))}),[a,s,v]),console.log({currentDelegatorsCut:a});var y=Object(r.useMemo)((function(){return o?"Current cut : Default value (".concat(c,"%)"):"Current cut : ".concat(a,"%")}),[a,c,o]);return n.a.createElement("form",{style:{maxWidth:"100%",width:"100%",display:"relative"},onSubmit:m(b)},n.a.createElement(Ce.a,{variant:"body1"},y),n.a.createElement("br",null),n.a.createElement(Yt.Transition,{items:l.value,initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"}},(function(e){return e?function(e){return n.a.createElement("div",{style:Object(ea.a)(Object(ea.a)({},e),{},{maxWidth:"100%",width:"100%"})},n.a.createElement(vt.a,{fullWidth:!0,name:"delegatorsCut",title:"Delegators cut % out of staking rewards",label:"Delegators cut % out of staking rewards",value:g.value,inputProps:{step:1},onChange:function(e){g.setValue(parseFloat(e.target.value)||0)},required:!0,type:"number",inputRef:p({max:s}),error:h,helperText:h?u:"The percentage of the staking rewards that is distributed to your Delegators. between 0 and ".concat(s),className:t.textField}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.actionButton,variant:"outlined",type:"submit",fullWidth:!0},"Update Delegators cut"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.actionButton,variant:"outlined",fullWidth:!0,onClick:function(){l.setFalse()}},"Close Section"))}:function(e){return n.a.createElement(ke.a,{className:t.actionButton,onClick:l.setTrue,variant:"outlined",fullWidth:!0,style:e},"Edit Delegators cut")}})))})),la=Object(Se.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),da=n.a.memo((function(e){var t=la(),a=e.delegatorsCut,r=e.updateDelegatorsCut,i=e.isUsingDefaultValue,o=e.delegatorsCutMaxValue,c=e.delegatorsCutDefaultValue;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pt.a,{className:t.avatar},n.a.createElement(oa.a,null)),n.a.createElement(Ce.a,{variant:"h5"},"Delegators cut"),n.a.createElement(ua,{updateDelegatorsCut:r,currentDelegatorsCut:a,isUsingDefaultValue:i,delegatorsCutDefaultValue:c,delegatorsCutMaxValue:o}))})),pa=a(317),ma=a.n(pa),fa=Object(Se.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}},actionButton:{color:e.palette.secondary.main,borderColor:e.palette.secondary.main}}})),ga=n.a.memo((function(e){var t=fa(),a=e.currentGuardianDetailsUrl,i=e.updateGuardianDetailsUrl,o=e.hasGuardianDetailsUrl,c=e.detailsRequirementsLink,s=n.a.createElement(Ce.a,{component:"span",variant:"caption"},"Setting a URL to your"," ",n.a.createElement(Ie,{text:"details",href:c})," page will allow you to run 'certified-only' VCs"),u=Object(He.a)(!1),l=Object(yt.a)(),d=l.register,p=l.handleSubmit,m=!!l.errors.guardianDetailsUrl,f=Object(ht.a)(""),g=Object(r.useCallback)((function(e){i(e.guardianDetailsUrl)}),[i]),h=f.setValue;Object(r.useEffect)((function(){h(a||"")}),[h,a]);var b=Object(r.useMemo)((function(){return o?n.a.createElement(Ce.a,{component:"span"},"Your details page :"," ",n.a.createElement(Ie,{href:(null===a||void 0===a?void 0:a.startsWith("http"))?a:"http://"+a,text:a})):"You have not set your details page URL"}),[a,o]);return n.a.createElement("form",{style:{maxWidth:"100%",width:"100%",display:"relative"},onSubmit:p(g)},n.a.createElement(Ce.a,{variant:"body1"},b),n.a.createElement("br",null),n.a.createElement(Yt.Transition,{items:u.value,initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"}},(function(e){return e?function(e){return n.a.createElement("div",{style:Object(ea.a)(Object(ea.a)({},e),{},{maxWidth:"100%",width:"100%"})},n.a.createElement(vt.a,{fullWidth:!0,name:"guardianDetailsUrl",title:"Details page URL",label:"Details page URL",value:f.value,onChange:function(e){f.setValue(e.target.value||"")},required:!0,inputRef:d({validate:wt}),error:m,helperText:m?"Please use a valid URL":s,className:t.textField}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.actionButton,variant:"outlined",type:"submit",fullWidth:!0},"Update your details page URL"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ke.a,{className:t.actionButton,variant:"outlined",fullWidth:!0,onClick:function(){u.setFalse()}},"Close Section"))}:function(e){return n.a.createElement(ke.a,{className:t.actionButton,onClick:u.setTrue,variant:"outlined",fullWidth:!0,style:e},"Edit your details page URL")}})))})),ha=Object(Se.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),ba="https://github.com/orbs-network/validator-instructions/blob/master/public/certified_committee.md",va=n.a.memo((function(e){var t=ha(),a=e.currentGuardianDetailsUrl,r=e.hasGuardianDetailsUrl,i=e.updateGuardianDetailsUrl;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Pt.a,{className:t.avatar},n.a.createElement(ma.a,null)),n.a.createElement(Ce.a,{variant:"h5"},"Guardian\u2019s Information"," ",n.a.createElement(Ie,{text:"( ? )",href:ba})),n.a.createElement(ga,{currentGuardianDetailsUrl:a,hasGuardianDetailsUrl:r,updateGuardianDetailsUrl:i,detailsRequirementsLink:ba}))})),ya=Object(Se.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ea=Object(z.c)((function(e){var t=ya(),a=Object(ye.b)().enqueueSnackbar,i=st(),o=ut(),c=Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.updateGuardianInfo(t);case 3:a("Guardian details successfully updated",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Error in 'Guardian Details Update' TX ".concat(e.t0.message),{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[a,o]),s=Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.writeGuardianDelegatorsCutPercentage(t);case 3:a("Delegators cut successfully updated",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Error in 'Delegators cut percentage Update' TX ".concat(e.t0.message),{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[a,o]),u=Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.writeGuardianDetailsPageURL(t);case 3:a("Details page URL updated",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Error in 'Details page URL Update' TX ".concat(e.t0.message),{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[a,o]),l=(Object(r.useCallback)(function(){var e=Object($.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.writeGuardianId(t);case 3:a("Guardian ID successfully updated",{variant:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Error in 'Guardian ID Update' TX ".concat(e.t0.message),{variant:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[a,o]),Object(r.useCallback)(Object($.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.unregisterGuardian();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a("Error in 'Unregister guardian' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[a,o]));return n.a.createElement(rt,null,n.a.createElement(dt,null,n.a.createElement("div",{style:{display:"flex",maxWidth:"100%"}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%",width:"min-content",textAlign:"center"}},n.a.createElement(Jt,{guardianInfo:o.guardianInfo,guardianAddress:i.mainAddress,guardianContractInteractionTimes:o.guardianContractInteractionTimes,updateGuardianDetails:c}),n.a.createElement(Ht.a,{style:{width:"100%",height:"3px",marginBottom:"1rem"}}),n.a.createElement(da,{updateDelegatorsCut:s,delegatorsCut:o.delegatorsCutPercentage,isUsingDefaultValue:o.isUsingDefaultDelegatorsCutPercentage,delegatorsCutDefaultValue:o.rewardsContractSettings.defaultDelegatorsStakingRewardsPercent,delegatorsCutMaxValue:o.rewardsContractSettings.maxDelegatorsStakingRewardsPercent}),n.a.createElement(Ht.a,{style:{width:"100%",height:"3px",marginBottom:"1rem"}}),n.a.createElement(va,{updateGuardianDetailsUrl:function(e){return u(e)},currentGuardianDetailsUrl:o.detailsPageUrl,hasGuardianDetailsUrl:o.hasGuardianDetailsURL}),n.a.createElement(Ht.a,{style:{width:"100%",height:"3px",marginBottom:"1rem",marginTop:"1rem"}}),n.a.createElement(na,{unregisterGuardian:l}),n.a.createElement("br",null))),n.a.createElement(ft.a,{className:t.backdrop,open:o.txPending},n.a.createElement(gt.a,{color:"inherit"}))))})),Oa=Object(z.c)((function(e){var t=ut();return t.errorLoading?n.a.createElement(pt,null):t.doneLoading?t.isGuardian?n.a.createElement(Ea,null):n.a.createElement(Vt,null):n.a.createElement(mt,null)})),wa=a(709),xa=a(695),ja=a(318),Ca=a.n(ja),ka=Object(Se.a)((function(e){return{footerContainer:{position:"absolute",bottom:0},bottomAppBar:{height:"3em",bottom:0,top:"auto",backgroundColor:Ca()(e.palette.primary.main).fade(.3).toString(),display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:"1em",paddingLeft:"1em"},appVersion:{marginLeft:"auto"}}})),Sa=(n.a.memo((function(e){var t=e.children,a=Object(wa.a)();return console.log(a),n.a.createElement(xa.a,{appear:!1,direction:"up",in:a},t)})),n.a.memo((function(e){var t=ka(),a=e.version;return n.a.createElement("div",{className:t.footerContainer},n.a.createElement(Ze.a,null),n.a.createElement(Qe.a,{className:t.bottomAppBar,position:"fixed"},n.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},n.a.createElement("div",{style:{marginRight:"auto",marginLeft:"auto",position:"absolute"}},n.a.createElement(Ie,{text:"Term of use",href:de.termsOfUseUrl,style:{paddingInlineEnd:"1em",justifySelf:"center"}}),n.a.createElement(Ie,{href:de.privacyPolicyUrl,text:"Privacy Policy"})),n.a.createElement("div",{className:t.appVersion},n.a.createElement(Ce.a,{variant:"caption"},"version ",a)))))}))),Da=Object(Se.a)((function(){return{app:{minHeight:"100%",flex:1,backgroundColor:"#06142e",backgroundRepeat:"repeat-y",backgroundImage:"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)",backgroundAttachment:"scroll",backgroundPosition:"top center"}}})),Ra=Object(z.c)((function(){var e=Da(),t=st(),a=Mt(),i=ut(),o=Object(ye.b)().enqueueSnackbar,c=t.isConnectedToWallet,s=Object(r.useMemo)((function(){return c?n.a.createElement(ot.c,null,n.a.createElement(ot.a,{path:"/"},n.a.createElement(Oa,null))):n.a.createElement(rt,null,n.a.createElement(Ve,{walletConnectionPhase:"connect",actionFunction:function(){return t.askToConnect()},isMetaMaskProvider:a.isMetamaskInstalled}))}),[a.isMetamaskInstalled,t,c]),u=i.txHadError;Object(r.useEffect)((function(){u&&o("Error in Transaction",{variant:"error"})}),[o,u]);var l=i.txCanceled;return Object(r.useEffect)((function(){l&&o("Transaction canceled",{variant:"info"})}),[o,l]),n.a.createElement(n.a.Fragment,null,n.a.createElement(tt,null),n.a.createElement("main",{className:e.app},n.a.createElement(Je,{id:"appContainer"},s),n.a.createElement(xe.a,null)),n.a.createElement(Sa,{version:"0.1"}))}));qt=!!window.ethereum?n.a.createElement(Ra,null):n.a.createElement(it,null),o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(we,{appComponent:qt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[330,1,2]]]);
//# sourceMappingURL=main.c9b3646e.chunk.js.map