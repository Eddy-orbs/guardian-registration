(this["webpackJsonpguardian-registration"]=this["webpackJsonpguardian-registration"]||[]).push([[0],{228:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},238:function(e,t,n){e.exports=n(559)},243:function(e,t,n){},244:function(e,t,n){},254:function(e,t){},263:function(e,t){},281:function(e,t){},283:function(e,t){},300:function(e,t){},301:function(e,t){},303:function(e,t){},304:function(e,t){},379:function(e,t){},381:function(e,t){},390:function(e,t){},392:function(e,t){},417:function(e,t){},419:function(e,t){},425:function(e,t){},426:function(e,t){},429:function(e,t){},445:function(e,t){},448:function(e,t){},453:function(e,t){},465:function(e,t){},466:function(e,t){},468:function(e,t){},559:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(227),i=n.n(o);n(243),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(236),c=n(235),u=n(228),p=n.n(u);n(244);var d,l,h,v,f,b,m,y,g,O,E,w,C=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null,"Edit ",a.a.createElement("code",null,"src/App.tsx")," and save to reload."),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))},A=n(8),S=n(10),k=n.n(S),j=n(25),P=n(42),W=n(5),T=n(7),D=n(26),_=(n(134),d=Object(A.f)("setWalletConnectionRequestApproved"),l=Object(A.f)("setMainAddress"),h=function(){function e(t){var n=this;Object(W.a)(this,e),this.cryptoWalletConnectionService=t,Object(P.a)(this,"walletConnectionRequestApproved",v,this),Object(P.a)(this,"hasEthereumProvider",f,this),Object(P.a)(this,"hasEventsSupport",b,this),Object(P.a)(this,"mainAddress",m,this),this.addressCheckingInterval=void 0,this.reactionToWalletConnection=void 0,this.hasEthereumProvider=t.hasEthereumProvider,this.hasEventsSupport=t.hasEventsSupport,this.reactionToWalletConnection=Object(A.o)((function(){return n.isConnectedToWallet}),function(){var e=Object(j.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&n.readInformationFromConnectedWallet();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0}),this.hasEthereumProvider&&(this.cryptoWalletConnectionService.hasEventsSupport?this.cryptoWalletConnectionService.onMainAddressChange((function(e){return n.setMainAddress(e)})):(this.cryptoWalletConnectionService.readMainAddress().then((function(e){return n.setMainAddress(e)})),this.addressCheckingInterval=setInterval((function(){return n.cryptoWalletConnectionService.readMainAddress().then((function(e){return n.setMainAddress(e)}))}),1e3)))}return Object(T.a)(e,[{key:"askToConnect",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isConnectedToWallet){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.cryptoWalletConnectionService.requestConnectionPermission();case 6:return t=e.sent,this.setWalletConnectionRequestApproved(t),e.abrupt("return",this.walletConnectionRequestApproved);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readInformationFromConnectedWallet",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readMainAddress();case 2:t=e.sent,this.setMainAddress(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWalletConnectionRequestApproved",value:function(e){this.walletConnectionRequestApproved=e}},{key:"setMainAddress",value:function(e){this.mainAddress=e}},{key:"isConnectedToWallet",get:function(){return this.hasEthereumProvider&&(this.cryptoWalletConnectionService.didUserApproveDappInThePast||this.walletConnectionRequestApproved)}}]),e}(),v=Object(D.a)(h.prototype,"walletConnectionRequestApproved",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=Object(D.a)(h.prototype,"hasEthereumProvider",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=Object(D.a)(h.prototype,"hasEventsSupport",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(D.a)(h.prototype,"mainAddress",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(D.a)(h.prototype,"isConnectedToWallet",[A.g],Object.getOwnPropertyDescriptor(h.prototype,"isConnectedToWallet"),h.prototype),Object(D.a)(h.prototype,"setWalletConnectionRequestApproved",[d],Object.getOwnPropertyDescriptor(h.prototype,"setWalletConnectionRequestApproved"),h.prototype),Object(D.a)(h.prototype,"setMainAddress",[l],Object.getOwnPropertyDescriptor(h.prototype,"setMainAddress"),h.prototype),h),L=(y=Object(A.f)("setDoneLoading"),g=Object(A.f)("setErrorLoading"),O=function(){function e(t,n){var r=this;Object(W.a)(this,e),this.cryptoWalletIntegrationStore=t,this.guardiansService=n,Object(P.a)(this,"doneLoading",E,this),Object(P.a)(this,"errorLoading",w,this),this.addressChangeReaction=void 0,this.addressChangeReaction=Object(A.o)((function(){return r.cryptoWalletIntegrationStore.mainAddress}),function(){var e=Object(j.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setDoneLoading(!1),e.next=3,r.reactToConnectedAddressChanged(t);case 3:r.setDoneLoading(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0})}return Object(T.a)(e,[{key:"isGuardian",get:function(){return!0}}]),Object(T.a)(e,[{key:"reactToConnectedAddressChanged",value:function(){var e=Object(j.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.setDefaultAccountAddress(t),this.cryptoWalletIntegrationStore.hasEventsSupport&&this.refreshAccountListeners(t),e.prev=3,e.next=6,this.readDataForAccount(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.failLoadingProcess(e.t0),console.error("Error in reacting to address change in Orbs Account Store",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultAccountAddress",value:function(e){}},{key:"manuallyReadAccountData",value:function(){var e=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readDataForAccount(this.cryptoWalletIntegrationStore.mainAddress);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.failLoadingProcess(e.t0),console.error("Error in manually reading address data in Orbs Account Store",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"readDataForAccount",value:function(){var e=Object(j.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAccountListeners",value:function(){var e=Object(j.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cancelAllCurrentSubscriptions();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllCurrentSubscriptions",value:function(){}},{key:"failLoadingProcess",value:function(e){this.setErrorLoading(!0),this.setDoneLoading(!0)}},{key:"setDoneLoading",value:function(e){this.doneLoading=e}},{key:"setErrorLoading",value:function(e){this.errorLoading=e}}]),e}(),E=Object(D.a)(O.prototype,"doneLoading",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(D.a)(O.prototype,"errorLoading",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(D.a)(O.prototype,"isGuardian",[A.g],Object.getOwnPropertyDescriptor(O.prototype,"isGuardian"),O.prototype),Object(D.a)(O.prototype,"setDoneLoading",[y],Object.getOwnPropertyDescriptor(O.prototype,"setDoneLoading"),O.prototype),Object(D.a)(O.prototype,"setErrorLoading",[g],Object.getOwnPropertyDescriptor(O.prototype,"setErrorLoading"),O.prototype),O);var I=n(62),R=n.n(I),M=function(){function e(t){Object(W.a)(this,e),this.ethereum=t,this.web3=void 0,this.hasEthereumProvider=void 0,this.hasEventsSupport=void 0,this.isMetamaskInstalled=void 0,this.isSemiCompliantEthereumProviderInstalled=void 0,this.hasEthereumProvider=void 0!==this.ethereum,this.isMetamaskInstalled=this.hasEthereumProvider&&!!this.ethereum.isMetaMask,this.isSemiCompliantEthereumProviderInstalled=this.hasEthereumProvider&&!this.ethereum.isMetaMask,this.hasEthereumProvider&&(this.web3=new R.a(this.ethereum));var n=this.hasEthereumProvider?this.ethereum.on:void 0;this.hasEventsSupport=void 0!==n&&null!==n}return Object(T.a)(e,[{key:"requestConnectionPermission",value:function(){var e=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ethereum.enable();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"getIsMainNetwork",value:function(){var e=Object(j.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isMetamaskInstalled&&"1"===this.ethereum.networkVersion);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readMainAddress",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.web3)||void 0===t?void 0:t.eth.getAccounts();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.abrupt("return",n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readCurrentBlockNumber",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(t=this.web3)||void 0===t?void 0:t.eth.getBlockNumber())||0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMainAddressChange",value:function(e){var t=this;if(!this.hasEventsSupport)throw new Error("Cannot subscribe to events with given Ethereum provider");var n=function(t){return e(t[0])};return this.ethereum.on("accountsChanged",n),function(){t.ethereum.off("accountsChanged",n)}}},{key:"didUserApproveDappInThePast",get:function(){return this.isMetamaskInstalled&&!!this.ethereum.selectedAddress}}]),e}(),x=n(128),N=(Object({NODE_ENV:"production",PUBLIC_URL:"/guardian-registration",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).ETHEREUM_NETWORK,Object({NODE_ENV:"production",PUBLIC_URL:"/guardian-registration",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_INFURA_KEY),K={urlBase:Object({NODE_ENV:"production",PUBLIC_URL:"/guardian-registration",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PUBLIC_BASE_PATH||"",ETHEREUM_PROVIDER_WS:"wss://mainnet.infura.io/ws/v3/".concat(N)};console.log({config:K});var B=K,U=n(52),q="".concat("https","://").concat("validator.orbs.com","/vchains/").concat(11e5.toString());var H=n(575),F=n(573),z=n(97),V=n(230),G=n.n(V),J=n(231),Y=n.n(J),$=G()(Y()({palette:{type:"dark",primary:{main:"#0D0D0D"},secondary:{main:"#03FCF5"},text:{primary:"#dbdbdb",secondary:"#7B7B7B"},background:{default:"#121212"}},typography:{},overrides:{MuiPaper:{root:{backgroundColor:"#0D0D0D"}},MuiTypography:{colorPrimary:{color:"#dbdbdb"}},MuiLink:{root:{color:z.a[500]}}}})),Q=n(574);Object(A.h)({enforceActions:"observed"});var X=function(e){var t,n=function(){var e=Object(U.createAccount)(),t=e.publicKey,n=e.privateKey,r=new U.LocalSigner({publicKey:t,privateKey:n});return new U.Client(q,11e5,U.NetworkType.NETWORK_TYPE_TEST_NET,r)}(),r=new x.OrbsClientService(n);return t=e?new R.a(e):new R.a(new R.a.providers.WebsocketProvider(B.ETHEREUM_PROVIDER_WS)),{cryptoWalletIntegrationService:new M(e),guardiansService:new x.GuardiansService(t,r)}}(window.ethereum),Z=function(e,t){var n=new _(e);return{cryptoWalletIntegrationStore:n,orbsAccountStore:new L(n,t)}}(X.cryptoWalletIntegrationService,X.guardiansService),ee=a.a.memo((function(e){return a.a.createElement(s.a,null,a.a.createElement(c.a,Object.assign({},Z,X),a.a.createElement(H.b,{injectFirst:!0},a.a.createElement(F.a,{theme:$},a.a.createElement(C,null),a.a.createElement(Q.a,null)))))}));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.39aceab4.chunk.js.map