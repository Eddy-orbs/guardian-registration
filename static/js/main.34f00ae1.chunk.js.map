{"version":3,"sources":["serviceWorker.ts","store/CryptoWalletConnectionStore.ts","utils/utils.ts","constants/ethereumErrorCodes.ts","store/OrbsAccountStore.ts","configs.ts","theme/Theme.tsx","store/storesInitialization.ts","AppWrapper.tsx","services/Services.ts","components/InTextLink.tsx","components/ethereumConnection/LegalTicker.tsx","components/texts/boldText.tsx","components/detailsList/Detailslist.tsx","constants/explainingTexts.tsx","components/ethereumConnection/CountryLegalTicker.tsx","components/shared/ActionButton/ActionButton.tsx","components/ethereumConnection/NoEthereumProviderSection.tsx","components/structure/ContentContainer.tsx","components/structure/Header.tsx","components/structure/Page.tsx","pages/NoEthereumProviderPage.tsx","store/storeHooks.ts","components/structure/ContentFitting.tsx","pages/error/ErrorLoadingPage.tsx","pages/loading/LoadingPage.tsx","components/forms/FormHelperListTexts.tsx","pages/GuardiandRegisterOrEdit/forms/inoputValidators.ts","pages/GuardiandRegisterOrEdit/forms/GuradiansDetailsForm.tsx","components/detailsList/DetailsListContainer.tsx","pages/GuardianFormDetailsList.tsx","pages/GuardiandRegisterOrEdit/guardianRegister/RegisterGuardianSection.tsx","services/servicesHooks.ts","pages/GuardiandRegisterOrEdit/guardianRegister/GuardianRegistrationPage.tsx","pages/GuardiandRegisterOrEdit/forms/GuardiansDetailsUrlForm.tsx","pages/GuardiandRegisterOrEdit/guardianEdit/sections/EditDelegatorsCertificateSection.tsx","pages/GuardiandRegisterOrEdit/guardianEdit/GuardianDetails.tsx","pages/GuardiandRegisterOrEdit/forms/UnregisterForm.tsx","components/shared/modals/ActionConfirmationModal.tsx","pages/GuardiandRegisterOrEdit/forms/DelegatorsShareForm.tsx","components/forms/FormWrapper.tsx","pages/GuardiandRegisterOrEdit/guardianEdit/GuardiansEditingPage.tsx","pages/GuardiandRegisterOrEdit/GuardianRegisterOrEditPage.tsx","index.tsx","components/structure/Footer.tsx","App.tsx"],"names":["Boolean","window","location","hostname","match","CryptoWalletConnectionStore","action","cryptoWalletConnectionService","addressCheckingInterval","undefined","reactionToWalletConnection","this","hasEthereumProvider","hasEventsSupport","reaction","isConnectedToWallet","isConnected","a","readInformationFromConnectedWallet","fireImmediately","onMainAddressChange","address","setMainAddress","readMainAddress","then","setInterval","requestConnectionPermission","permissionGranted","setWalletConnectionRequestApproved","walletConnectionRequestApproved","walletAddress","requestApproved","mainAddress","didUserApproveDappInThePast","observable","computed","ipvHexToV4","ipHex","slice","map","ipHexPart","parseInt","join","JSON_RPC_ERROR_CODES","userRejectedRequest","unauthorized","unsupportedMethod","emptyGuardianInfo","orbsAddr","ip","website","name","emptyGuardianContractInteractionTimes","registrationTime","lastUpdateTime","OrbsAccountStore","cryptoWalletIntegrationStore","guardiansService","stakingRewardsService","addressChangeReaction","setDoneLoading","reactToConnectedAddressChanged","promievent","resetTxIndicators","setTxPending","console","log","res","code","setTxCanceled","guardianRegistrationPayload","promiEvent","registerGuardian","handlePromievent","txRes","manuallyReadAccountData","setTxHadError","error","guardianUpdatePayload","updateGuardianInfo","unregisterGuardian","frequencyInHours","frequencyInSeconds","setGuardianDistributionFrequency","delegatorsCutPercentage","setDelegatorsCutPercentage","guardianDetailsPageURl","setGuardianDetailsPageUrl","currentAddress","setDefaultAccountAddress","refreshAccountListeners","readDataForAccount","failLoadingProcess","accountAddress","setFromAccount","readAndSetIsGuardian","isGuardian","readAndSetGuardianInfo","catch","e","readAndSetRewardsDistributionFrequency","readAndSetDelegatorsCut","readAndSetGuardianRewardsSettings","readAndSetDetailsPageUrl","readAndSetRewardsContractSettings","readAndSetEthereumBalance","isRegisteredGuardian","setIsGuardian","readGuardianInfo","guardianInfoResponse","guardianInfo","guardianRegistrationTimeInfo","setGuardianInfo","setGuardianContractInteractionTimes","readGuardianDistributionFrequencyInSeconds","setRewardDistributionFrequencyInHours","readDelegatorsCutPercentage","delegatorsCut","readGuardianDetailsPageUrl","detailsPageUrl","setDetailsPageURL","readContractRewardsSettings","rewardsContractSettings","setRewardsContractSettings","readGuardianRewardsSettings","guardianRewardsSettings","setGuardianRewardsSettings","readEthereumBalance","ethBalance","setEthereumBalance","cancelAllCurrentSubscriptions","setErrorLoading","doneLoading","errorLoading","txPending","txCanceled","txHadError","guardianContractInteractionTimes","rewardDistributionFrequencyInHours","guardianId","ethereumBalance","GUARDIANS_SERVICE_CONSTANTS","emptyRewardsFrequencyValue","isUsingDefaultRewardsPercent","maxDelegatorsStakingRewardsPercent","defaultDelegatorsStakingRewardsPercent","delegatorsStakingRewardsPercent","INFURA_KEY","process","REACT_APP_ETHEREUM_NETWORK","REACT_APP_INFURA_KEY","configs","urlBase","PUBLIC_BASE_PATH","v2contractsAddressesOverride","ETHEREUM_PROVIDER_WS","privacyPolicyUrl","termsOfUseUrl","PRIMARY_TEXT","baseTheme","responsiveFontSizes","createMuiTheme","palette","primary","main","secondary","text","disabled","background","default","paper","active","disabledBackground","hover","selected","divider","typography","overrides","MuiPaper","root","MuiTypography","colorPrimary","MuiLink","configure","enforceActions","services","ethereumProvider","web3","Web3","providers","WebsocketProvider","cryptoWalletIntegrationService","CryptoWalletConnectionService","GuardiansService","guardiansRegistration","StakingRewardsService","stakingRewards","buildServices","ethereum","stores","guardiansV2Service","stakingRewardsV2Service","orbsAccountStore","getStores","AppWrapper","React","memo","props","appComponent","StylesProvider","injectFirst","ThemeProvider","theme","maxSnack","useStyles","makeStyles","link","transition","color","light","dark","linkFaded","InTextLink","classes","href","shouldfade","others","className","clsx","target","rel","LegalTicker","value","onValueChange","innerHtmlForLegalAgreement","renderToString","Typography","style","textAlign","FormControlLabel","marginTop","control","Checkbox","checked","onChange","label","dangerouslySetInnerHTML","__html","boldText","fontWeight","display","BoldText","children","container","flexDirection","alignItems","padding","textsList","listStylePosition","paddingLeft","margin","DetailsList","conceptName","details","caption","detail","variant","toString","GUARDIAN_ADDRESS_DETAILS_TEXTS","NODE_ADDRESS_DETAILS_TEXTS","CountryLegalTicker","actionButton","borderColor","backgroundColor","getContrastText","actionButtonError","ActionButton","fullWidth","errorVariant","rest","Button","type","noEthereumProviderSection","borderRadius","width","maxWidth","boxSizing","NoEthereumProviderSection","walletConnectionPhase","actionFunction","isMetaMaskProvider","pressedOnInstall","useState","legalTickerValue","setLegalTickerValue","countryTickerValue","setCountryTickerValue","isConnectPhase","allTickersChecked","useMemo","shouldDisplayLegalTicker","hasExtraDetailsSection","buttonIsEnabled","isInstall","titleText","subTitleText","buttonText","marginBottom","onClick","centeredContainer","height","ContentContainer","useTheme","smallOrSmaller","useMediaQuery","breakpoints","down","Container","component","disableGutters","appBar","paddingTop","paddingBottom","title","flexGrow","Header","AppBar","position","Toolbar","page","backdrop","zIndex","drawer","Page","app","minHeight","flex","backgroundRepeat","backgroundImage","backgroundAttachment","backgroundPosition","NoEthereumProviderPage","hasPressed","useBoolean","installMetaMask","useCallback","open","setTrue","id","CssBaseline","useStores","useContext","MobXProviderContext","useCryptoWalletIntegrationStore","useOrbsAccountStore","contentFitter","ContentFitting","ErrorLoadingPage","LoadingPage","helperText","FormHelperListTexts","helperTexts","header","length","index","Fragment","wordWrap","validURL","str","RegExp","test","ETHEREUM_ADDRESS_REGEX","IP_REGEX","INFO_MESSAGE_GUARDIAN_NAME","INFO_MESSAGE_WEBSITE","INFO_MESSAGE_IP","INFO_MESSAGE_NODE_ADDRESS","form","textField","GuardiansDetailsForm","guardianInitialInfo","submitInfo","actionButtonTitle","disableSubmit","messageForSubmitButton","useForm","register","handleSubmit","errors","useStateful","ipAddress","nodeAddress","errorNodeAddress","errorIPAddress","errorWebsite","nameSetValue","setValue","websiteSetValue","ipAddressSetValue","nodeAddressSetValue","useEffect","isMobile","hasError","errorText","infoTexts","message","submit","formData","onSubmit","TextField","InputLabelProps","pointerEvents","placeholder","required","inputRef","autoFocus","validate","pattern","flexWrap","justifyItems","justifyContent","DetailsListContainer","GuardianFormDetailsList","avatar","spacing","marginLeft","marginRight","emptyInitialInfo","RegisterGuardianSection","guardianAddress","errorMessage","setErrorMessage","checkBalanceBeforeRegistration","toLowerCase","Avatar","textOverflow","overflow","useServices","Error","useCryptoWalletConnectionService","GuardianRegistrationPage","enqueueSnackbar","useSnackbar","Backdrop","CircularProgress","GuardiansDetailsUrlForm","currentGuardianDetailsUrl","updateGuardianDetailsUrl","hasGuardianDetailsUrl","detailsRequirementsLink","REWARDS_FREQUENCY_DATA_MESSAGE","errorGuardianDetailsUrl","guardianDetailsUrl","formGuardianDetailsUrl","submitUpdate","setFormGuardianDetailsUrl","startsWith","DETAILS_REQUIREMENTS_LINK","titleHighlight","titleFade","valueHighlight","valueFade","GuardianDetails","delegatorsShare","guardianCertificationUrl","highlightInfo","highlightDelegatorsShare","highlightCertificateUrl","shouldFadeOthers","delegatorsShareUsingDefaultMessage","isUsingDefaultValue","guardianCertificateUrlDataText","Paper","elevation","TitleValuePair","shouldHighlight","defaultValue","openUnregisterMenuButton","warning","closeUnregisterMenuButton","unregisterButton","UnregisterForm","submitUnregister","dialogPaper","border","boxShadow","minWidth","button","ActionConfirmationModal","onAccept","onCancel","contentText","instructionText","acceptText","cancelText","Dialog","fullScreen","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","DelegatorsShareForm","currentDelegatorsCut","updateDelegatorsCut","delegatorsCutDefaultValue","delegatorsCutMaxValue","REWARDS_FREQUENCY_MESSAGE","useNumber","Math","min","upperLimit","errorDelegatorsCut","parseFloat","setDelegCut","inputProps","step","max","InputProps","startAdornment","formWrapper","FormWrapper","tab","opacity","tabPanel","TABS_IDS","GuardianEditingPage","observer","showModal","setShowModal","onDialogAccept","setOnDialogAccept","content","instruction","dialogTexts","setDialogTexts","updateGuardianDetails","onCancelMessage","updateDelegatorsShare","delegatorsSharePercentage","toLocaleString","writeGuardianDelegatorsCutPercentage","updateGuardianDetailsPage","guardianDetailsPageUrl","writeGuardianDetailsPageURL","tabValue","setTabValue","guardianDetails","isUsingDefaultDelegatorsCutPercentage","maxValue","hasGuardianDetailsURL","showDetails","Tabs","scrollButtons","event","indicatorColor","textColor","aria-label","TabIndicatorProps","Tab","TabPanel","dir","direction","preventDuplicate","other","Box","p","AppComponent","GuardiansRegisterOrEditPage","footerContainer","bottom","bottomAppBar","top","Color","fade","paddingRight","appVersion","Footer","version","paddingInlineEnd","justifySelf","App","appContent","path","askToConnect","isMetamaskInstalled","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.34f00ae1.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { action, computed, observable, reaction } from \"mobx\";\nimport { IReactionDisposer } from \"mobx/lib/core/reaction\";\nimport { ICryptoWalletConnectionService } from \"@orbs-network/contracts-js\";\n\nexport class CryptoWalletConnectionStore {\n  @observable private walletConnectionRequestApproved: boolean = false;\n\n  @observable public hasEthereumProvider: boolean;\n  @observable public hasEventsSupport: boolean;\n\n  @observable public mainAddress: string = \"\";\n\n  private addressCheckingInterval?: NodeJS.Timeout = undefined;\n  reactionToWalletConnection: IReactionDisposer;\n\n  constructor(\n    private cryptoWalletConnectionService: ICryptoWalletConnectionService\n  ) {\n    this.hasEthereumProvider =\n      cryptoWalletConnectionService.hasEthereumProvider;\n    this.hasEventsSupport = cryptoWalletConnectionService.hasEventsSupport;\n\n    this.reactionToWalletConnection = reaction(\n      () => this.isConnectedToWallet,\n      async (isConnected) => {\n        if (isConnected) {\n          this.readInformationFromConnectedWallet();\n        }\n      },\n      {\n        fireImmediately: true,\n      }\n    );\n\n    if (this.hasEthereumProvider) {\n      // We will only detect address change if the Ethereum provider can support it\n      if (this.cryptoWalletConnectionService.hasEventsSupport) {\n        this.cryptoWalletConnectionService.onMainAddressChange((address) =>\n          this.setMainAddress(address)\n        );\n      } else {\n        // Else, we will read it one time + set an interval\n        this.cryptoWalletConnectionService\n          .readMainAddress()\n          .then((address) => this.setMainAddress(address));\n\n        this.addressCheckingInterval = setInterval(\n          () =>\n            this.cryptoWalletConnectionService\n              .readMainAddress()\n              .then((address) => this.setMainAddress(address)),\n          1000\n        );\n      }\n    }\n  }\n\n  @computed\n  public get isConnectedToWallet(): boolean {\n    return (\n      this.hasEthereumProvider &&\n      (this.cryptoWalletConnectionService.didUserApproveDappInThePast ||\n        this.walletConnectionRequestApproved)\n    );\n  }\n\n  public async askToConnect(): Promise<boolean> {\n    if (this.isConnectedToWallet) {\n      return true;\n    } else {\n      const permissionGranted = await this.cryptoWalletConnectionService.requestConnectionPermission();\n      this.setWalletConnectionRequestApproved(permissionGranted);\n\n      return this.walletConnectionRequestApproved;\n    }\n  }\n\n  private async readInformationFromConnectedWallet() {\n    const walletAddress = await this.cryptoWalletConnectionService.readMainAddress();\n\n    this.setMainAddress(walletAddress);\n  }\n\n  @action(\"setWalletConnectionRequestApproved\")\n  private setWalletConnectionRequestApproved(requestApproved: boolean) {\n    this.walletConnectionRequestApproved = requestApproved;\n  }\n\n  @action(\"setMainAddress\")\n  private setMainAddress(mainAddress: string) {\n    this.mainAddress = mainAddress;\n  }\n}\n","export const ipvHexToV4 = (ipHex: string) => {\n  const withoutPrefix = ipHex.slice(2);\n\n  const part1 = ipHex.slice(2, 4);\n  const part2 = ipHex.slice(4, 6);\n  const part3 = ipHex.slice(6, 8);\n  const part4 = ipHex.slice(8);\n  const parts = [part1, part2, part3, part4];\n\n  const toV4 = parts.map((ipHexPart) => parseInt(ipHexPart, 16)).join(\".\");\n\n  return toV4;\n};\n\nexport const ipv4ToHex = (ipv4: string) => {\n  const manualToHex = ipv4\n    .split(\".\")\n    .map((ipSection) => parseInt(ipSection).toString(16).padStart(2, \"0\"))\n    .join(\"\");\n\n  // Add the prefix\n  const ipAsHex = `0x${manualToHex}`;\n\n  return ipAsHex;\n};\n","// DEV_NOTE : Taken from typeless library 'eth-json-rpc-errors';\nexport const JSON_RPC_ERROR_CODES = {\n  rpc: {\n    invalidInput: -32000,\n    resourceNotFound: -32001,\n    resourceUnavailable: -32002,\n    transactionRejected: -32003,\n    methodNotSupported: -32004,\n    parse: -32700,\n    invalidRequest: -32600,\n    methodNotFound: -32601,\n    invalidParams: -32602,\n    internal: -32603,\n  },\n  provider: {\n    userRejectedRequest: 4001,\n    unauthorized: 4100,\n    unsupportedMethod: 4200,\n  },\n};\n","import {\n  action,\n  computed,\n  IReactionDisposer,\n  observable,\n  reaction,\n} from \"mobx\";\nimport { CryptoWalletConnectionStore } from \"./CryptoWalletConnectionStore\";\nimport { PromiEvent, TransactionReceipt } from \"web3-core\";\nimport { ipvHexToV4 } from \"../utils/utils\";\nimport { JSON_RPC_ERROR_CODES } from \"../constants/ethereumErrorCodes\";\nimport {\n  ICryptoWalletConnectionService,\n  IGuardiansService,\n  IStakingRewardsService,\n  TGuardianRewardsSettings,\n  TRewardsContractSettings,\n  GUARDIANS_SERVICE_CONSTANTS,\n  TGuardianRegistrationPayload,\n  TGuardianUpdatePayload,\n} from \"@orbs-network/contracts-js\";\n\nexport type TGuardianInfo = {\n  ip: string;\n  orbsAddr: string;\n  name: string;\n  website: string;\n  // contact: string;\n};\n\nexport type TGuardianContractInteractionTimes = {\n  /**\n   * Unix timestamp\n   */\n  registrationTime: number;\n  /**\n   * Unix timestamp\n   */\n  lastUpdateTime: number;\n};\n\nconst emptyGuardianInfo: TGuardianInfo = {\n  orbsAddr: \"\",\n  // contact: \"\",\n  ip: \"\",\n  website: \"\",\n  name: \"\",\n};\n\nconst emptyGuardianContractInteractionTimes: TGuardianContractInteractionTimes = {\n  registrationTime: 0,\n  lastUpdateTime: 0,\n};\n\nconst ONE_HOUR_IN_SECONDS = 60 * 60;\n\nfunction sleep(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport class OrbsAccountStore {\n  @observable public doneLoading = false;\n  @observable public errorLoading = false;\n  @observable public txPending = false;\n  @observable public txHadError = false;\n  @observable public txCanceled = false;\n  @observable public isGuardian = false;\n  @observable public guardianInfo: TGuardianInfo = emptyGuardianInfo;\n  @observable\n  public guardianContractInteractionTimes: TGuardianContractInteractionTimes = emptyGuardianContractInteractionTimes;\n  @observable\n  public rewardDistributionFrequencyInHours: number =\n    GUARDIANS_SERVICE_CONSTANTS.emptyRewardsFrequencyValue;\n\n  @observable\n  public rewardsContractSettings: TRewardsContractSettings = {\n    maxDelegatorsStakingRewardsPercent: 0,\n    defaultDelegatorsStakingRewardsPercent: 0,\n  };\n\n  @observable\n  public guardianRewardsSettings: TGuardianRewardsSettings = {\n    isUsingDefaultRewardsPercent: true,\n    delegatorsStakingRewardsPercent: 0,\n  };\n\n  @observable\n  public delegatorsCutPercentage?: number;\n  @observable\n  public detailsPageUrl?: string;\n  @observable\n  public guardianId?: string;\n\n  @observable public ethBalance = 0;\n\n  private addressChangeReaction: IReactionDisposer;\n\n  constructor(\n    private cryptoWalletIntegrationStore: CryptoWalletConnectionStore,\n    private guardiansService: IGuardiansService,\n    private stakingRewardsService: IStakingRewardsService,\n    private cryptoWalletConnectionService: ICryptoWalletConnectionService\n  ) {\n    this.addressChangeReaction = reaction(\n      () => this.cryptoWalletIntegrationStore.mainAddress,\n      async (address) => {\n        this.setDoneLoading(false);\n        await this.reactToConnectedAddressChanged(address);\n        this.setDoneLoading(true);\n      },\n      {\n        fireImmediately: true,\n      }\n    );\n  }\n\n  // **** Computed values ****\n  @computed public get isUsingDefaultRewardFrequency(): boolean {\n    return (\n      this.rewardDistributionFrequencyInHours ===\n      GUARDIANS_SERVICE_CONSTANTS.emptyRewardsFrequencyValue\n    );\n  }\n\n  @computed public get isUsingDefaultDelegatorsCutPercentage(): boolean {\n    return this.guardianRewardsSettings.isUsingDefaultRewardsPercent;\n  }\n\n  @computed public get hasGuardianDetailsURL(): boolean {\n    return !!this.detailsPageUrl;\n  }\n\n  @computed public get hasGuardianId(): boolean {\n    return this.guardianId !== undefined;\n  }\n\n  // **** Contract interactions ****\n  private async handlePromievent(\n    promievent: PromiEvent<TransactionReceipt>,\n    name = \"A promivent\"\n  ): Promise<TransactionReceipt | undefined> {\n    this.resetTxIndicators();\n\n    // Indicate tx is pending\n    this.setTxPending(true);\n    console.log(`Waiting for promievent of ${name}`);\n\n    try {\n      const res = await promievent;\n      console.log(`Got Results for promievent of ${name}`);\n      return res;\n    } catch (e) {\n      if (\n        (e as any).code === JSON_RPC_ERROR_CODES.provider.userRejectedRequest\n      ) {\n        this.setTxCanceled(true);\n      } else {\n        throw e;\n      }\n    } finally {\n      this.setTxPending(false);\n    }\n  }\n\n  public async registerGuardian(\n    guardianRegistrationPayload: TGuardianRegistrationPayload\n  ) {\n    try {\n      const promiEvent = this.guardiansService.registerGuardian(\n        guardianRegistrationPayload\n      );\n\n      const txRes = await this.handlePromievent(\n        promiEvent,\n        \"Register guardian\"\n      );\n\n      // After registering, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      this.setTxHadError(true);\n      // TODO : Handle the error\n      console.error(`Failed registering guardian ${e}`);\n      throw e;\n    }\n  }\n\n  public async updateGuardianInfo(\n    guardianUpdatePayload: TGuardianUpdatePayload\n  ) {\n    try {\n      const promiEvent = this.guardiansService.updateGuardianInfo(\n        guardianUpdatePayload\n      );\n\n      const txRes = await this.handlePromievent(promiEvent, \"Update guardian\");\n\n      // After registering, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      this.setTxHadError(true);\n      // TODO : Handle the error\n      console.error(`Failed updating guardian info ${e}`);\n      throw e;\n    }\n  }\n\n  public async unregisterGuardian() {\n    try {\n      const promiEvent = this.guardiansService.unregisterGuardian();\n\n      const txRes = await this.handlePromievent(\n        promiEvent,\n        \"Unregister guardian\"\n      );\n\n      // After registering, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      this.setTxHadError(true);\n      // TODO : Handle the error\n      console.error(`Failed unregistering guardian ${e}`);\n      throw e;\n    }\n  }\n\n  public async setGuardianDistributionFrequency(frequencyInHours: number) {\n    const frequencyInSeconds = frequencyInHours * ONE_HOUR_IN_SECONDS;\n\n    const promiEvent = this.guardiansService.setGuardianDistributionFrequency(\n      frequencyInSeconds\n    );\n\n    try {\n      const txRes = await this.handlePromievent(\n        promiEvent,\n        \"Set distribution frequency\"\n      );\n\n      // After updating, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      // TODO : Handle the error\n      console.error(`Failed setting distribution frequency ${e}`);\n      throw e;\n    }\n  }\n\n  public async writeGuardianDelegatorsCutPercentage(\n    delegatorsCutPercentage: number\n  ) {\n    console.log(`Writing :`, delegatorsCutPercentage);\n\n    const promiEvent = this.stakingRewardsService.setDelegatorsCutPercentage(\n      delegatorsCutPercentage\n    );\n\n    try {\n      const txRes = await this.handlePromievent(\n        promiEvent,\n        \"Set delegators cut percentage\"\n      );\n\n      // After updating, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      // TODO : Handle the error\n      console.error(`Failed setting delegators cut percentage ${e}`);\n      throw e;\n    }\n  }\n\n  public async writeGuardianDetailsPageURL(guardianDetailsPageURl: string) {\n    console.log(`Writing :`, guardianDetailsPageURl);\n\n    const promiEvent = this.guardiansService.setGuardianDetailsPageUrl(\n      guardianDetailsPageURl\n    );\n\n    try {\n      const txRes = await this.handlePromievent(\n        promiEvent,\n        \"Set Details page URL\"\n      );\n\n      // After updating, lets re-read the data\n      await this.manuallyReadAccountData();\n\n      return txRes;\n    } catch (e) {\n      // TODO : Handle the error\n      console.error(`Failed setting Details page URL ${e}`);\n      throw e;\n    }\n  }\n\n  // **** Current address changed ****\n\n  private async reactToConnectedAddressChanged(currentAddress: string) {\n    if (currentAddress) {\n      this.setDefaultAccountAddress(currentAddress);\n\n      if (this.cryptoWalletIntegrationStore.hasEventsSupport) {\n        this.refreshAccountListeners(currentAddress);\n      }\n\n      try {\n        await this.readDataForAccount(currentAddress);\n      } catch (e) {\n        this.failLoadingProcess(e);\n        console.error(\n          \"Error in reacting to address change in Orbs Account Store\",\n          e\n        );\n      }\n    }\n  }\n\n  private setDefaultAccountAddress(accountAddress: string) {\n    this.guardiansService.setFromAccount(accountAddress);\n    this.stakingRewardsService.setFromAccount(accountAddress);\n    // this.stakingService.setFromAccount(accountAddress);\n    // this.orbsTokenService.setFromAccount(accountAddress);\n  }\n\n  // **** Data reading and setting ****\n\n  public async manuallyReadAccountData() {\n    try {\n      await this.readDataForAccount(\n        this.cryptoWalletIntegrationStore.mainAddress\n      );\n    } catch (e) {\n      this.failLoadingProcess(e);\n      console.error(\n        \"Error in manually reading address data in Orbs Account Store\",\n        e\n      );\n    }\n  }\n\n  private async readDataForAccount(accountAddress: string) {\n    // DEV_NOTE: We wait to check if this account is a Guardian because it\n    //           Affects on whether we need to read more data or not.\n    try {\n      await this.readAndSetIsGuardian(accountAddress);\n    } catch (e) {\n      console.error(`Error read-n-set isGuardian ${e}`);\n    }\n\n    if (this.isGuardian) {\n      this.readAndSetGuardianInfo(accountAddress).catch((e) =>\n        console.error(`Error read-n-set Guardian Info ${e}`)\n      );\n\n      this.readAndSetRewardsDistributionFrequency(accountAddress).catch((e) =>\n        console.error(`Error read-n-set Rewards Frequency ${e}`)\n      );\n\n      this.readAndSetDelegatorsCut(accountAddress).catch((e) =>\n        console.error(`Error read-n-set delegators cut percentage ${e}`)\n      );\n\n      this.readAndSetGuardianRewardsSettings(accountAddress).catch((e) =>\n        console.error(`Error read-n-set Guardian rewards settings ${e}`)\n      );\n\n      this.readAndSetDetailsPageUrl(accountAddress).catch((e) =>\n        console.error(`Error read-n-set Details page URL ${e}`)\n      );\n    }\n\n    // DEV_NOTE : O.L : This piece of info is not directly related to the account\n    this.readAndSetRewardsContractSettings().catch((e) =>\n      console.error(`Error read-n-set Ethereum balance ${e}`)\n    );\n\n    this.readAndSetEthereumBalance(accountAddress).catch((e) =>\n      console.error(`Error read-n-set Ethereum balance ${e}`)\n    );\n  }\n\n  private async readAndSetIsGuardian(accountAddress: string) {\n    const isGuardian = await this.guardiansService.isRegisteredGuardian(\n      accountAddress\n    );\n    this.setIsGuardian(isGuardian);\n  }\n\n  private async readAndSetGuardianInfo(accountAddress: string) {\n    this.guardiansService\n      .readGuardianInfo(accountAddress)\n      .then((guardianInfoResponse) => {\n        const {\n          name,\n          website,\n          orbsAddr,\n          ip,\n          // contact,\n          registrationTime,\n          lastUpdateTime,\n        } = guardianInfoResponse;\n\n        // DEV_NOTE : We update two different observables, one for the actual data, and the other for\n        //            the creation and editing time.\n        const guardianInfo: TGuardianInfo = {\n          name,\n          website,\n          ip: ipvHexToV4(ip),\n          // contact,\n          orbsAddr,\n        };\n\n        const guardianRegistrationTimeInfo: TGuardianContractInteractionTimes = {\n          registrationTime,\n          lastUpdateTime,\n        };\n\n        this.setGuardianInfo(guardianInfo);\n        this.setGuardianContractInteractionTimes(guardianRegistrationTimeInfo);\n      });\n  }\n\n  private async readAndSetRewardsDistributionFrequency(accountAddress: string) {\n    const frequencyInSeconds = await this.guardiansService.readGuardianDistributionFrequencyInSeconds(\n      accountAddress\n    );\n\n    const frequencyInHours = frequencyInSeconds / ONE_HOUR_IN_SECONDS;\n\n    this.setRewardDistributionFrequencyInHours(frequencyInHours);\n  }\n\n  private async readAndSetDelegatorsCut(accountAddress: string) {\n    const delegatorsCut = await this.stakingRewardsService.readDelegatorsCutPercentage(\n      accountAddress\n    );\n\n    console.log(\"Setting delegtors cut\", delegatorsCut);\n    this.setDelegatorsCutPercentage(delegatorsCut);\n  }\n\n  private async readAndSetDetailsPageUrl(accountAddress: string) {\n    const detailsPageUrl = await this.guardiansService.readGuardianDetailsPageUrl(\n      accountAddress\n    );\n\n    this.setDetailsPageURL(detailsPageUrl || undefined);\n  }\n\n  private async readAndSetRewardsContractSettings() {\n    const rewardsContractSettings = await this.stakingRewardsService.readContractRewardsSettings();\n\n    this.setRewardsContractSettings(rewardsContractSettings);\n  }\n\n  private async readAndSetGuardianRewardsSettings(accountAddress: string) {\n    const guardianRewardsSettings = await this.stakingRewardsService.readGuardianRewardsSettings(\n      accountAddress\n    );\n\n    this.setGuardianRewardsSettings(guardianRewardsSettings);\n  }\n\n  private async readAndSetEthereumBalance(accountAddress: string) {\n    const ethBalance = await this.cryptoWalletConnectionService.readEthereumBalance(\n      accountAddress\n    );\n\n    this.setEthereumBalance(ethBalance);\n  }\n\n  // ****  Subscriptions ****\n\n  private async refreshAccountListeners(accountAddress: string) {\n    this.cancelAllCurrentSubscriptions();\n  }\n\n  private cancelAllCurrentSubscriptions() {}\n\n  // ****  Complex setters ****\n  private failLoadingProcess(error: Error) {\n    this.setErrorLoading(true);\n    this.setDoneLoading(true);\n  }\n\n  private resetTxIndicators() {\n    this.setTxPending(false);\n    this.setTxHadError(false);\n    this.setTxCanceled(false);\n  }\n\n  // ****  Observables setter actions ****\n  @action(\"setDoneLoading\")\n  private setDoneLoading(doneLoading: boolean) {\n    this.doneLoading = doneLoading;\n  }\n\n  @action(\"setErrorLoading\")\n  private setErrorLoading(errorLoading: boolean) {\n    this.errorLoading = errorLoading;\n  }\n\n  @action(\"setTxPending\")\n  private setTxPending(txPending: boolean) {\n    this.txPending = txPending;\n  }\n\n  @action(\"setTxCanceled\")\n  private setTxCanceled(txCanceled: boolean) {\n    this.txCanceled = txCanceled;\n  }\n\n  @action(\"setTxHadError\")\n  private setTxHadError(txHadError: boolean) {\n    this.txHadError = txHadError;\n  }\n\n  @action(\"setIsGuardian\")\n  private setIsGuardian(isGuardian: boolean) {\n    this.isGuardian = isGuardian;\n  }\n\n  @action(\"setGuardianInfo\")\n  private setGuardianInfo(guardianInfo: TGuardianInfo) {\n    this.guardianInfo = guardianInfo;\n  }\n\n  @action(\"setGuardianRegistrationTimes\")\n  private setGuardianContractInteractionTimes(\n    guardianContractInteractionTimes: TGuardianContractInteractionTimes\n  ) {\n    this.guardianContractInteractionTimes = guardianContractInteractionTimes;\n  }\n\n  @action(\"setRewardDistributionFrequencyInHours\")\n  private setRewardDistributionFrequencyInHours(\n    rewardDistributionFrequencyInHours: number\n  ) {\n    this.rewardDistributionFrequencyInHours = rewardDistributionFrequencyInHours;\n  }\n\n  @action(\"setRewardsContractSettings\")\n  private setRewardsContractSettings(\n    rewardsContractSettings: TRewardsContractSettings\n  ) {\n    this.rewardsContractSettings = rewardsContractSettings;\n  }\n\n  @action(\"setGuardianRewardsSettings\")\n  private setGuardianRewardsSettings(\n    guardianRewardsSettings: TGuardianRewardsSettings\n  ) {\n    this.guardianRewardsSettings = guardianRewardsSettings;\n  }\n\n  @action(\"setDelegatorsCutPercentage\")\n  private setDelegatorsCutPercentage(delegatorsCutPercentage: number) {\n    this.delegatorsCutPercentage = delegatorsCutPercentage;\n  }\n\n  @action(\"setDetailsPageURL\")\n  private setDetailsPageURL(detailsPageUrl?: string) {\n    this.detailsPageUrl = detailsPageUrl;\n  }\n\n  @action(\"setGuardianId\")\n  private setGuardianId(guardianId?: string) {\n    this.guardianId = guardianId;\n  }\n\n  @action(\"setEthereumBalance\")\n  private setEthereumBalance(ethereumBalance: number) {\n    this.ethBalance = ethereumBalance;\n  }\n}\n","/**\n * Copyright 2019 the prism authors\n * This file is part of the prism library in the Orbs project.\n *\n * This source code is licensed under the MIT license found in the LICENSE file in the root directory of this source tree.\n * The above notice should be included in all copies or substantial portions of the software.\n */\n\ntype TSupportedNets = \"local\" | \"ropsten\" | \"mainnet\";\n// @ts-ignore\nconst ethereumNetwork: TSupportedNets = process.env.REACT_APP_ETHEREUM_NETWORK;\n\nconst INFURA_KEY = process.env.REACT_APP_INFURA_KEY;\nexport const IS_DEV = process.env.NODE_ENV !== \"production\";\nconst SHOULD_OVERRIDE_ADDRESS = IS_DEV || ethereumNetwork === \"ropsten\";\n\n////////////// CONFIG VARIABLES ///////////////\ninterface IConfig {\n  urlBase: string;\n  v2contractsAddressesOverride: Partial<{\n    guardiansRegistration: string;\n    stakingRewards: string;\n  }>;\n  ETHEREUM_PROVIDER_WS: string;\n\n  termsOfUseUrl: string;\n  privacyPolicyUrl: string;\n}\n\nconst configs: IConfig = {\n  urlBase: process.env.PUBLIC_BASE_PATH || \"\",\n  v2contractsAddressesOverride: {},\n  ETHEREUM_PROVIDER_WS: `wss://mainnet.infura.io/ws/v3/${INFURA_KEY}`,\n\n  privacyPolicyUrl: \"https://www.orbs.com/guardian-portal-privacy-policy/\",\n  termsOfUseUrl: \"https://www.orbs.com/guardian-portal-terms-of-use/\",\n};\n\n// Webpack will remove this section on production build //\nif (process.env.NODE_ENV !== \"production\") {\n  // if (ethereumNetwork === \"local\") {\n    const addresses = require(\"./local/addresses.json\");\n\n    configs.v2contractsAddressesOverride.guardiansRegistration =\n      addresses.guardiansRegistration;\n    configs.v2contractsAddressesOverride.stakingRewards =\n      addresses.stakingRewards;\n  // }\n}\n\nexport default configs;\n","import { blue } from \"@material-ui/core/colors\";\nimport responsiveFontSizes from \"@material-ui/core/styles/responsiveFontSizes\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\n\nconst COLOR1 = \"#0D0D0D\"; // dark gray\nconst COLOR2 = \"#6ec6d8\"; // bluish\nconst COLOR3 = \"#03FCF5\"; // bright bluish- Tetra\n\n// const PRIMARY_TEXT = '#dbdbdb';\nconst PRIMARY_TEXT = \"#dbdbdb\";\nconst SECONDARY_TEXT = \"#d0d0d0\";\n// const SECONDARY_TEXT = \"#7B7B7B\";\n\n// DEV_NOTE : Most palette colors taken from https://material-ui.com/customization/palette/#dark-mode\n\nexport const HEADER_HEIGHT_REM = 5;\n\nexport const baseTheme = responsiveFontSizes(\n  createMuiTheme({\n    palette: {\n      // TODO : Adjust all styles after structure is done\n      // type: \"dark\",\n      primary: { main: \"#09142c\" },\n      secondary: {\n        main: \"#74f6fd\",\n      },\n      text: {\n        primary: PRIMARY_TEXT,\n        secondary: \"rgba(255, 255, 255, 0.7)\",\n        disabled: \"rgba(255, 255, 255, 0.5)\",\n        // secondary: SECONDARY_TEXT,\n      },\n      background: {\n        // DEV_NOTE : This sets the app background color\n        default: \"#16317d\",\n        // paper: \"rgba(0, 31, 107, 0.6)\",\n        paper: \"#09142c\",\n      },\n      action: {\n        active: PRIMARY_TEXT,\n        disabled: \"rgba(255, 255, 255, 0.3)\",\n        disabledBackground: \"rgba(255, 255, 255, 0.12)\",\n        hover: \"rgba(255, 255, 255, 0.08)\",\n        selected: \"rgba(255, 255, 255, 0.16)\",\n      },\n      divider: \"rgba(255, 255, 255, 0.12)\",\n    },\n    typography: {\n      // fontFamily: 'Montserrat',\n    },\n    overrides: {\n      MuiPaper: {\n        root: {\n          // backgroundColor: COLOR1,\n        },\n      },\n      MuiTypography: {\n        colorPrimary: {\n          // color: PRIMARY_TEXT,\n        },\n      },\n      MuiLink: {\n        root: {\n          // color: blue[500],\n        },\n      },\n    },\n  })\n);\n\nexport const AppStyles = {};\n","import { configure } from \"mobx\";\nimport { IStores } from \"./stores\";\n\nimport { CryptoWalletConnectionStore } from \"./CryptoWalletConnectionStore\";\nimport { OrbsAccountStore } from \"./OrbsAccountStore\";\n\n// This import ensures mobx batching\nimport \"mobx-react-lite/batchingForReactDom\";\nimport {\n  ICryptoWalletConnectionService,\n  IGuardiansService,\n  IStakingRewardsService,\n} from \"@orbs-network/contracts-js\";\n\n/**\n * Configures the mobx library. Should get called at App's initialization.\n */\nexport function configureMobx() {\n  configure({\n    enforceActions: \"observed\",\n  });\n}\n\n/**\n * Builds and initializes all of the stores\n */\nexport function getStores(\n  cryptoWalletConnectionService: ICryptoWalletConnectionService,\n  guardiansV2Service: IGuardiansService,\n  stakingRewardsV2Service: IStakingRewardsService\n): IStores {\n  // Create stores instances + Hydrate the stores\n  const cryptoWalletIntegrationStore = new CryptoWalletConnectionStore(\n    cryptoWalletConnectionService\n  );\n  const orbsAccountStore = new OrbsAccountStore(\n    cryptoWalletIntegrationStore,\n    guardiansV2Service,\n    stakingRewardsV2Service,\n    cryptoWalletConnectionService\n  );\n\n  const stores: IStores = {\n    cryptoWalletIntegrationStore,\n    orbsAccountStore,\n  };\n\n  return stores;\n}\n","import React from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"mobx-react\";\nimport { configureMobx, getStores } from \"./store/storesInitialization\";\nimport { buildServices } from \"./services/Services\";\nimport { StylesProvider, ThemeProvider } from \"@material-ui/core/styles\";\nimport { AppStyles, baseTheme } from \"./theme/Theme\";\nimport { SnackbarProvider } from \"notistack\";\n\ninterface IProps {\n  appComponent: React.ReactNode;\n}\n\nconfigureMobx();\n\nconst ethereumProvider = (window as any).ethereum;\nconst services = buildServices(ethereumProvider);\nconst stores = getStores(\n  services.cryptoWalletIntegrationService,\n  services.guardiansService,\n  services.stakingRewardsService\n);\n\nexport const AppWrapper = React.memo<IProps>((props) => {\n  console.log(\"Wrapper render\");\n  const { appComponent } = props;\n  return (\n    <Router>\n      <Provider {...stores} {...services}>\n        <StylesProvider injectFirst>\n          <ThemeProvider theme={baseTheme}>\n            <SnackbarProvider maxSnack={3}>{appComponent}</SnackbarProvider>\n          </ThemeProvider>\n        </StylesProvider>\n      </Provider>\n    </Router>\n  );\n});\n","import Web3 from \"web3\";\nimport configs from \"../configs\";\nimport {\n  ICryptoWalletConnectionService,\n  CryptoWalletConnectionService,\n  IEthereumProvider,\n  IGuardiansService,\n  GuardiansService,\n  IStakingRewardsService,\n  StakingRewardsService,\n} from \"@orbs-network/contracts-js\";\n\nexport interface IServices {\n  cryptoWalletIntegrationService: ICryptoWalletConnectionService;\n  guardiansService: IGuardiansService;\n  stakingRewardsService: IStakingRewardsService;\n}\n\n// DEV_NOTE : For simplicity of early stage dev, we assume that we have ethereum provider, if not, we will not initialize the services.\nexport function buildServices(ethereumProvider: IEthereumProvider): IServices {\n  let web3: Web3;\n\n  if (ethereumProvider) {\n    web3 = new Web3(ethereumProvider as any);\n  } else {\n    web3 = new Web3(\n      new Web3.providers.WebsocketProvider(configs.ETHEREUM_PROVIDER_WS)\n    );\n  }\n\n  return {\n    cryptoWalletIntegrationService: new CryptoWalletConnectionService(\n      ethereumProvider\n    ),\n    guardiansService: new GuardiansService(\n      web3,\n      configs?.v2contractsAddressesOverride?.guardiansRegistration\n    ),\n    stakingRewardsService: new StakingRewardsService(\n      web3,\n      configs?.v2contractsAddressesOverride?.stakingRewards\n    ),\n  };\n}\n","import React, { DetailedHTMLProps } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\n\ninterface IProps {\n  text: string;\n  href?: string;\n  shouldfade?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  link: {\n    transition: \"0.5s\",\n    color: theme.palette.secondary.light,\n    \"&:hover\": {\n      color: theme.palette.secondary.dark,\n    },\n  },\n  linkFaded: {\n    color: theme.palette.text.disabled,\n  },\n}));\n\nexport const InTextLink = React.memo<\n  IProps &\n    DetailedHTMLProps<\n      React.AnchorHTMLAttributes<HTMLAnchorElement>,\n      HTMLAnchorElement\n    >\n>((props) => {\n  const classes = useStyles();\n  const { text, href, shouldfade, ...others } = props;\n  return (\n    <a\n      className={clsx(classes.link, shouldfade ? classes.linkFaded : null)}\n      href={href || \"\"}\n      target={\"_blank\"}\n      rel={\"noopener noreferrer\"}\n      // style={{ display: \"inline\" }}\n      {...others}\n    >\n      {text}\n    </a>\n  );\n});\n","import React from \"react\";\nimport { Checkbox, FormControlLabel, Typography } from \"@material-ui/core\";\nimport { renderToString } from \"react-dom/server\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { baseTheme } from \"../../theme/Theme\";\nimport { InTextLink } from \"../InTextLink\";\nimport configs from \"../../configs\";\n\ninterface IProps {\n  value: boolean;\n  onValueChange: (value: boolean) => void;\n}\n\nexport const LegalTicker = React.memo<IProps>((props) => {\n  const { value, onValueChange } = props;\n\n  // DEV_NOTE : IMPORTANT: O.L : While 'rendering to string' we will lose the them if not applying it directly inside the rendered component.\n  const innerHtmlForLegalAgreement = renderToString(\n    <ThemeProvider theme={baseTheme}>\n      <Typography style={{ textAlign: \"start\" }}>\n        I agree to the{\" \"}\n        <InTextLink href={configs.termsOfUseUrl} text={\"Terms of Use\"} /> and{\" \"}\n        <InTextLink href={configs.privacyPolicyUrl} text={\"Privacy Policy\"} />\n      </Typography>\n    </ThemeProvider>\n  );\n\n  return (\n    <FormControlLabel\n      style={{\n        marginTop: \"0.5rem\",\n      }}\n      control={\n        <Checkbox\n          checked={value}\n          onChange={(e) => onValueChange(e.target.checked)}\n          name={\"legalTicker\"}\n        />\n      }\n      label={\n        <Typography\n          // onClick={(e) => e.preventDefault()}\n          dangerouslySetInnerHTML={{ __html: innerHtmlForLegalAgreement }}\n        />\n      }\n    />\n  );\n});\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  boldText: {\n    fontWeight: \"bold\",\n    display: \"contents\",\n    color: theme.palette.secondary.main,\n  },\n}));\n\nexport const BoldText = React.memo<IProps>((props) => {\n  const { children } = props;\n  const classes = useStyles();\n  return <div className={classes.boldText}>{children}</div>;\n});\n","import React, { DetailedHTMLProps } from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport { BoldText } from \"../texts/boldText\";\n\ninterface IProps {\n  conceptName: string;\n  details: React.ReactNode[];\n  caption?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\",\n    textAlign: \"start\",\n    padding: \"0.5em\",\n  },\n  textsList: {\n    listStylePosition: \"outside\",\n    paddingLeft: \"1.5rem\",\n\n    \"& li\": {\n      margin: \"0 0 0.2rem 0\",\n    },\n    \"& li:last-child\": {\n      margin: 0,\n    },\n  },\n}));\n\nexport const DetailsList = React.memo<\n  IProps &\n    DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>\n>((props) => {\n  const classes = useStyles();\n  const { conceptName, details, caption, ...others } = props;\n\n  return (\n    <div className={classes.container} {...others}>\n      <Typography>\n        Your <BoldText>{conceptName}:</BoldText>\n      </Typography>\n      <ul className={classes.textsList}>\n        {details.map((detail) => (\n          <li key={detail!.toString()}>\n            <Typography variant={caption ? \"caption\" : \"body2\"}>\n              {detail}\n            </Typography>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n});\n","// DEV_NOTE : We will use this constants file until moving to i18n.\n\nimport { BoldText } from \"../components/texts/boldText\";\nimport React from \"react\";\n\nexport const GUARDIAN_ADDRESS_DETAILS_TEXTS = [\n  \"Represents the Guardian in the Guardians list\",\n  \"Used by Delegators to delegate to the Guardian\",\n  \"Holds the Guardian's self-delegated stake\",\n  \"Receives the Guardians rewards\",\n];\n\nexport const NODE_ADDRESS_DETAILS_TEXTS = [\n  <>\n    Should be different from the <BoldText>Guardian address</BoldText>\n  </>,\n  \"Used by the node to sign blocks on Orbs blockchain\",\n  \"Holds ETH for node automated transactions gas\",\n  \"A minimal balance of 1 ETH is required upon registration\",\n  \"Does NOT hold your Guardian ORBS tokens\",\n];\n","import React from \"react\";\nimport { Checkbox, FormControlLabel, Typography } from \"@material-ui/core\";\nimport { renderToString } from \"react-dom/server\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { baseTheme } from \"../../theme/Theme\";\nimport { InTextLink } from \"../InTextLink\";\nimport configs from \"../../configs\";\nimport { DetailsList } from \"../detailsList/Detailslist\";\nimport { GUARDIAN_ADDRESS_DETAILS_TEXTS } from \"../../constants/explainingTexts\";\n\ninterface IProps {\n  value: boolean;\n  onValueChange: (value: boolean) => void;\n}\n\nexport const CountryLegalTicker = React.memo<IProps>((props) => {\n  const { value, onValueChange } = props;\n\n  // DEV_NOTE : IMPORTANT: O.L : While 'rendering to string' we will lose the them if not applying it directly inside the rendered component.\n  const innerHtmlForLegalAgreement = renderToString(\n    <ThemeProvider theme={baseTheme}>\n      <Typography>\n        I confirm that I am not a citizen, resident of or otherwise located in\n        any of the following:\n      </Typography>\n    </ThemeProvider>\n  );\n\n  return (\n    <>\n      <FormControlLabel\n        style={{\n          marginTop: \"0.5rem\",\n        }}\n        control={\n          <Checkbox\n            checked={value}\n            onChange={(e) => onValueChange(e.target.checked)}\n            name={\"legalTicker\"}\n          />\n        }\n        label={\n          <Typography\n            style={{ textAlign: \"start\" }}\n            // onClick={(e) => e.preventDefault()}\n            dangerouslySetInnerHTML={{ __html: innerHtmlForLegalAgreement }}\n          />\n        }\n      />\n      <ul>\n        <li>\n          <Typography style={{ textAlign: \"start\" }}>\n            The State of Israel.\n          </Typography>\n        </li>\n        <li>\n          <Typography style={{ textAlign: \"start\" }}>\n            Any country or region subject to comprehensive sanctions, including,\n            but not limited to, the Crimean region of Ukraine, Cuba, Iran,\n            Lebanon, North Korea, Sudan and Syria.\n          </Typography>\n        </li>\n      </ul>\n    </>\n  );\n});\n","import React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport { Button, ButtonProps } from \"@material-ui/core\";\nimport clsx from \"clsx\";\n\ninterface IProps {\n  errorVariant?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    color: theme.palette.secondary.light,\n    borderColor: theme.palette.secondary.main,\n    transition: \"background-color 0.4s linear, color 0.2s linear\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.secondary.light,\n      color: theme.palette.getContrastText(theme.palette.secondary.light),\n      borderColor: theme.palette.getContrastText(theme.palette.secondary.light),\n    },\n  },\n  actionButtonError: {\n    color: theme.palette.error.light,\n    borderColor: theme.palette.error.main,\n    transition: \"background-color 0.4s linear, color 0.2s linear\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.error.light,\n      color: theme.palette.getContrastText(theme.palette.error.light),\n      borderColor: theme.palette.getContrastText(theme.palette.error.light),\n    },\n  },\n}));\n\nexport const ActionButton = React.memo<IProps & ButtonProps>((props) => {\n  const { children, fullWidth, errorVariant, ...rest } = props;\n  const classes = useStyles();\n\n  return (\n    <Button\n      className={\n        errorVariant ? classes.actionButtonError : classes.actionButton\n      }\n      variant={\"outlined\"}\n      fullWidth={fullWidth === undefined ? true : fullWidth}\n      type={\"submit\"}\n      {...rest}\n    >\n      {children}\n    </Button>\n  );\n});\n","import React, { useMemo, useState } from \"react\";\nimport {\n  Button,\n  FormControl,\n  FormControlLabel,\n  Typography,\n  useTheme,\n  Checkbox,\n  MuiThemeProvider,\n} from \"@material-ui/core\";\nimport {\n  makeStyles,\n  StylesProvider,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { useBoolean } from \"react-hanger\";\nimport { renderToString } from \"react-dom/server\";\nimport { InTextLink } from \"../InTextLink\";\nimport configs from \"../../configs\";\nimport { baseTheme } from \"../../theme/Theme\";\nimport { LegalTicker } from \"./LegalTicker\";\nimport { InstallPhaseExtraDetails } from \"./InstallPhaseExtraDetails\";\nimport { DetailsList } from \"../detailsList/Detailslist\";\nimport { GUARDIAN_ADDRESS_DETAILS_TEXTS } from \"../../constants/explainingTexts\";\nimport { BoldText } from \"../texts/boldText\";\nimport { CountryLegalTicker } from \"./CountryLegalTicker\";\nimport { ActionButton } from \"../shared/ActionButton/ActionButton\";\n\ntype TWalletConnectionPhase = \"install\" | \"connect\";\n\ninterface IProps {\n  walletConnectionPhase: TWalletConnectionPhase;\n  actionFunction: () => void;\n  pressedOnInstall?: boolean;\n  isMetaMaskProvider?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  noEthereumProviderSection: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    textAlign: \"center\",\n    // justifyContent: \"space-between\",\n    padding: \"2em\",\n    backgroundColor: \"rgba(0,0,0, 0.2)\",\n    borderRadius: \"5%\",\n    // width: \"clamp(20%, 40em, 100%)\",\n    width: \"fit-content\",\n    maxWidth: \"90%\",\n    boxSizing: \"border-box\",\n    // height: \"clamp(max(25%, 200px), 8em, 50%)\",\n  },\n}));\n\nexport const NoEthereumProviderSection = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    walletConnectionPhase,\n    actionFunction,\n    pressedOnInstall,\n    isMetaMaskProvider,\n  } = props;\n\n  const [legalTickerValue, setLegalTickerValue] = useState(false);\n  const [countryTickerValue, setCountryTickerValue] = useState(false);\n\n  const isConnectPhase = walletConnectionPhase === \"connect\";\n\n  const allTickersChecked = legalTickerValue && countryTickerValue;\n\n  // Display flags\n  const {\n    shouldDisplayLegalTicker,\n    isInstall,\n    buttonIsEnabled,\n    hasExtraDetailsSection,\n  } = useMemo(() => {\n    const shouldDisplayLegalTicker = isConnectPhase;\n\n    return {\n      shouldDisplayLegalTicker,\n      hasExtraDetailsSection: isConnectPhase,\n      buttonIsEnabled: !shouldDisplayLegalTicker || allTickersChecked,\n      isInstall: walletConnectionPhase === \"install\",\n    };\n  }, [isConnectPhase, allTickersChecked, walletConnectionPhase]);\n\n  // Display texts\n  const { titleText, buttonText, subTitleText } = useMemo(() => {\n    const ethereumProviderName = isMetaMaskProvider ? \"MetaMask\" : \"Account\";\n\n    return {\n      titleText: isInstall\n        ? \"No Ethereum provider detected\"\n        : `${ethereumProviderName} connection required`,\n      subTitleText: isInstall ? (\n        \"you should install MetaMask and refresh the page\"\n      ) : (\n        <>\n          To begin, please connect with your{\" \"}\n          <BoldText>Guardian address.</BoldText>\n        </>\n      ),\n      buttonText: walletConnectionPhase === \"install\" ? \"Install\" : \"Connect\",\n    };\n  }, [isInstall, isMetaMaskProvider, walletConnectionPhase]);\n\n  return (\n    <div className={classes.noEthereumProviderSection}>\n      <Typography style={{ marginBottom: \"0.5rem\" }} variant={\"h4\"}>\n        {titleText}\n      </Typography>\n      <Typography style={{ marginBottom: \"1rem\" }}>{subTitleText}</Typography>\n\n      {/*{hasExtraDetailsSection && <InstallPhaseExtraDetails />}*/}\n      {hasExtraDetailsSection && (\n        <DetailsList\n          conceptName={\"Guardian Address\"}\n          details={GUARDIAN_ADDRESS_DETAILS_TEXTS}\n        />\n      )}\n\n      <ActionButton\n        fullWidth={false}\n        onClick={actionFunction}\n        disabled={!buttonIsEnabled}\n      >\n        {buttonText}\n      </ActionButton>\n\n      {/* Legal Tickers */}\n      <div\n        style={{\n          width: \"min(30rem, 100%)\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"flex-start\",\n        }}\n      >\n        {shouldDisplayLegalTicker && (\n          <LegalTicker\n            value={legalTickerValue}\n            onValueChange={setLegalTickerValue}\n          />\n        )}\n\n        {shouldDisplayLegalTicker && (\n          <CountryLegalTicker\n            value={countryTickerValue}\n            onValueChange={setCountryTickerValue}\n          />\n        )}\n      </div>\n    </div>\n  );\n});\n","import React from \"react\";\nimport { Container, ContainerProps, useMediaQuery } from \"@material-ui/core\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  centeredContainer: {\n    // marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    height: \"100%\",\n  },\n}));\n\nexport const ContentContainer = React.memo<ContainerProps>((props) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const smallOrSmaller = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  return (\n    <Container\n      className={classes.centeredContainer}\n      component={\"div\"}\n      disableGutters={smallOrSmaller}\n      {...props}\n    />\n  );\n});\n","import React from \"react\";\nimport { AppBar, Toolbar, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { HEADER_HEIGHT_REM } from \"../../theme/Theme\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    height: `${HEADER_HEIGHT_REM}rem`,\n    paddingTop: \"0.5rem\",\n    paddingBottom: \"0.5rem\",\n    boxSizing: \"border-box\",\n  },\n  title: {\n    flexGrow: 1,\n    textAlign: \"center\",\n    marginTop: \"1em\",\n    marginBottom: \"1em\",\n  },\n}));\n\nexport const Header = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  return (\n    <AppBar className={classes.appBar} position={\"fixed\"}>\n      <Toolbar>\n        <div className={classes.title}>\n          <Typography variant=\"h5\">ORBS Guardians Portal</Typography>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n});\n","import React, { DetailedHTMLProps } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Toolbar } from \"@material-ui/core\";\nimport { Footer } from \"./Footer\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  page: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    // border: \"1px solid black\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    boxSizing: \"border-box\",\n    padding: \"2em\",\n    height: \"100%\",\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n}));\n\nexport const Page = React.memo<\n  IProps &\n    DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>\n>((props) => {\n  const { children, ...rest } = props;\n  const classes = useStyles();\n\n  return (\n    <div className={classes.page} {...rest}>\n      {/* DEV_NOTE : Adding 'toolbar' to keep with the tile */}\n      <Toolbar />\n      {children}\n    </div>\n  );\n});\n","import React, { useCallback } from \"react\";\nimport { CssBaseline, useTheme } from \"@material-ui/core\";\nimport { NoEthereumProviderSection } from \"../components/ethereumConnection/NoEthereumProviderSection\";\nimport { useBoolean } from \"react-hanger\";\nimport { ContentContainer } from \"../components/structure/ContentContainer\";\nimport { Background } from \"../components/structure/Background\";\nimport { Header } from \"../components/structure/Header\";\nimport { Page } from \"../components/structure/Page\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ntype TWalletConnectionPhase = \"install\" | \"connect\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  app: {\n    minHeight: `100%`,\n    flex: 1,\n    backgroundColor: \"#06142e\",\n    backgroundRepeat: \"repeat-y\",\n    backgroundImage:\n      \"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)\",\n    backgroundAttachment: \"scroll\",\n    backgroundPosition: \"top center\",\n  },\n}));\n\nexport const NoEthereumProviderPage = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const hasPressed = useBoolean(false);\n\n  const installMetaMask = useCallback(() => {\n    window.open(\"https://metamask.io/\", \"_blank\");\n    hasPressed.setTrue();\n  }, [hasPressed]);\n\n  return (\n    <>\n      <Header />\n      <main className={classes.app}>\n        <ContentContainer id={\"appContainer\"}>\n          <Page>\n            <NoEthereumProviderSection\n              walletConnectionPhase={\"install\"}\n              actionFunction={installMetaMask}\n            />\n          </Page>\n        </ContentContainer>\n        <CssBaseline />\n      </main>\n    </>\n  );\n});\n","import React from \"react\";\nimport { MobXProviderContext } from \"mobx-react\";\nimport { IStores } from \"./stores\";\nimport { CryptoWalletConnectionStore } from \"./CryptoWalletConnectionStore\";\nimport { OrbsAccountStore } from \"./OrbsAccountStore\";\n\nexport function useStores(): IStores {\n  // @ts-ignore\n  return React.useContext(MobXProviderContext);\n}\n\nexport function useCryptoWalletIntegrationStore(): CryptoWalletConnectionStore {\n  return useStores().cryptoWalletIntegrationStore;\n}\n\nexport function useOrbsAccountStore(): OrbsAccountStore {\n  return useStores().orbsAccountStore;\n}\n","import React, { DetailedHTMLProps } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ninterface IProps {}\nconst useStyles = makeStyles((theme) => ({\n  contentFitter: {\n    height: \"100%\",\n    width: \"fit-content\",\n    maxWidth: \"100%\",\n  },\n}));\n\nexport const ContentFitting = React.memo<\n  IProps &\n    DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>\n>((props) => {\n  const classes = useStyles();\n  const { children, ...rest } = props;\n  return (\n    <div className={classes.contentFitter} {...rest}>\n      {children}\n    </div>\n  );\n});\n","import React from \"react\";\nimport { Page } from \"../../components/structure/Page\";\nimport { ContentFitting } from \"../../components/structure/ContentFitting\";\nimport { Typography } from \"@material-ui/core\";\n\ninterface IProps {}\n\nexport const ErrorLoadingPage = React.memo<IProps>((props) => {\n  return (\n    <Page>\n      <ContentFitting>\n        <Typography>Error loading</Typography>\n      </ContentFitting>\n    </Page>\n  );\n});\n","import React from \"react\";\nimport { Page } from \"../../components/structure/Page\";\nimport { ContentFitting } from \"../../components/structure/ContentFitting\";\nimport { Typography } from \"@material-ui/core\";\n\ninterface IProps {}\n\nexport const LoadingPage = React.memo<IProps>((props) => {\n  return (\n    <Page>\n      <ContentFitting>\n        <Typography>Loading...</Typography>\n      </ContentFitting>\n    </Page>\n  );\n});\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ninterface IProps {\n  header?: React.ReactNode;\n  helperTexts: React.ReactNode[];\n}\n\nconst useStyles = makeStyles((theme) => ({\n  helperText: {\n    color: theme.palette.secondary.main,\n  },\n  textsList: {\n    listStylePosition: \"outside\",\n    paddingLeft: \"1rem\",\n  },\n}));\n\nexport const FormHelperListTexts = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const { helperTexts, header } = props;\n  const lastIndex = helperTexts.length - 1;\n  // DEV_NOTE : O.L : Basically we are not supposed to put a 'ul' inside the helper text's 'p'.  It will\n  //                  just show warnings on dev.\n  // TODO : O.L : FUTURE : Fix this, maybe override the 'p' component to something else.\n  return (\n    <>\n      <ul className={classes.textsList}>\n        {helperTexts.map((helperText, index) => (\n          <React.Fragment key={`fragment_${helperText}`}>\n            <li\n              id={index.toString()}\n              key={helperText!.toString()}\n              className={classes.helperText}\n            >\n              <Typography\n                style={{ wordWrap: \"break-word\" }}\n                variant={\"caption\"}\n              >\n                {helperText}\n              </Typography>\n            </li>\n            {/*{index !== lastIndex && <br key={`br_${helperText}`} />}*/}\n          </React.Fragment>\n        ))}\n      </ul>\n    </>\n  );\n});\n","export function validURL(str: string) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n      \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|\" + // domain name\n      \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n      \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n      \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n","import React, { DetailedHTMLProps, useCallback, useEffect } from \"react\";\nimport { useStateful } from \"react-hanger\";\nimport {\n  Button,\n  TextField,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport { TGuardianInfo } from \"../../../store/OrbsAccountStore\";\nimport { useForm } from \"react-hook-form\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormHelperListTexts } from \"../../../components/forms/FormHelperListTexts\";\nimport { TGuardianRegistrationPayload } from \"@orbs-network/contracts-js\";\nimport { validURL } from \"./inoputValidators\";\nimport { ActionButton } from \"../../../components/shared/ActionButton/ActionButton\";\n\ninterface IProps {\n  actionButtonTitle: string;\n  guardianInitialInfo: TGuardianInfo;\n  submitInfo: (\n    guardianRegistrationPayload: TGuardianRegistrationPayload\n  ) => void;\n  disableSubmit?: boolean;\n  messageForSubmitButton?: string;\n}\n\nconst ETHEREUM_ADDRESS_REGEX = /^0x[a-fA-F0-9]{40}$/;\nconst IP_REGEX = /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;\n\nconst NODE_ADDRESS_MESSAGE = \"Please use a valid address\";\nconst IP_ADDRESS_MESSAGE = \"Please use a valid IPV4 address\";\nconst WEBSITE_MESSAGE = \"Please use a valid URL\";\n\nconst INFO_MESSAGE_GUARDIAN_NAME = [\n  \"The name that the Guardian will be recognized by.\",\n];\nconst INFO_MESSAGE_WEBSITE = [\n  \"The Guardian website is used by Delegators when selecting a Guardian.\",\n];\nconst INFO_MESSAGE_IP = [\n  \"A valid IPv4 address is required to allow the Guardian’s node to connect to the network gossip topology.\",\n];\nconst INFO_MESSAGE_NODE_ADDRESS = [\n  <>\n    Should be different from the{\" \"}\n    <div style={{ display: \"contents\", fontWeight: \"bold\" }}>\n      Guardian address\n    </div>\n    .\n  </>,\n  \"Used by the Orbs node to automatically send transactions such as ReadyForCommittee.\",\n  \"Used to sign blocks on Orbs platform.\",\n  \"Should hold ETH for the automated transactions gas (A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian).\",\n  \"The Orbs Node address should differ from the Guardian address.\",\n];\n\nconst PLACE_HOLDER_GUARDIAN_NAME = \"e.g: Number One ORBS Guardian\";\nconst PLACE_HOLDER_WEBSITE = \"e.g: https://www.number1guardian.com\";\nconst PLACE_HOLDER_IP = \"e.g: 123.17.46.251\";\nconst PLACE_HOLDER_NODE_ADDRESS =\n  \"e.g: 0x0cBb46287c93357be4CF60fe9601c2c7A2700dC2\";\n\ntype TFormData = {\n  name: string;\n  website: string;\n  contactInfo: string;\n  ipAddress: string;\n  nodeAddress: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    maxWidth: \"100%\",\n    // maxWidth: \"80ch\",\n    width: \"100%\",\n  },\n  textField: {\n    \"& label.Mui-focused\": {\n      color: \"#f5f5f5\",\n    },\n  },\n}));\n\n/**\n * A single component to handle both \"Guardian registration\" and \"Guardian Update\"\n */\nexport const GuardiansDetailsForm = React.memo<\n  IProps &\n    DetailedHTMLProps<\n      React.FormHTMLAttributes<HTMLFormElement>,\n      HTMLFormElement\n    >\n>((props) => {\n  const classes = useStyles();\n  const {\n    guardianInitialInfo,\n    submitInfo,\n    actionButtonTitle,\n    disableSubmit,\n    messageForSubmitButton,\n    ...rest\n  } = props;\n\n  const { register, handleSubmit, errors } = useForm<TFormData>();\n\n  const name = useStateful(guardianInitialInfo.name);\n  const website = useStateful(guardianInitialInfo.website);\n  // const contactInfo = useStateful(guardianInitialInfo.contact);\n  const ipAddress = useStateful(guardianInitialInfo.ip);\n  const nodeAddress = useStateful(guardianInitialInfo.orbsAddr);\n\n  const errorNodeAddress = !!errors.nodeAddress;\n  const errorIPAddress = !!errors.ipAddress;\n  const errorWebsite = !!errors.website;\n\n  // DEV_NOTE : Taking ref for eslint-hooks\n  const nameSetValue = name.setValue;\n  const websiteSetValue = website.setValue;\n  // const contactInfoSetValue = contactInfo.setValue;\n  const ipAddressSetValue = ipAddress.setValue;\n  const nodeAddressSetValue = nodeAddress.setValue;\n\n  // DEV_NOTE : O.L : This is a hack to enforce update after registration,\n  // TODO : O.L : Fix this\n  useEffect(() => {\n    if (guardianInitialInfo) {\n      console.log(\"Re-setting data\");\n      nameSetValue(guardianInitialInfo.name);\n      websiteSetValue(guardianInitialInfo.website);\n      // contactInfoSetValue(guardianInitialInfo.contact);\n      ipAddressSetValue(guardianInitialInfo.ip);\n      nodeAddressSetValue(guardianInitialInfo.orbsAddr);\n    }\n  }, [\n    // contactInfoSetValue,\n    guardianInitialInfo,\n    ipAddressSetValue,\n    nameSetValue,\n    nodeAddressSetValue,\n    websiteSetValue,\n  ]);\n\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  console.log(isMobile);\n\n  const buildHelperMessage = useCallback(\n    (hasError: boolean, errorText?: string, infoTexts?: React.ReactNode[]) => {\n      let message: React.ReactNode | undefined;\n      // DEV_NOTE: O.L :  We would like to display the info text to the user on mobile (no hove effect)\n      // if (isMobile) {\n      if (infoTexts) {\n        message = <FormHelperListTexts helperTexts={infoTexts} />;\n      }\n      // }\n\n      // If we have an error, we would like to display it\n      if (hasError && errorText) {\n        message = errorText;\n      }\n\n      return message;\n    },\n    []\n  );\n\n  // TODO : O.L : Add tx progress indicator\n  const submit = useCallback(\n    (formData: TFormData) => {\n      const guardianRegistrationPayload: TGuardianRegistrationPayload = {\n        ip: formData.ipAddress,\n        orbsAddr: formData.nodeAddress,\n        name: formData.name,\n        website: formData.website,\n        // contact: formData.contactInfo,\n      };\n      submitInfo(guardianRegistrationPayload);\n    },\n    [submitInfo]\n  );\n\n  // TODO : FUTURE : This forms will not look good on mobile, fix the text overflow\n  return (\n    <form\n      onSubmit={handleSubmit((formData) => submit(formData))}\n      className={classes.form}\n      {...rest}\n    >\n      {/*<InstallPhaseExtraDetails />*/}\n\n      <TextField\n        InputLabelProps={{ style: { pointerEvents: \"auto\" } }}\n        name={\"name\"}\n        label={\"Guardian name\"}\n        placeholder={PLACE_HOLDER_GUARDIAN_NAME}\n        title={INFO_MESSAGE_GUARDIAN_NAME[0]}\n        // helperText={buildHelperMessage(\n        //   false,\n        //   undefined,\n        //   INFO_MESSAGE_GUARDIAN_NAME\n        // )}\n        value={name.value}\n        onChange={(e) => name.setValue(e.target.value)}\n        required\n        inputRef={register}\n        fullWidth\n        className={classes.textField}\n        autoFocus\n      />\n      <br />\n      <TextField\n        fullWidth\n        name={\"website\"}\n        label={\"Guardian website\"}\n        placeholder={PLACE_HOLDER_WEBSITE}\n        title={INFO_MESSAGE_WEBSITE[0]}\n        // helperText={buildHelperMessage(\n        //   errorWebsite,\n        //   WEBSITE_MESSAGE,\n        //   INFO_MESSAGE_WEBSITE\n        // )}\n        helperText={errorWebsite && WEBSITE_MESSAGE}\n        value={website.value}\n        onChange={(e) => website.setValue(e.target.value)}\n        required\n        error={errorWebsite}\n        inputRef={register({ validate: validURL })}\n        className={classes.textField}\n      />\n      {/*<br />*/}\n      {/*<TextField*/}\n      {/*  fullWidth*/}\n      {/*  name={\"contactInfo\"}*/}\n      {/*  title={\"contactInfo\"}*/}\n      {/*  label={\"Contact Info\"}*/}\n      {/*  value={contactInfo.value}*/}\n      {/*  onChange={(e) => contactInfo.setValue(e.target.value)}*/}\n      {/*  required*/}\n      {/*  inputRef={register}*/}\n      {/*/>*/}\n      <br />\n      <TextField\n        fullWidth\n        name={\"ipAddress\"}\n        label={\"Node IP\"}\n        placeholder={PLACE_HOLDER_IP}\n        title={INFO_MESSAGE_IP[0]}\n        value={ipAddress.value}\n        onChange={(e) => ipAddress.setValue(e.target.value)}\n        required\n        inputRef={register({ pattern: IP_REGEX })}\n        error={errorIPAddress}\n        // helperText={buildHelperMessage(\n        //   errorIPAddress,\n        //   IP_ADDRESS_MESSAGE,\n        //   INFO_MESSAGE_IP\n        // )}\n        helperText={errorIPAddress && IP_ADDRESS_MESSAGE}\n        className={classes.textField}\n      />\n\n      <br />\n      <TextField\n        name={\"nodeAddress\"}\n        label={\"Node address\"}\n        placeholder={PLACE_HOLDER_NODE_ADDRESS}\n        title={INFO_MESSAGE_NODE_ADDRESS[1] as string}\n        value={nodeAddress.value}\n        onChange={(e) => nodeAddress.setValue(e.target.value)}\n        error={errorNodeAddress}\n        // helperText={buildHelperMessage(\n        //   errorNodeAddress,\n        //   NODE_ADDRESS_MESSAGE,\n        //   INFO_MESSAGE_NODE_ADDRESS\n        // )}\n        helperText={errorNodeAddress && NODE_ADDRESS_MESSAGE}\n        required\n        inputRef={register({ pattern: ETHEREUM_ADDRESS_REGEX })}\n        fullWidth\n        className={classes.textField}\n      />\n      <br />\n      <br />\n      <ActionButton type={\"submit\"} disabled={disableSubmit}>\n        {actionButtonTitle}\n      </ActionButton>\n      <br />\n      <br />\n      {messageForSubmitButton && (\n        <Typography\n          variant={\"body2\"}\n          color={\"error\"}\n          style={{ width: \"fit-content\" }}\n        >\n          {messageForSubmitButton}\n        </Typography>\n      )}\n    </form>\n  );\n});\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    padding: \"0.5rem 0\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexWrap: \"wrap\",\n    justifyItems: \"center\",\n    justifyContent: \"center\",\n  },\n}));\n\n/**\n * DEV_NOTE : O.L : Maybe find a better name for this component.\n * It is used to display 'DetailsList' in a fluid manner.\n */\nexport const DetailsListContainer = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const { children } = props;\n\n  return <div className={classes.container}>{children}</div>;\n});\n","import React from \"react\";\nimport { DetailsListContainer } from \"../components/detailsList/DetailsListContainer\";\nimport { DetailsList } from \"../components/detailsList/Detailslist\";\nimport {\n  GUARDIAN_ADDRESS_DETAILS_TEXTS,\n  NODE_ADDRESS_DETAILS_TEXTS,\n} from \"../constants/explainingTexts\";\nimport { Typography } from \"@material-ui/core\";\nimport { BoldText } from \"../components/texts/boldText\";\n\ninterface IProps {}\n\nexport const GuardianFormDetailsList = React.memo<IProps>((props) => {\n  return (\n    <DetailsListContainer>\n      <BoldText>Please Notice:</BoldText>\n      <DetailsList\n        conceptName={\"Guardian Address\"}\n        details={GUARDIAN_ADDRESS_DETAILS_TEXTS}\n      />\n      <DetailsList\n        conceptName={\"Node Address\"}\n        details={NODE_ADDRESS_DETAILS_TEXTS}\n      />\n    </DetailsListContainer>\n  );\n});\n","import React, { useCallback, useState } from \"react\";\nimport { GuardiansDetailsForm } from \"../forms/GuradiansDetailsForm\";\nimport { TGuardianInfo } from \"../../../store/OrbsAccountStore\";\nimport { Avatar, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport { GuardianFormDetailsList } from \"../../GuardianFormDetailsList\";\nimport {\n  ICryptoWalletConnectionService,\n  TGuardianRegistrationPayload,\n} from \"@orbs-network/contracts-js\";\n\ninterface IProps {\n  guardianAddress: string;\n  registerGuardian: (\n    guardianRegistrationPayload: TGuardianRegistrationPayload\n  ) => void;\n  cryptoWalletConnectionService: ICryptoWalletConnectionService;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n  boldText: {\n    fontWeight: \"bold\",\n    display: \"contents\",\n  },\n}));\n\nconst demoInitialInfo: TGuardianInfo = {\n  orbsAddr: \"0xe30a30069209aa4e7e7b07ab391966a0f071afd9\",\n  ip: \"12.114.252.82\",\n  // contact: \"A's contact info\",\n  website: \"a.com\",\n  name: \"A\",\n};\nconst emptyInitialInfo: TGuardianInfo = {\n  orbsAddr: \"\",\n  ip: \"\",\n  // contact: \"\",\n  website: \"\",\n  name: \"\",\n};\n\nconst MINIMAL_REQUIRED_ETH_BALANCE = 1;\n\nexport const RegisterGuardianSection = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    guardianAddress,\n    registerGuardian,\n    cryptoWalletConnectionService,\n  } = props;\n\n  const [errorMessage, setErrorMessage] = useState<string | undefined>(\n    undefined\n  );\n\n  // const { shouldDisable, messageToExplainDisable } = useMemo(() => {\n  //   let shouldDisable: boolean = false;\n  //   let messageToExplainDisable: string | undefined = undefined;\n  //\n  //   if (ethereumBalance < MINIMAL_REQUIRED_ETH_BALANCE) {\n  //     shouldDisable = true;\n  //     messageToExplainDisable =\n  //       \"A minimal balance of 1 Ether is required in order to register as a guardian\";\n  //   }\n  //\n  //   return {\n  //     shouldDisable,\n  //     messageToExplainDisable,\n  //   };\n  // }, [ethereumBalance]);\n\n  /**\n   * We will use this function to perform validations just before calling 'register'\n   */\n  const checkBalanceBeforeRegistration = useCallback(\n    async (guardianRegistrationPayload: TGuardianRegistrationPayload) => {\n      if (\n        guardianRegistrationPayload.orbsAddr.toLowerCase() ===\n        guardianAddress.toLowerCase()\n      ) {\n        setErrorMessage(\n          `Your Orbs node address cannot be the same as your Guardian address ${guardianAddress}`\n        );\n        return;\n      }\n\n      const orbsNodeBalance = await cryptoWalletConnectionService.readEthereumBalance(\n        guardianRegistrationPayload.orbsAddr\n      );\n\n      if (orbsNodeBalance < MINIMAL_REQUIRED_ETH_BALANCE) {\n        setErrorMessage(\n          `A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian.`\n        );\n        return;\n      }\n\n      registerGuardian(guardianRegistrationPayload);\n    },\n    [cryptoWalletConnectionService, guardianAddress, registerGuardian]\n  );\n\n  return (\n    <div\n      id={\"RegisterGuardianSection\"}\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        //  DEV_NOTE : 'min-content' will allow us to limit width to the width of the address text (it has max-content width)\n        //            removing it will allow us to display elements wider than the address.\n        // If removed, add 'maxWidth'\n        width: \"min-content\",\n        maxWidth: \"100%\",\n      }}\n    >\n      <Avatar className={classes.avatar}>\n        <PersonIcon />\n      </Avatar>\n      <div\n        style={{\n          maxWidth: \"100%\",\n          textAlign: \"center\",\n        }}\n      >\n        <Typography variant={\"h5\"}>Guardian Registration</Typography>\n        <Typography variant={\"h6\"}>\n          Your <div className={classes.boldText}>Guardian address </div>\n          is:\n        </Typography>\n        <Typography\n          style={{\n            textOverflow: \"ellipsis\",\n            overflow: \"hidden\",\n          }}\n        >\n          {guardianAddress}\n        </Typography>\n      </div>\n\n      <GuardianFormDetailsList />\n\n      <GuardiansDetailsForm\n        submitInfo={checkBalanceBeforeRegistration}\n        guardianInitialInfo={emptyInitialInfo}\n        actionButtonTitle={\"Register\"}\n        messageForSubmitButton={errorMessage}\n      />\n    </div>\n  );\n});\n","import React from \"react\";\nimport { IServices } from \"./Services\";\nimport { MobXProviderContext } from \"mobx-react\";\nimport {\n  ICryptoWalletConnectionService,\n  IGuardiansService,\n} from \"@orbs-network/contracts-js\";\n\nexport function useServices(): IServices {\n  const services = React.useContext(MobXProviderContext) as IServices;\n\n  if (!services) {\n    throw new Error(\"Tried to use services before initialising them\");\n  }\n\n  return services;\n}\n\nexport function useCryptoWalletConnectionService(): ICryptoWalletConnectionService {\n  return useServices().cryptoWalletIntegrationService;\n}\n\nexport function useGuardiansService(): IGuardiansService {\n  return useServices().guardiansService;\n}\n","import React, { useCallback } from \"react\";\nimport { Page } from \"../../../components/structure/Page\";\nimport { ContentFitting } from \"../../../components/structure/ContentFitting\";\nimport { Backdrop, CircularProgress } from \"@material-ui/core\";\nimport { RegisterGuardianSection } from \"./RegisterGuardianSection\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  useCryptoWalletIntegrationStore,\n  useOrbsAccountStore,\n} from \"../../../store/storeHooks\";\nimport { useSnackbar } from \"notistack\";\nimport { useCryptoWalletConnectionService } from \"../../../services/servicesHooks\";\nimport { TGuardianRegistrationPayload } from \"@orbs-network/contracts-js\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n}));\n\nexport const GuardianRegistrationPage = React.memo<IProps>((props) => {\n  const classes = useStyles();\n\n  const { enqueueSnackbar } = useSnackbar();\n  const cryptoWalletIntegrationService = useCryptoWalletConnectionService();\n  const cryptoWalletIntegrationStore = useCryptoWalletIntegrationStore();\n  const orbsAccountStore = useOrbsAccountStore();\n\n  const registerGuardian = useCallback(\n    async (guardianRegistrationPayload: TGuardianRegistrationPayload) => {\n      try {\n        await orbsAccountStore.registerGuardian(guardianRegistrationPayload);\n      } catch (e) {\n        enqueueSnackbar(`Error in 'Guardian Registration' TX ${e.message}`, {\n          variant: \"error\",\n        });\n      }\n    },\n    [enqueueSnackbar, orbsAccountStore]\n  );\n\n  return (\n    <Page>\n      <ContentFitting>\n        {/* Content  */}\n        <div\n          style={{\n            display: \"flex\",\n            // flexDirection: \"column\",\n            maxWidth: \"100%\",\n            // textAlign: \"center\",\n            // alignItems: \"center\",\n            // alignContent: \"center\",\n          }}\n        >\n          <RegisterGuardianSection\n            registerGuardian={registerGuardian}\n            guardianAddress={cryptoWalletIntegrationStore.mainAddress}\n            cryptoWalletConnectionService={cryptoWalletIntegrationService}\n          />\n        </div>\n        <Backdrop\n          className={classes.backdrop}\n          open={orbsAccountStore.txPending}\n        >\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      </ContentFitting>\n    </Page>\n  );\n});\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Button, TextField, Typography } from \"@material-ui/core\";\nimport { useStateful, useBoolean } from \"react-hanger\";\nimport { useForm } from \"react-hook-form\";\nimport { config, Transition } from \"react-spring/renderprops-universal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { InTextLink } from \"../../../components/InTextLink\";\nimport { validURL } from \"./inoputValidators\";\nimport { ActionButton } from \"../../../components/shared/ActionButton/ActionButton\";\n\ninterface IProps {\n  currentGuardianDetailsUrl?: string;\n  updateGuardianDetailsUrl: (guardianDetailsUrl: string) => void;\n  hasGuardianDetailsUrl?: boolean;\n\n  // External links\n  detailsRequirementsLink?: string;\n}\n\ntype TFormData = {\n  guardianDetailsUrl: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  textField: {\n    \"& label.Mui-focused\": {\n      color: \"#f5f5f5\",\n    },\n  },\n}));\n\nexport const GuardiansDetailsUrlForm = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    currentGuardianDetailsUrl,\n    updateGuardianDetailsUrl,\n    hasGuardianDetailsUrl,\n    detailsRequirementsLink,\n  } = props;\n\n  const REWARDS_FREQUENCY_ERROR_MESSAGE = `Please use a valid URL`;\n  const REWARDS_FREQUENCY_DATA_MESSAGE = (\n    <Typography component={\"span\"} variant={\"caption\"}>\n      Setting a URL to your details page is a prerequisite for joining the{\" \"}\n      <InTextLink text={\"certified committee\"} href={detailsRequirementsLink} />\n    </Typography>\n  );\n\n  const showEditOptions = useBoolean(false);\n  const { register, handleSubmit, errors } = useForm<TFormData>();\n\n  const errorGuardianDetailsUrl = !!errors.guardianDetailsUrl;\n\n  const formGuardianDetailsUrl = useStateful(\"\");\n\n  const submitUpdate = useCallback(\n    (formData: TFormData) => {\n      updateGuardianDetailsUrl(formData.guardianDetailsUrl);\n    },\n    [updateGuardianDetailsUrl]\n  );\n\n  const setFormGuardianDetailsUrl = formGuardianDetailsUrl.setValue;\n  useEffect(() => {\n    setFormGuardianDetailsUrl(currentGuardianDetailsUrl || \"\");\n  }, [setFormGuardianDetailsUrl, currentGuardianDetailsUrl]);\n\n  const titleText = useMemo(() => {\n    return hasGuardianDetailsUrl ? (\n      <Typography component={\"span\"}>\n        Your details page :{\" \"}\n        <InTextLink\n          href={\n            currentGuardianDetailsUrl?.startsWith(\"http\")\n              ? currentGuardianDetailsUrl\n              : \"http://\" + currentGuardianDetailsUrl\n          }\n          text={currentGuardianDetailsUrl!}\n        />\n      </Typography>\n    ) : (\n      `You have not set your details page URL`\n    );\n  }, [currentGuardianDetailsUrl, hasGuardianDetailsUrl]);\n\n  return (\n    <form\n      style={{\n        maxWidth: \"100%\",\n        width: \"100%\",\n        display: \"relative\",\n      }}\n      onSubmit={handleSubmit(submitUpdate)}\n    >\n      <TextField\n        fullWidth\n        name={\"guardianDetailsUrl\"}\n        title={`Certified Committee URL`}\n        label={\"Certified Committee URL\"}\n        value={formGuardianDetailsUrl.value}\n        onChange={(e) => {\n          formGuardianDetailsUrl.setValue(e.target.value || \"\");\n        }}\n        required\n        inputRef={register({ validate: validURL })}\n        error={errorGuardianDetailsUrl}\n        helperText={\n          errorGuardianDetailsUrl\n            ? REWARDS_FREQUENCY_ERROR_MESSAGE\n            : REWARDS_FREQUENCY_DATA_MESSAGE\n        }\n        className={classes.textField}\n        autoFocus\n      />\n      <br />\n      <br />\n      <ActionButton type={\"submit\"}>\n        Update your Certified Committee URL\n      </ActionButton>\n    </form>\n  );\n});\n","import React from \"react\";\nimport { Avatar, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\nimport { InTextLink } from \"../../../../components/InTextLink\";\nimport { GuardiansDetailsUrlForm } from \"../../forms/GuardiansDetailsUrlForm\";\n\ninterface IProps {\n  currentGuardianDetailsUrl?: string;\n  updateGuardianDetailsUrl: (delegatorsCertificateUrl: string) => void;\n  hasGuardianDetailsUrl?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n}));\n\nexport const DETAILS_REQUIREMENTS_LINK =\n  \"https://github.com/orbs-network/validator-instructions/blob/master/public/certified_committee.md\";\n\nexport const EditDelegatorsCertificateSection = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    currentGuardianDetailsUrl,\n    hasGuardianDetailsUrl,\n    updateGuardianDetailsUrl,\n  } = props;\n  return (\n    <>\n      <Avatar className={classes.avatar}>\n        <VerifiedUserIcon />\n      </Avatar>\n      <Typography variant={\"h5\"}>\n        Guardian’s Information{\" \"}\n        <InTextLink text={\"( ? )\"} href={DETAILS_REQUIREMENTS_LINK} />\n      </Typography>\n      <GuardiansDetailsUrlForm\n        currentGuardianDetailsUrl={currentGuardianDetailsUrl}\n        hasGuardianDetailsUrl={hasGuardianDetailsUrl}\n        updateGuardianDetailsUrl={updateGuardianDetailsUrl}\n        detailsRequirementsLink={DETAILS_REQUIREMENTS_LINK}\n      />\n    </>\n  );\n});\n","import React, { DetailedHTMLProps, useMemo } from \"react\";\nimport { TGuardianInfo } from \"../../../store/OrbsAccountStore\";\nimport { Paper, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { PaperProps } from \"@material-ui/core/Paper/Paper\";\nimport { InTextLink } from \"../../../components/InTextLink\";\nimport { DETAILS_REQUIREMENTS_LINK } from \"./sections/EditDelegatorsCertificateSection\";\n\nexport interface IDefaultableValue<T> {\n  isUsingDefaultValue: boolean;\n  defaultValue: T;\n  value?: T;\n}\n\ninterface IProps {\n  guardianAddress: string;\n  guardianInfo: TGuardianInfo;\n  delegatorsShare: IDefaultableValue<number> & { maxValue: number };\n  guardianCertificationUrl: {\n    currentGuardianDetailsUrl: string;\n    hasGuardianDetailsUrl?: boolean;\n  };\n  highlightInfo?: boolean;\n  highlightDelegatorsShare?: boolean;\n  highlightCertificateUrl?: boolean;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    transition: \"0.5s\",\n    fontWeight: \"bold\",\n  },\n  titleHighlight: {\n    color: theme.palette.secondary.light,\n  },\n  titleFade: {\n    color: theme.palette.text.disabled,\n  },\n  value: {\n    transition: \"0.5s\",\n  },\n  valueHighlight: {\n    color: theme.palette.secondary.main,\n  },\n  valueFade: {\n    color: theme.palette.text.disabled,\n  },\n}));\n\nexport const GuardianDetails = React.memo<IProps & PaperProps>((props) => {\n  const classes = useStyles();\n  const {\n    guardianAddress,\n    guardianInfo,\n    delegatorsShare,\n    guardianCertificationUrl,\n\n    highlightInfo,\n    highlightDelegatorsShare,\n    highlightCertificateUrl,\n\n    ...rest\n  } = props;\n\n  const shouldFadeOthers =\n    highlightInfo || highlightDelegatorsShare || highlightCertificateUrl;\n\n  const delegatorsShareUsingDefaultMessage = delegatorsShare.isUsingDefaultValue\n    ? \" (using default value)\"\n    : null;\n\n  const guardianCertificateUrlDataText = useMemo(() => {\n    return guardianCertificationUrl.hasGuardianDetailsUrl ? (\n      <Typography component={\"span\"}>\n        <InTextLink\n          href={\n            guardianCertificationUrl.currentGuardianDetailsUrl?.startsWith(\n              \"http\"\n            )\n              ? guardianCertificationUrl.currentGuardianDetailsUrl\n              : \"http://\" + guardianCertificationUrl.currentGuardianDetailsUrl\n          }\n          text={guardianCertificationUrl.currentGuardianDetailsUrl!}\n          shouldfade={!highlightCertificateUrl && shouldFadeOthers}\n        />\n      </Typography>\n    ) : (\n      `You have not set your details page URL`\n    );\n  }, [\n    guardianCertificationUrl.currentGuardianDetailsUrl,\n    guardianCertificationUrl.hasGuardianDetailsUrl,\n    highlightCertificateUrl,\n    shouldFadeOthers,\n  ]);\n\n  return (\n    <Paper\n      elevation={3}\n      {...rest}\n      style={{\n        padding: \"1.5rem\",\n        maxWidth: \"100%\",\n        width: \"30rem\",\n        overflow: \"hidden\",\n      }}\n    >\n      <TitleValuePair\n        title={\"Guardian address : \"}\n        value={guardianAddress}\n        shouldfade={shouldFadeOthers}\n      />\n      <br />\n      <TitleValuePair\n        title={\"Guardian name : \"}\n        value={guardianInfo.name}\n        shouldHighlight={highlightInfo}\n        shouldfade={!highlightInfo && shouldFadeOthers}\n      />\n      <br />\n      <TitleValuePair\n        title={\"Guardian website : \"}\n        value={\n          <InTextLink\n            text={guardianInfo.website}\n            href={guardianInfo.website}\n            shouldfade={!highlightInfo && shouldFadeOthers}\n          />\n        }\n        shouldHighlight={highlightInfo}\n        shouldfade={!highlightInfo && shouldFadeOthers}\n      />\n      <br />\n      <TitleValuePair\n        title={\"Node IP : \"}\n        value={guardianInfo.ip}\n        shouldHighlight={highlightInfo}\n        shouldfade={!highlightInfo && shouldFadeOthers}\n      />\n\n      <br />\n      <TitleValuePair\n        title={\"Node address : \"}\n        value={guardianInfo.orbsAddr}\n        shouldHighlight={highlightInfo}\n        shouldfade={!highlightInfo && shouldFadeOthers}\n      />\n      <br />\n      <TitleValuePair\n        title={`Delegators share${delegatorsShareUsingDefaultMessage} : `}\n        value={`${\n          delegatorsShare.isUsingDefaultValue\n            ? delegatorsShare.defaultValue\n            : delegatorsShare.value\n        } %`}\n        shouldHighlight={highlightDelegatorsShare}\n        shouldfade={!highlightDelegatorsShare && shouldFadeOthers}\n      />\n      <br />\n\n      <TitleValuePair\n        title={\n          <>\n            Guardian details URL (\n            <InTextLink\n              text={\"Certified Committee\"}\n              href={DETAILS_REQUIREMENTS_LINK}\n              shouldfade={!highlightCertificateUrl && shouldFadeOthers}\n            />\n            ) :\n          </>\n        }\n        value={guardianCertificateUrlDataText}\n        shouldHighlight={highlightCertificateUrl}\n        shouldfade={!highlightCertificateUrl && shouldFadeOthers}\n      />\n    </Paper>\n  );\n});\n\ninterface ITitleValuePairProps {\n  title: string | JSX.Element;\n  value: string | JSX.Element;\n  shouldHighlight?: boolean;\n  shouldfade?: boolean;\n}\n\nconst TitleValuePair = React.memo<ITitleValuePairProps>((props) => {\n  const { title, value, shouldHighlight, shouldfade } = props;\n  const classes = useStyles();\n\n  return (\n    <>\n      <Typography\n        className={clsx(\n          classes.title,\n          shouldHighlight ? classes.titleHighlight : null,\n          shouldfade ? classes.titleFade : null\n        )}\n      >\n        {title}\n      </Typography>\n      <Typography\n        className={clsx(\n          classes.value,\n          shouldHighlight ? classes.valueHighlight : null,\n          shouldfade ? classes.valueFade : null\n        )}\n      >\n        {value}\n      </Typography>\n    </>\n  );\n});\n","import React, { useCallback } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { useBoolean } from \"react-hanger\";\nimport { useForm } from \"react-hook-form\";\nimport { Transition } from \"react-spring/renderprops-universal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ActionButton } from \"../../../components/shared/ActionButton/ActionButton\";\n\ninterface IProps {\n  unregisterGuardian: () => void;\n}\n\ntype TFormData = {\n  rewardsFrequencyInHours: number;\n};\n\nconst REWARDS_FREQUENCY_MESSAGE = \"Minimum frequency is 12 hours\";\n\nconst useStyles = makeStyles((theme) => ({\n  textField: {\n    \"& label.Mui-focused\": {\n      color: \"#f5f5f5\",\n    },\n  },\n\n  openUnregisterMenuButton: {\n    color: theme.palette.warning.main,\n    borderColor: theme.palette.warning.main,\n  },\n\n  closeUnregisterMenuButton: {\n    color: theme.palette.secondary.main,\n    borderColor: theme.palette.secondary.main,\n  },\n\n  unregisterButton: {\n    color: theme.palette.error.main,\n    borderColor: theme.palette.error.main,\n  },\n}));\n\nexport const UnregisterForm = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const { unregisterGuardian } = props;\n\n  const userWantsToUnregister = useBoolean(false);\n\n  const { register, handleSubmit, errors } = useForm<TFormData>();\n\n  const submitUnregister = useCallback(\n    (formData: TFormData) => {\n      unregisterGuardian();\n    },\n    [unregisterGuardian]\n  );\n\n  return (\n    <form\n      style={{\n        maxWidth: \"100%\",\n        width: \"100%\",\n      }}\n      onSubmit={handleSubmit(submitUnregister)}\n    >\n      <ActionButton type={\"submit\"} errorVariant>\n        Unregister\n      </ActionButton>\n    </form>\n  );\n});\n","import React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\ninterface IProps {\n  // Dialog\n  open: boolean;\n  // handleClose: () => void;\n  onAccept: () => void;\n  onCancel: () => void;\n\n  // Content\n  title: string;\n  contentText?: string;\n  instructionText?: string;\n  acceptText?: string;\n  cancelText?: string;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  dialogPaper: {\n    \"& .MuiDialog-paper\": {\n      border: `4px double ${theme.palette.secondary.main}`,\n      boxShadow: \"none\",\n      minWidth: \"20rem\",\n      maxWidth: \"100%\",\n    },\n  },\n  button: {\n    minWidth: \"6rem\",\n  },\n}));\n\nexport const ActionConfirmationModal = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    open,\n    onAccept,\n    onCancel,\n    // handleClose,\n    title,\n    contentText,\n    instructionText,\n    acceptText,\n    cancelText,\n  } = props;\n  const theme = useTheme();\n  // const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const fullScreen = false;\n\n  return (\n    <Dialog\n      className={classes.dialogPaper}\n      fullScreen={fullScreen}\n      open={open}\n      onClose={onCancel}\n      aria-labelledby=\"action-confirmation-dialog\"\n      maxWidth={\"xs\"}\n      style={{}}\n    >\n      <DialogTitle id=\"action-confirmation-dialog-title\">{title}</DialogTitle>\n      {contentText && (\n        <DialogContent>\n          <DialogContentText>\n            <Typography>{contentText}</Typography>\n          </DialogContentText>\n        </DialogContent>\n      )}\n      <DialogContent>\n        <DialogContentText>\n          <Typography variant={\"body2\"}>{instructionText}</Typography>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          className={classes.button}\n          autoFocus\n          onClick={onCancel}\n          color=\"secondary\"\n          variant={\"contained\"}\n        >\n          {cancelText || \"Cancel\"}\n        </Button>\n        <Button\n          className={classes.button}\n          onClick={onAccept}\n          color=\"secondary\"\n          autoFocus\n          variant={\"contained\"}\n        >\n          {acceptText || \"Accept\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n});\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Button, TextField, Typography } from \"@material-ui/core\";\nimport { useBoolean, useNumber } from \"react-hanger\";\nimport { useForm } from \"react-hook-form\";\nimport { config, Transition } from \"react-spring/renderprops-universal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ActionButton } from \"../../../components/shared/ActionButton/ActionButton\";\n\ninterface IProps {\n  currentDelegatorsCut?: number;\n  updateDelegatorsCut: (delegatorsCut: number) => void;\n  isUsingDefaultValue?: boolean;\n\n  // Configs\n  delegatorsCutMaxValue: number;\n  delegatorsCutDefaultValue: number;\n}\n\ntype TFormData = {\n  delegatorsCut: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  textField: {\n    \"& label.Mui-focused\": {\n      color: \"#f5f5f5\",\n    },\n  },\n}));\n\nexport const DelegatorsShareForm = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const {\n    currentDelegatorsCut,\n    updateDelegatorsCut,\n    isUsingDefaultValue,\n    delegatorsCutDefaultValue,\n    delegatorsCutMaxValue,\n  } = props;\n\n  const REWARDS_FREQUENCY_MESSAGE = `Valid values are between 0 and ${delegatorsCutMaxValue}`;\n\n  const showEditOptions = useBoolean(false);\n  const { register, handleSubmit, errors } = useForm<TFormData>();\n\n  const delegatorsCut = useNumber(Math.min(currentDelegatorsCut || 0, 66), {\n    upperLimit: delegatorsCutMaxValue,\n  });\n\n  const errorDelegatorsCut = !!errors.delegatorsCut;\n\n  const submitUpdate = useCallback(\n    (formData: TFormData) => {\n      updateDelegatorsCut(parseFloat(formData.delegatorsCut));\n    },\n    [updateDelegatorsCut]\n  );\n\n  const setDelegCut = delegatorsCut.setValue;\n  useEffect(() => {\n    setDelegCut(Math.min(currentDelegatorsCut || 0, delegatorsCutMaxValue));\n  }, [currentDelegatorsCut, delegatorsCutMaxValue, setDelegCut]);\n\n  console.log({ currentDelegatorsCut });\n\n  const titleText = useMemo(() => {\n    return isUsingDefaultValue\n      ? `Current share : Default value (${delegatorsCutDefaultValue}%)`\n      : `Current share : ${currentDelegatorsCut}%`;\n  }, [currentDelegatorsCut, delegatorsCutDefaultValue, isUsingDefaultValue]);\n\n  return (\n    <form\n      style={{\n        maxWidth: \"100%\",\n        width: \"100%\",\n        display: \"relative\",\n      }}\n      onSubmit={handleSubmit(submitUpdate)}\n    >\n      <TextField\n        fullWidth\n        name={\"delegatorsCut\"}\n        title={`Delegators share (% out of staking rewards)`}\n        label={\"Delegators share (% out of staking rewards)\"}\n        value={delegatorsCut.value}\n        inputProps={{\n          step: 1,\n        }}\n        onChange={(e) => {\n          delegatorsCut.setValue(parseFloat(e.target.value) || 0);\n        }}\n        required\n        type={\"number\"}\n        inputRef={register({\n          max: delegatorsCutMaxValue,\n        })}\n        error={errorDelegatorsCut}\n        helperText={\n          errorDelegatorsCut\n            ? REWARDS_FREQUENCY_MESSAGE\n            : `The percentage of the staking rewards that is distributed to your Delegators, between 0% and ${delegatorsCutMaxValue}%`\n        }\n        InputProps={{\n          startAdornment: \"%\",\n        }}\n        className={classes.textField}\n        autoFocus\n      />\n      <br />\n      <br />\n      <ActionButton type={\"submit\"} fullWidth>\n        Update Delegators share\n      </ActionButton>\n    </form>\n  );\n});\n","import React from \"react\";\nimport { Paper } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  formWrapper: {\n    padding: \"1.5rem\",\n    maxWidth: \"100%\",\n    overflow: \"hidden\",\n    width: \"30rem\",\n    transition: \"0.7s\",\n    border: \"2px dashed rgba(0,0,0,0)\",\n    \"&:focus-within, &:hover\": {\n      border: `2px dashed ${theme.palette.secondary.dark}`,\n    },\n  },\n}));\n\nexport const FormWrapper = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const { children } = props;\n  return (\n    <Paper elevation={3} className={classes.formWrapper}>\n      {children}\n    </Paper>\n  );\n});\n","import React, { useCallback, useState } from \"react\";\nimport { Page } from \"../../../components/structure/Page\";\nimport { ContentFitting } from \"../../../components/structure/ContentFitting\";\nimport {\n  Avatar,\n  Backdrop,\n  Box,\n  CircularProgress,\n  Collapse,\n  Divider,\n  Tab,\n  Tabs,\n  Typography,\n} from \"@material-ui/core\";\nimport { EditGuardianInfoSection } from \"./sections/EditGuardianInfoSection\";\nimport { EditRewardsDistributionSection } from \"./sections/EditRewardsDistributionSection\";\nimport { UnregisterSection } from \"./sections/UnregisterSection\";\nimport {\n  useCryptoWalletIntegrationStore,\n  useOrbsAccountStore,\n} from \"../../../store/storeHooks\";\nimport { useSnackbar } from \"notistack\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { EditDelegatorsShareSection } from \"./sections/EditDelegatorsShareSection\";\nimport { observer } from \"mobx-react\";\nimport { IReactComponent } from \"mobx-react/dist/types/IReactComponent\";\nimport { TGuardianUpdatePayload } from \"@orbs-network/contracts-js\";\nimport {\n  DETAILS_REQUIREMENTS_LINK,\n  EditDelegatorsCertificateSection,\n} from \"./sections/EditDelegatorsCertificateSection\";\nimport { CompactInput } from \"../../../components/CompactInput/CompactInput\";\nimport PhoneIcon from \"@material-ui/icons/Phone\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport PersonPinIcon from \"@material-ui/icons/PersonPin\";\nimport MoneyIcon from \"@material-ui/icons/Money\";\nimport PermIdentityIcon from \"@material-ui/icons/PermIdentity\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport { GuardianDetails } from \"./GuardianDetails\";\nimport { UnregisterForm } from \"../forms/UnregisterForm\";\nimport { ActionConfirmationModal } from \"../../../components/shared/modals/ActionConfirmationModal\";\nimport { DelegatorsShareForm } from \"../forms/DelegatorsShareForm\";\nimport { FormWrapper } from \"../../../components/forms/FormWrapper\";\nimport Fade from \"@material-ui/core/Fade\";\nimport { GuardiansDetailsUrlForm } from \"../forms/GuardiansDetailsUrlForm\";\nimport { GuardiansDetailsForm } from \"../forms/GuradiansDetailsForm\";\nimport { BoxProps } from \"@material-ui/core/Box/Box\";\n\ninterface IProps {}\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n  tab: {\n    transition: \"0.5s\",\n    color: theme.palette.secondary.dark,\n    opacity: 0.5,\n\n    \"&:hover\": {\n      // backgroundColor: \"rgba(255,255,255, 0.1)\",\n    },\n\n    \"&.MuiTab-textColorPrimary.Mui-selected\": {\n      // backgroundColor: \"rgba(255,255,255, 0.1)\",\n\n      fontWeight: \"bold\",\n      color: theme.palette.secondary.main,\n      opacity: 1,\n    },\n  },\n  tabPanel: {\n    maxWidth: \"100%\",\n    overflow: \"hidden\",\n  },\n}));\n\nconst TABS_IDS = {\n  info: \"info\",\n  editInfo: \"editInfo\",\n  delegatorsShare: \"delegatorsShare\",\n  certificate: \"certificate\",\n  unregister: \"unregister\",\n};\n\nexport const GuardianEditingPage = observer<React.FunctionComponent<IProps>>(\n  (props) => {\n    const classes = useStyles();\n    const theme = useTheme();\n\n    const { enqueueSnackbar } = useSnackbar();\n    const cryptoWalletIntegrationStore = useCryptoWalletIntegrationStore();\n    const orbsAccountStore = useOrbsAccountStore();\n\n    // TODO : ORL : The whole modal logic is duplicated from 'Subscription UI' - Unite them properly\n    const [showModal, setShowModal] = useState(false);\n    const [onDialogAccept, setOnDialogAccept] = useState(() => () =>\n      console.log(\"Accepted\")\n    );\n    const [dialogTexts, setDialogTexts] = useState<{\n      title: string;\n      content?: string;\n      instruction?: string;\n      acceptText?: string;\n      cancelText?: string;\n      onCancelMessage?: string;\n    }>({ title: \"\", content: \"\", instruction: \"\" });\n\n    const updateGuardianDetails = useCallback(\n      async (guardianRegistrationPayload: TGuardianUpdatePayload) => {\n        setDialogTexts({\n          title: `Update your Details`,\n          instruction: \"Please press 'Accept' and confirm the transaction\",\n          onCancelMessage: \"Action canceled\",\n        });\n        setShowModal(true);\n        setOnDialogAccept(() => async () => {\n          try {\n            const txRes = await orbsAccountStore.updateGuardianInfo(\n              guardianRegistrationPayload\n            );\n\n            if (txRes) {\n              enqueueSnackbar(\"Guardian details successfully updated\", {\n                variant: \"success\",\n              });\n            }\n          } catch (e) {\n            enqueueSnackbar(\n              `Error in 'Guardian Details Update' TX ${e.message}`,\n              {\n                variant: \"error\",\n              }\n            );\n          }\n        });\n      },\n      [enqueueSnackbar, orbsAccountStore]\n    );\n\n    const updateDelegatorsShare = useCallback(\n      async (delegatorsSharePercentage: number) => {\n        setDialogTexts({\n          title: `Update Delegators share`,\n          content: `Your Delegator's share will change to to ${delegatorsSharePercentage.toLocaleString()}%`,\n          instruction: \"Please press 'Accept' and confirm the transaction\",\n          onCancelMessage: \"Action canceled\",\n        });\n        setShowModal(true);\n        setOnDialogAccept(() => async () => {\n          try {\n            const txRes = await orbsAccountStore.writeGuardianDelegatorsCutPercentage(\n              delegatorsSharePercentage\n            );\n\n            if (txRes) {\n              enqueueSnackbar(\"Delegators share successfully updated\", {\n                variant: \"success\",\n              });\n            }\n          } catch (e) {\n            enqueueSnackbar(\n              `Error in 'Delegators share percentage Update' TX ${e.message}`,\n              {\n                variant: \"error\",\n              }\n            );\n          }\n        });\n      },\n      [enqueueSnackbar, orbsAccountStore]\n    );\n\n    const updateGuardianDetailsPage = useCallback(\n      async (guardianDetailsPageUrl: string) => {\n        setDialogTexts({\n          title: `Update details page URL`,\n          content: `Your details page URL will change to ${guardianDetailsPageUrl}`,\n          instruction: \"Please press 'Accept' and confirm the transaction\",\n          onCancelMessage: \"Action canceled\",\n        });\n        setShowModal(true);\n        setOnDialogAccept(() => async () => {\n          try {\n            const txRes = await orbsAccountStore.writeGuardianDetailsPageURL(\n              guardianDetailsPageUrl\n            );\n\n            if (txRes) {\n              enqueueSnackbar(\"Guardian details page URL updated\", {\n                variant: \"success\",\n              });\n            }\n          } catch (e) {\n            enqueueSnackbar(\n              `Error in 'Guardian details page URL Update' TX ${e.message}`,\n              {\n                variant: \"error\",\n              }\n            );\n          }\n        });\n      },\n      [enqueueSnackbar, orbsAccountStore]\n    );\n\n    const unregisterGuardian = useCallback(async () => {\n      setDialogTexts({\n        title: `You are about to unregister from the Orbs Guardian role`,\n        content:\n          \"You and your Delegators will no longer be eligible for rewards\",\n        instruction: \"Are you sure ?\",\n        acceptText: \"yes\",\n        onCancelMessage: \"Action canceled\",\n      });\n      setShowModal(true);\n      setOnDialogAccept(() => async () => {\n        try {\n          await orbsAccountStore.unregisterGuardian();\n        } catch (e) {\n          enqueueSnackbar(`Error in 'Unregister guardian' TX ${e.message}`, {\n            variant: \"error\",\n          });\n        }\n      });\n    }, [enqueueSnackbar, orbsAccountStore]);\n\n    const [tabValue, setTabValue] = React.useState(TABS_IDS.info);\n\n    const guardianDetails = (\n      <GuardianDetails\n        guardianAddress={cryptoWalletIntegrationStore.mainAddress}\n        guardianInfo={orbsAccountStore.guardianInfo}\n        delegatorsShare={{\n          defaultValue:\n            orbsAccountStore.rewardsContractSettings\n              .defaultDelegatorsStakingRewardsPercent,\n          isUsingDefaultValue:\n            orbsAccountStore.isUsingDefaultDelegatorsCutPercentage,\n          maxValue:\n            orbsAccountStore.rewardsContractSettings\n              .maxDelegatorsStakingRewardsPercent,\n          value: orbsAccountStore.delegatorsCutPercentage,\n        }}\n        guardianCertificationUrl={{\n          currentGuardianDetailsUrl: orbsAccountStore.detailsPageUrl || \"\",\n          hasGuardianDetailsUrl: orbsAccountStore.hasGuardianDetailsURL,\n        }}\n        highlightInfo={tabValue === TABS_IDS.editInfo}\n        highlightDelegatorsShare={tabValue === TABS_IDS.delegatorsShare}\n        highlightCertificateUrl={tabValue === TABS_IDS.certificate}\n      />\n    );\n\n    const showDetails = tabValue !== TABS_IDS.unregister;\n\n    return (\n      <Page>\n        <ContentFitting\n          style={{\n            width: \"35rem\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n          }}\n        >\n          {/* Content  */}\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              maxWidth: \"100%\",\n              width: \"min-content\",\n              alignItems: \"center\",\n            }}\n          >\n            {/*  TODO : ORL : Make the 'Tabs' scrollable on mobile */}\n            {/*  Tabs  */}\n            <div style={{}}>\n              <Tabs\n                scrollButtons={\"auto\"}\n                value={tabValue}\n                onChange={(event, value) => setTabValue(value)}\n                variant=\"fullWidth\"\n                indicatorColor=\"secondary\"\n                textColor=\"primary\"\n                aria-label=\"icon tabs example\"\n                TabIndicatorProps={{\n                  color: \"secondary\",\n                }}\n              >\n                <Tab\n                  // textColor={\"secondary\"}\n                  // icon={<PermIdentityIcon />}\n                  label=\"Info\"\n                  aria-label=\"phone\"\n                  className={classes.tab}\n                  value={TABS_IDS.info}\n                />\n                <Tab\n                  className={classes.tab}\n                  // icon={<EditIcon />}\n                  label={\"Edit Info\"}\n                  value={TABS_IDS.editInfo}\n                  aria-label=\"phone\"\n                />\n                <Tab\n                  className={classes.tab}\n                  // icon={<MoneyIcon />}\n                  label={\"Delegators share\"}\n                  value={TABS_IDS.delegatorsShare}\n                  aria-label=\"favorite\"\n                />\n                <Tab\n                  className={classes.tab}\n                  // icon={<VerifiedUserIcon />}\n                  // label={\"Certificate URL\"}\n                  label={\"Guardian details URL\"}\n                  value={TABS_IDS.certificate}\n                  aria-label=\"favorite\"\n                />\n                <Tab\n                  className={classes.tab}\n                  // icon={<HighlightOffIcon />}\n                  label={\"Unregister\"}\n                  value={TABS_IDS.unregister}\n                  aria-label=\"person\"\n                />\n              </Tabs>\n            </div>\n            {showDetails && guardianDetails}\n\n            {/* Info */}\n            <TabPanel\n              className={classes.tabPanel}\n              value={tabValue}\n              index={TABS_IDS.info}\n              dir={theme.direction}\n            ></TabPanel>\n\n            {/* Edit Details */}\n            <TabPanel\n              className={classes.tabPanel}\n              value={tabValue}\n              index={TABS_IDS.editInfo}\n              dir={theme.direction}\n            >\n              <FormWrapper>\n                <GuardiansDetailsForm\n                  submitInfo={updateGuardianDetails}\n                  guardianInitialInfo={orbsAccountStore.guardianInfo}\n                  actionButtonTitle={\"Update\"}\n                />\n                {/*<Typography variant={\"h6\"}>*/}\n                {/*    Details Last updated: {lastUpdateDate.toLocaleString()}*/}\n                {/*</Typography>*/}\n              </FormWrapper>\n            </TabPanel>\n            {/* Edit Delegator's share */}\n            <TabPanel\n              className={classes.tabPanel}\n              value={tabValue}\n              index={TABS_IDS.delegatorsShare}\n              dir={theme.direction}\n            >\n              <FormWrapper>\n                <DelegatorsShareForm\n                  updateDelegatorsCut={updateDelegatorsShare}\n                  currentDelegatorsCut={\n                    orbsAccountStore.delegatorsCutPercentage\n                  }\n                  isUsingDefaultValue={\n                    orbsAccountStore.isUsingDefaultDelegatorsCutPercentage\n                  }\n                  delegatorsCutDefaultValue={\n                    orbsAccountStore.rewardsContractSettings\n                      .defaultDelegatorsStakingRewardsPercent\n                  }\n                  delegatorsCutMaxValue={\n                    orbsAccountStore.rewardsContractSettings\n                      .maxDelegatorsStakingRewardsPercent\n                  }\n                />\n              </FormWrapper>\n            </TabPanel>\n            {/* Edit Guardian Certification  */}\n            <TabPanel\n              className={classes.tabPanel}\n              value={tabValue}\n              index={TABS_IDS.certificate}\n              dir={theme.direction}\n            >\n              <FormWrapper>\n                <GuardiansDetailsUrlForm\n                  currentGuardianDetailsUrl={orbsAccountStore.detailsPageUrl}\n                  hasGuardianDetailsUrl={orbsAccountStore.hasGuardianDetailsURL}\n                  updateGuardianDetailsUrl={updateGuardianDetailsPage}\n                  detailsRequirementsLink={DETAILS_REQUIREMENTS_LINK}\n                />\n              </FormWrapper>\n            </TabPanel>\n            {/* Unregister */}\n            <TabPanel\n              className={classes.tabPanel}\n              value={tabValue}\n              index={TABS_IDS.unregister}\n              dir={theme.direction}\n            >\n              <UnregisterForm unregisterGuardian={unregisterGuardian} />\n            </TabPanel>\n          </div>\n\n          {/* Modal */}\n          <ActionConfirmationModal\n            title={dialogTexts.title}\n            contentText={dialogTexts.content}\n            instructionText={dialogTexts.instruction}\n            open={showModal}\n            acceptText={dialogTexts.acceptText}\n            cancelText={dialogTexts.cancelText}\n            onAccept={() => {\n              setShowModal(false);\n              onDialogAccept();\n            }}\n            onCancel={() => {\n              setShowModal(false);\n              if (dialogTexts.onCancelMessage) {\n                enqueueSnackbar(dialogTexts.onCancelMessage, {\n                  variant: \"info\",\n                  preventDuplicate: true,\n                });\n              }\n            }}\n          />\n\n          <Backdrop\n            className={classes.backdrop}\n            open={orbsAccountStore.txPending}\n          >\n            <CircularProgress color=\"inherit\" />\n          </Backdrop>\n        </ContentFitting>\n      </Page>\n    );\n  }\n);\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  dir?: string;\n  index: any;\n  value: any;\n}\n\nfunction TabPanel(props: TabPanelProps & BoxProps) {\n  const { children, value, index, ...other } = props;\n\n  return value === index ? (\n    <Box p={3} {...other}>\n      {children}\n    </Box>\n  ) : null;\n\n  // return (\n  //   <div\n  //     role=\"tabpanel\"\n  //     hidden={value !== index}\n  //     id={`full-width-tabpanel-${index}`}\n  //     aria-labelledby={`full-width-tab-${index}`}\n  //     {...other}\n  //   >\n  //     {value === index && <Box p={3}>{children}</Box>}\n  //   </div>\n  // );\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useOrbsAccountStore } from \"../../store/storeHooks\";\nimport { ErrorLoadingPage } from \"../error/ErrorLoadingPage\";\nimport { LoadingPage } from \"../loading/LoadingPage\";\nimport { GuardianRegistrationPage } from \"./guardianRegister/GuardianRegistrationPage\";\nimport { GuardianEditingPage } from \"./guardianEdit/GuardiansEditingPage\";\n\ninterface IProps {}\n\nexport const GuardiansRegisterOrEditPage = observer<\n  React.FunctionComponent<IProps>\n>((props) => {\n  const orbsAccountStore = useOrbsAccountStore();\n\n  // TODO : ORL : Organize all of this loading \"ifs\"\n  if (orbsAccountStore.errorLoading) {\n    return <ErrorLoadingPage />;\n  }\n\n  if (!orbsAccountStore.doneLoading) {\n    return <LoadingPage />;\n  }\n\n  if (orbsAccountStore.isGuardian) {\n    return <GuardianEditingPage />;\n  } else {\n    return <GuardianRegistrationPage />;\n  }\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { AppWrapper } from \"./AppWrapper\";\nimport { NoEthereumProviderPage } from \"./pages/NoEthereumProviderPage\";\nimport App from \"./App\";\n\nconst hasEthereumProvider = !!(window as any).ethereum;\n\nlet AppComponent;\n\nif (hasEthereumProvider) {\n  AppComponent = <App />;\n} else {\n  AppComponent = <NoEthereumProviderPage />;\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppWrapper appComponent={AppComponent} />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport {\n  AppBar,\n  Button,\n  Slide,\n  Toolbar,\n  Typography,\n  useScrollTrigger,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { InTextLink } from \"../InTextLink\";\nimport configs from \"../../configs\";\nimport Color from \"color\";\n\ninterface IProps {\n  version?: string;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  footerContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    // opacity: \"0.5\",\n  },\n  bottomAppBar: {\n    // paddingTop: \"1em\",\n    // paddingBottom: \"1em\",\n    // borderTop: \"2px solid #363636\",\n    height: \"3em\",\n    bottom: 0,\n    top: \"auto\",\n    backgroundColor: Color(theme.palette.primary.main).fade(0.3).toString(),\n\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    paddingRight: \"1em\",\n    paddingLeft: \"1em\",\n  },\n\n  appVersion: {\n    marginLeft: \"auto\",\n  },\n}));\n\nconst HideOnScroll = React.memo((props) => {\n  const { children } = props;\n\n  const trigger = useScrollTrigger();\n\n  console.log(trigger);\n\n  return (\n    <Slide appear={false} direction=\"up\" in={trigger}>\n      {children as any}\n    </Slide>\n  );\n});\n\n// DEV_NOTE : O.L : All of the centering (for the links) and margin (for the app version)\n//                  was done in a hacky manner, should fix it in the future.\nexport const Footer = React.memo<IProps>((props) => {\n  const classes = useStyles();\n  const { version } = props;\n\n  return (\n    <div className={classes.footerContainer}>\n      {/* TODO : This 'Toolbar' is here to keep space between content and footer, should make a better solution */}\n      <Toolbar />\n      {/*<HideOnScroll>*/}\n      <AppBar className={classes.bottomAppBar} position={\"fixed\"}>\n        {/*<Toolbar>*/}\n        <div\n          style={{\n            width: \"100%\",\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n        >\n          <div\n            style={{\n              marginRight: \"auto\",\n              marginLeft: \"auto\",\n              position: \"absolute\",\n            }}\n          >\n            <InTextLink\n              text={\"Term of use\"}\n              href={configs.termsOfUseUrl}\n              style={{ paddingInlineEnd: \"1em\", justifySelf: \"center\" }}\n            />\n            <InTextLink\n              href={configs.privacyPolicyUrl}\n              text={\"Privacy Policy\"}\n            />\n          </div>\n\n          <div className={classes.appVersion}>\n            <Typography variant={\"caption\"}>version {version}</Typography>\n          </div>\n        </div>\n      </AppBar>\n      {/*</HideOnScroll>*/}\n    </div>\n  );\n});\n","import React, { useEffect, useMemo } from \"react\";\nimport { ContentContainer } from \"./components/structure/ContentContainer\";\nimport { Route, Switch } from \"react-router-dom\";\nimport {\n  useCryptoWalletIntegrationStore,\n  useOrbsAccountStore,\n} from \"./store/storeHooks\";\nimport { observer } from \"mobx-react\";\nimport { NoEthereumProviderSection } from \"./components/ethereumConnection/NoEthereumProviderSection\";\nimport { GuardiansRegisterOrEditPage } from \"./pages/GuardiandRegisterOrEdit/GuardianRegisterOrEditPage\";\nimport { Background } from \"./components/structure/Background\";\nimport { Header } from \"./components/structure/Header\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Page } from \"./components/structure/Page\";\nimport { useSnackbar } from \"notistack\";\nimport { Footer } from \"./components/structure/Footer\";\nimport { useCryptoWalletConnectionService } from \"./services/servicesHooks\";\nimport { HEADER_HEIGHT_REM } from \"./theme/Theme\";\n\nconst useStyles = makeStyles(() => ({\n  app: {\n    // height: \"100%\",\n    // minHeight: `calc(100% - ${HEADER_HEIGHT_REM}rem)`,\n    minHeight: `100%`,\n    flex: 1,\n    backgroundColor: \"#06142e\",\n    backgroundRepeat: \"repeat-y\",\n    backgroundImage:\n      \"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)\",\n    backgroundAttachment: \"scroll\",\n    backgroundPosition: \"top center\",\n  },\n}));\n\nconst App = observer(() => {\n  const classes = useStyles();\n  const cryptoWalletIntegrationStore = useCryptoWalletIntegrationStore();\n  const cryptoWalletConnectionService = useCryptoWalletConnectionService();\n  const orbsAccountStore = useOrbsAccountStore();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const isConnected = cryptoWalletIntegrationStore.isConnectedToWallet;\n\n  const appContent = useMemo(() => {\n    if (!isConnected) {\n      return (\n        <Page>\n          <NoEthereumProviderSection\n            walletConnectionPhase={\"connect\"}\n            actionFunction={() => cryptoWalletIntegrationStore.askToConnect()}\n            isMetaMaskProvider={\n              cryptoWalletConnectionService.isMetamaskInstalled\n            }\n          />\n        </Page>\n      );\n    } else {\n      return (\n        <Switch>\n          <Route path={\"/\"}>\n            <GuardiansRegisterOrEditPage />\n          </Route>\n        </Switch>\n      );\n    }\n  }, [\n    cryptoWalletConnectionService.isMetamaskInstalled,\n    cryptoWalletIntegrationStore,\n    isConnected,\n  ]);\n\n  // Alert about TX error if happened\n  const txHadError = orbsAccountStore.txHadError;\n  useEffect(() => {\n    if (txHadError) {\n      enqueueSnackbar(\"Error in Transaction\", { variant: \"error\" });\n    }\n  }, [enqueueSnackbar, txHadError]);\n\n  // Alert about TX cancelation  if happened\n  const txCanceled = orbsAccountStore.txCanceled;\n  useEffect(() => {\n    if (txCanceled) {\n      enqueueSnackbar(\"Transaction canceled\", { variant: \"info\" });\n    }\n  }, [enqueueSnackbar, txCanceled]);\n\n  // TODO : O.L : Change background image to the orbs one.\n  return (\n    <>\n      <Header />\n      <main className={classes.app}>\n        {/*<Background />*/}\n        <ContentContainer id={\"appContainer\"}>{appContent}</ContentContainer>\n        <CssBaseline />\n      </main>\n      <Footer version={\"0.1\"} />\n    </>\n  );\n});\n\nexport default App;\n"],"sourceRoot":""}