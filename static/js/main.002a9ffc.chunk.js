(this["webpackJsonpguardian-registration"]=this["webpackJsonpguardian-registration"]||[]).push([[0],{324:function(e,t,n){e.exports=n(646)},329:function(e,t,n){},344:function(e,t){},352:function(e,t){},369:function(e,t){},371:function(e,t){},386:function(e,t){},387:function(e,t){},389:function(e,t){},390:function(e,t){},464:function(e,t){},466:function(e,t){},475:function(e,t){},477:function(e,t){},502:function(e,t){},504:function(e,t){},510:function(e,t){},511:function(e,t){},514:function(e,t){},530:function(e,t){},533:function(e,t){},547:function(e,t){},550:function(e,t){},646:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(20),o=n.n(i);n(329),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,s,u,l,d,p,m,h,f,b,v,g,y,E,w,O,x,j,k,C,T,I,S,A,R,D,P,G,W=n(185),F=n(57),q=n(8),N=n(5),L=n.n(N),M=n(16),_=n(39),U=n(10),H=n(12),B=n(21),V=(n(201),c=Object(q.action)("setWalletConnectionRequestApproved"),s=Object(q.action)("setMainAddress"),u=function(){function e(t){var n=this;Object(U.a)(this,e),this.cryptoWalletConnectionService=t,Object(_.a)(this,"walletConnectionRequestApproved",l,this),Object(_.a)(this,"hasEthereumProvider",d,this),Object(_.a)(this,"hasEventsSupport",p,this),Object(_.a)(this,"mainAddress",m,this),this.addressCheckingInterval=void 0,this.reactionToWalletConnection=void 0,this.hasEthereumProvider=t.hasEthereumProvider,this.hasEventsSupport=t.hasEventsSupport,this.reactionToWalletConnection=Object(q.reaction)((function(){return n.isConnectedToWallet}),function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&n.readInformationFromConnectedWallet();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0}),this.hasEthereumProvider&&(this.cryptoWalletConnectionService.hasEventsSupport?this.cryptoWalletConnectionService.onMainAddressChange((function(e){return n.setMainAddress(e)})):(this.cryptoWalletConnectionService.readMainAddress().then((function(e){return n.setMainAddress(e)})),this.addressCheckingInterval=setInterval((function(){return n.cryptoWalletConnectionService.readMainAddress().then((function(e){return n.setMainAddress(e)}))}),1e3)))}return Object(H.a)(e,[{key:"askToConnect",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isConnectedToWallet){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.cryptoWalletConnectionService.requestConnectionPermission();case 6:return t=e.sent,this.setWalletConnectionRequestApproved(t),e.abrupt("return",this.walletConnectionRequestApproved);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readInformationFromConnectedWallet",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readMainAddress();case 2:t=e.sent,this.setMainAddress(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWalletConnectionRequestApproved",value:function(e){this.walletConnectionRequestApproved=e}},{key:"setMainAddress",value:function(e){this.mainAddress=e}},{key:"isConnectedToWallet",get:function(){return this.hasEthereumProvider&&(this.cryptoWalletConnectionService.didUserApproveDappInThePast||this.walletConnectionRequestApproved)}}]),e}(),l=Object(B.a)(u.prototype,"walletConnectionRequestApproved",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(B.a)(u.prototype,"hasEthereumProvider",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(B.a)(u.prototype,"hasEventsSupport",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(B.a)(u.prototype,"mainAddress",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(B.a)(u.prototype,"isConnectedToWallet",[q.computed],Object.getOwnPropertyDescriptor(u.prototype,"isConnectedToWallet"),u.prototype),Object(B.a)(u.prototype,"setWalletConnectionRequestApproved",[c],Object.getOwnPropertyDescriptor(u.prototype,"setWalletConnectionRequestApproved"),u.prototype),Object(B.a)(u.prototype,"setMainAddress",[s],Object.getOwnPropertyDescriptor(u.prototype,"setMainAddress"),u.prototype),u),z=function(e){e.slice(2);return[e.slice(2,4),e.slice(4,6),e.slice(6,8),e.slice(8)].map((function(e){return parseInt(e,16)})).join(".")},K=function(e){var t=e.split(".").map((function(e){return parseInt(e).toString(16).padStart(2,"0")})).join("");return"0x".concat(t)},Y={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200},$={orbsAddr:"",ip:"",website:"",name:""},X={registrationTime:0,lastUpdateTime:0};var J=(h=Object(q.action)("setDoneLoading"),f=Object(q.action)("setErrorLoading"),b=Object(q.action)("setTxPending"),v=Object(q.action)("setTxCanceled"),g=Object(q.action)("setTxHadError"),y=Object(q.action)("setIsGuardian"),E=Object(q.action)("setGuardianInfo"),w=Object(q.action)("setGuardianRegistrationTimes"),O=Object(q.action)("setRewardDistributionFrequencyInHours"),x=Object(q.action)("setEthereumBalance"),j=function(){function e(t,n,r){var a=this;Object(U.a)(this,e),this.cryptoWalletIntegrationStore=t,this.guardiansV2Service=n,this.cryptoWalletConnectionService=r,Object(_.a)(this,"doneLoading",k,this),Object(_.a)(this,"errorLoading",C,this),Object(_.a)(this,"txPending",T,this),Object(_.a)(this,"txHadError",I,this),Object(_.a)(this,"txCanceled",S,this),Object(_.a)(this,"isGuardian",A,this),Object(_.a)(this,"guardianInfo",R,this),Object(_.a)(this,"guardianContractInteractionTimes",D,this),Object(_.a)(this,"rewardDistributionFrequencyInHours",P,this),Object(_.a)(this,"ethBalance",G,this),this.addressChangeReaction=void 0,this.addressChangeReaction=Object(q.reaction)((function(){return a.cryptoWalletIntegrationStore.mainAddress}),function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setDoneLoading(!1),e.next=3,a.reactToConnectedAddressChanged(t);case 3:a.setDoneLoading(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{fireImmediately:!0})}return Object(H.a)(e,[{key:"handlePromievent",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n,r=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"A promivent",this.resetTxIndicators(),this.setTxPending(!0),console.log("Waiting for promievent of ".concat(n)),e.prev=4,e.next=7,t;case 7:return e.sent,console.log("Got Results for promievent of ".concat(n)),e.abrupt("return");case 12:if(e.prev=12,e.t0=e.catch(4),e.t0.code!==Y.userRejectedRequest){e.next=18;break}this.setTxCanceled(!0),e.next=19;break;case 18:throw e.t0;case 19:return e.prev=19,this.setTxPending(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,12,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.guardiansV2Service.registerGuardian(t),e.next=4,this.handlePromievent(n,"Register guardian");case 4:return e.next=6,this.manuallyReadAccountData();case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed registering guardian ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.guardiansV2Service.updateGuardianInfo(t),e.next=4,this.handlePromievent(n,"Update guardian");case 4:return e.sent,e.next=7,this.manuallyReadAccountData();case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(0),this.setTxHadError(!0),console.error("Failed updating guardian info ".concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuardianDistributionFrequency",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=3600*t,r=this.guardiansV2Service.setGuardianDistributionFrequency(n),e.prev=2,e.next=5,this.handlePromievent(r,"Set distribution frequency");case 5:return e.next=7,this.manuallyReadAccountData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed setting distribution frequency ".concat(e.t0)),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reactToConnectedAddressChanged",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.setDefaultAccountAddress(t),this.cryptoWalletIntegrationStore.hasEventsSupport&&this.refreshAccountListeners(t),e.prev=3,e.next=6,this.readDataForAccount(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.failLoadingProcess(e.t0),console.error("Error in reacting to address change in Orbs Account Store",e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultAccountAddress",value:function(e){this.guardiansV2Service.setFromAccount(e)}},{key:"manuallyReadAccountData",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readDataForAccount(this.cryptoWalletIntegrationStore.mainAddress);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this.failLoadingProcess(e.t0),console.error("Error in manually reading address data in Orbs Account Store",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"readDataForAccount",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.readAndSetIsGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error read-n-set isGuardian ".concat(e.t0));case 8:this.isGuardian&&(this.readAndSetGuardianInfo(t).catch((function(e){return console.error("Error read-n-set Guardian Info ".concat(e))})),this.readAndSetRewardsDistributionFrequency(t).catch((function(e){return console.error("Error read-n-set Rewards Frequency ".concat(e))}))),this.readAndSetEthereumBalance(t).catch((function(e){return console.error("Error read-n-set Ethereum balance ".concat(e))}));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetIsGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansV2Service.isRegisteredGuardian(t);case 2:n=e.sent,this.setIsGuardian(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.guardiansV2Service.readGuardianInfo(t).then((function(e){var t=e.name,r=e.website,a=e.orbsAddr,i=e.ip,o=e.registrationTime,c=e.lastUpdateTime,s={name:t,website:r,ip:z(i),orbsAddr:a},u={registrationTime:o,lastUpdateTime:c};n.setGuardianInfo(s),n.setGuardianContractInteractionTimes(u)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetRewardsDistributionFrequency",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansV2Service.readGuardianDistributionFrequencyInSeconds(t);case 2:n=e.sent,r=n/3600,this.setRewardDistributionFrequencyInHours(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readAndSetEthereumBalance",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoWalletConnectionService.readEthereumBalance(t);case 2:n=e.sent,this.setEthereumBalance(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAccountListeners",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cancelAllCurrentSubscriptions();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllCurrentSubscriptions",value:function(){}},{key:"failLoadingProcess",value:function(e){this.setErrorLoading(!0),this.setDoneLoading(!0)}},{key:"resetTxIndicators",value:function(){this.setTxPending(!1),this.setTxHadError(!1),this.setTxCanceled(!1)}},{key:"setDoneLoading",value:function(e){this.doneLoading=e}},{key:"setErrorLoading",value:function(e){this.errorLoading=e}},{key:"setTxPending",value:function(e){this.txPending=e}},{key:"setTxCanceled",value:function(e){this.txCanceled=e}},{key:"setTxHadError",value:function(e){this.txHadError=e}},{key:"setIsGuardian",value:function(e){this.isGuardian=e}},{key:"setGuardianInfo",value:function(e){this.guardianInfo=e}},{key:"setGuardianContractInteractionTimes",value:function(e){this.guardianContractInteractionTimes=e}},{key:"setRewardDistributionFrequencyInHours",value:function(e){this.rewardDistributionFrequencyInHours=e}},{key:"setEthereumBalance",value:function(e){this.ethBalance=e}},{key:"isUsingDefaultRewardFrequency",get:function(){return 0===this.rewardDistributionFrequencyInHours}}]),e}(),k=Object(B.a)(j.prototype,"doneLoading",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Object(B.a)(j.prototype,"errorLoading",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=Object(B.a)(j.prototype,"txPending",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Object(B.a)(j.prototype,"txHadError",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=Object(B.a)(j.prototype,"txCanceled",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=Object(B.a)(j.prototype,"isGuardian",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(B.a)(j.prototype,"guardianInfo",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $}}),D=Object(B.a)(j.prototype,"guardianContractInteractionTimes",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X}}),P=Object(B.a)(j.prototype,"rewardDistributionFrequencyInHours",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Object(B.a)(j.prototype,"ethBalance",[q.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(j.prototype,"isUsingDefaultRewardFrequency",[q.computed],Object.getOwnPropertyDescriptor(j.prototype,"isUsingDefaultRewardFrequency"),j.prototype),Object(B.a)(j.prototype,"setDoneLoading",[h],Object.getOwnPropertyDescriptor(j.prototype,"setDoneLoading"),j.prototype),Object(B.a)(j.prototype,"setErrorLoading",[f],Object.getOwnPropertyDescriptor(j.prototype,"setErrorLoading"),j.prototype),Object(B.a)(j.prototype,"setTxPending",[b],Object.getOwnPropertyDescriptor(j.prototype,"setTxPending"),j.prototype),Object(B.a)(j.prototype,"setTxCanceled",[v],Object.getOwnPropertyDescriptor(j.prototype,"setTxCanceled"),j.prototype),Object(B.a)(j.prototype,"setTxHadError",[g],Object.getOwnPropertyDescriptor(j.prototype,"setTxHadError"),j.prototype),Object(B.a)(j.prototype,"setIsGuardian",[y],Object.getOwnPropertyDescriptor(j.prototype,"setIsGuardian"),j.prototype),Object(B.a)(j.prototype,"setGuardianInfo",[E],Object.getOwnPropertyDescriptor(j.prototype,"setGuardianInfo"),j.prototype),Object(B.a)(j.prototype,"setGuardianContractInteractionTimes",[w],Object.getOwnPropertyDescriptor(j.prototype,"setGuardianContractInteractionTimes"),j.prototype),Object(B.a)(j.prototype,"setRewardDistributionFrequencyInHours",[O],Object.getOwnPropertyDescriptor(j.prototype,"setRewardDistributionFrequencyInHours"),j.prototype),Object(B.a)(j.prototype,"setEthereumBalance",[x],Object.getOwnPropertyDescriptor(j.prototype,"setEthereumBalance"),j.prototype),j);n(330);var Q=n(100),Z=n.n(Q),ee=n(41),te=function(){function e(t){Object(U.a)(this,e),this.ethereum=t,this.web3=void 0,this.hasEthereumProvider=void 0,this.hasEventsSupport=void 0,this.isMetamaskInstalled=void 0,this.isSemiCompliantEthereumProviderInstalled=void 0,this.hasEthereumProvider=void 0!==this.ethereum,this.isMetamaskInstalled=this.hasEthereumProvider&&!!this.ethereum.isMetaMask,this.isSemiCompliantEthereumProviderInstalled=this.hasEthereumProvider&&!this.ethereum.isMetaMask,this.hasEthereumProvider&&(this.web3=new Z.a(this.ethereum));var n=this.hasEthereumProvider?this.ethereum.on:void 0;this.hasEventsSupport=void 0!==n&&null!==n}return Object(H.a)(e,[{key:"requestConnectionPermission",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ethereum.enable();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"getIsMainNetwork",value:function(){var e=Object(M.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isMetamaskInstalled&&"1"===this.ethereum.networkVersion);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readEthereumBalance",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n,r,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this.web3)||void 0===n?void 0:n.eth.getBalance(t);case 2:return r=e.sent,a=parseInt(Object(ee.fromWei)(r||"0")),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readMainAddress",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.web3)||void 0===t?void 0:t.eth.getAccounts();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,e.abrupt("return",n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readCurrentBlockNumber",value:function(){var e=Object(M.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(t=this.web3)||void 0===t?void 0:t.eth.getBlockNumber())||0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMainAddressChange",value:function(e){var t=this;if(!this.hasEventsSupport)throw new Error("Cannot subscribe to events with given Ethereum provider");var n=function(t){return e(t[0])};return this.ethereum.on("accountsChanged",n),function(){t.ethereum.off("accountsChanged",n)}}},{key:"didUserApproveDappInThePast",get:function(){return this.isMetamaskInstalled&&!!this.ethereum.selectedAddress}}]),e}(),ne=n(187),re=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ETHEREUM_NETWORK,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_INFURA_KEY),ae={urlBase:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PUBLIC_BASE_PATH||"",v2contractsAddressesOverride:{},ETHEREUM_PROVIDER_WS:"wss://mainnet.infura.io/ws/v3/".concat(re),privacyPolicyUrl:"https://www.orbs.com/guardian-portal-privacy-policy/",termsOfUseUrl:"https://www.orbs.com/guardian-portal-terms-of-use/"},ie=n(84),oe="".concat("https","://").concat("validator.orbs.com","/vchains/").concat(11e5.toString());var ce=n(300),se=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0xd095e7310616376BDeD74Afc7e0400E6d0894E6F";Object(U.a)(this,e),this.web3=t,this.guardiansRegistrationContract=void 0,console.log({guardiansRegistrationAddress:n}),this.guardiansRegistrationContract=new this.web3.eth.Contract(ce.abi,n)}return Object(H.a)(e,[{key:"setFromAccount",value:function(e){this.guardiansRegistrationContract.options.from=e}},{key:"isRegisteredGuardian",value:function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.guardiansRegistrationContract.methods.isRegistered(t).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readGuardianInfo",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n,r,a,i,o,c,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansRegistrationContract.methods.getGuardianData(t).call();case 2:return n=e.sent,r=n.registration_time,a=n.orbsAddr,i=n.name,o=n.last_update_time,c=n.ip,n.contact,s=n.website,u={ip:c,lastUpdateTime:parseInt(o),name:i,orbsAddr:a,registrationTime:parseInt(r),website:s},e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readGuardianDistributionFrequencyInSeconds",value:function(){var e=Object(M.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.guardiansRegistrationContract.methods.getMetadata(t,"REWARDS_FREQUENCY_SEC").call();case 2:if((n=e.sent)&&n.length){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",parseInt(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuardianDistributionFrequency",value:function(e){return this.guardiansRegistrationContract.methods.setMetadata("REWARDS_FREQUENCY_SEC",e.toString()).send()}},{key:"registerGuardian",value:function(e){var t=e.website,n=e.name,r=e.orbsAddr,a=e.ip,i=K(a);return this.guardiansRegistrationContract.methods.registerGuardian(i,r,n,t," ").send()}},{key:"updateGuardianInfo",value:function(e){var t=e.ip,n=e.name,r=e.orbsAddr,a=e.website,i=K(t);return this.guardiansRegistrationContract.methods.updateGuardian(i,r,n,a," ").send()}}]),e}();var ue=n(133),le=n(679),de=n(301),pe=n.n(de),me=n(184),he=n.n(me),fe=pe()(he()({palette:{primary:{main:"#09142c"},secondary:{main:"#74f6fd"},text:{primary:"#dbdbdb",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},background:{default:"#16317d"},action:{active:"#dbdbdb",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",hover:"rgba(255, 255, 255, 0.08)",selected:"rgba(255, 255, 255, 0.16)"},divider:"rgba(255, 255, 255, 0.12)"},typography:{},overrides:{MuiPaper:{root:{}},MuiTypography:{colorPrimary:{}},MuiLink:{root:{}}}})),be=n(99);Object(q.configure)({enforceActions:"observed"});var ve=function(e){var t,n=function(){var e=Object(ie.createAccount)(),t=e.publicKey,n=e.privateKey,r=new ie.LocalSigner({publicKey:t,privateKey:n});return new ie.Client(oe,11e5,ie.NetworkType.NETWORK_TYPE_TEST_NET,r)}(),r=new ne.OrbsClientService(n);return t=e?new Z.a(e):new Z.a(new Z.a.providers.WebsocketProvider(ae.ETHEREUM_PROVIDER_WS)),{cryptoWalletIntegrationService:new te(e),guardiansV2Service:new se(t,ae.v2contractsAddressesOverride.guardiansRegistration),guardiansService:new ne.GuardiansService(t,r)}}(window.ethereum),ge=function(e,t){var n=new V(e);return{cryptoWalletIntegrationStore:n,orbsAccountStore:new J(n,t,e)}}(ve.cryptoWalletIntegrationService,ve.guardiansV2Service),ye=a.a.memo((function(e){console.log("Wrapper render");var t=e.appComponent;return a.a.createElement(W.a,null,a.a.createElement(F.b,Object.assign({},ge,ve),a.a.createElement(ue.b,{injectFirst:!0},a.a.createElement(le.a,{theme:fe},a.a.createElement(be.a,{maxSnack:3},t)))))})),Ee=n(686),we=n(24),Oe=n(651),xe=n(681),je=n(678),ke=n(680),Ce=n(692),Te=n(305),Ie=n(145),Se=Object(je.a)((function(e){return{link:{color:e.palette.secondary.light,"&:hover":{color:e.palette.secondary.dark}}}})),Ae=a.a.memo((function(e){var t=Se(),n=e.text,r=e.href,i=Object(Ie.a)(e,["text","href"]);return a.a.createElement("a",Object.assign({className:t.link,href:r||"",target:"_blank",rel:"noopener noreferrer"},i),n)})),Re=a.a.memo((function(e){var t=e.value,n=e.onValueChange,r=Object(Te.renderToString)(a.a.createElement(le.a,{theme:fe},a.a.createElement(Oe.a,null,"I agree to the"," ",a.a.createElement(Ae,{href:ae.termsOfUseUrl,text:"Terms of Use"})," and"," ",a.a.createElement(Ae,{href:ae.privacyPolicyUrl,text:"Privacy Policy"}))));return a.a.createElement(ke.a,{style:{marginTop:"0.5rem"},control:a.a.createElement(Ce.a,{checked:t,onChange:function(e){return n(e.target.checked)},name:"legalTicker"}),label:a.a.createElement(Oe.a,{dangerouslySetInnerHTML:{__html:r}})})})),De=n(306),Pe=n.n(De),Ge=Object(je.a)((function(e){return{boldText:{fontWeight:"bold",display:"contents",color:e.palette.secondary.main}}})),We=a.a.memo((function(e){var t=e.children,n=Ge();return a.a.createElement("div",{className:n.boldText},t)})),Fe=Pe()((function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"start",padding:"0.5em"},textsList:{listStylePosition:"outside",paddingLeft:"1.5rem","& li":{margin:"0 0 0.2rem 0"},"& li:last-child":{margin:0}}}})),qe=a.a.memo((function(e){var t=Fe(),n=e.conceptName,r=e.details,i=e.caption,o=Object(Ie.a)(e,["conceptName","details","caption"]);return a.a.createElement("div",Object.assign({className:t.container},o),a.a.createElement(Oe.a,null,"Your ",a.a.createElement(We,null,n,":")),a.a.createElement("ul",{className:t.textsList},r.map((function(e){return a.a.createElement("li",{key:e.toString()},a.a.createElement(Oe.a,{variant:i?"caption":"body2"},e))}))))})),Ne=["Represents the Guardian in the Guardians list","Used by Delegators to delegate to the Guardian","Holds the Guardian's self-delegated stake","Receives the Guardians rewards"],Le=[a.a.createElement(a.a.Fragment,null,"Should be different from the ",a.a.createElement(We,null,"Guardian address")),"Used by the node to sign blocks on Orbs blockchain","Holds ETH for node automated transactions gas","A minimal balance of 1 ETH is required upon registration","Does NOT hold your Guardian ORBS tokens"],Me=Object(je.a)((function(e){return{noEthereumProviderSection:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"2em",backgroundColor:"rgba(0,0,0, 0.2)",borderRadius:"5%",width:"fit-content",maxWidth:"90%",boxSizing:"border-box"}}})),_e=a.a.memo((function(e){var t=Me(),n=e.walletConnectionPhase,i=e.actionFunction,o=(e.pressedOnInstall,e.isMetaMaskProvider),c=Object(r.useState)(!1),s=Object(we.a)(c,2),u=s[0],l=s[1],d="connect"===n;console.log({tickerValue:u});var p=Object(r.useMemo)((function(){return{shouldDisplayLegalTicker:d,hasExtraDetailsSection:d,buttonIsEnabled:!d||u,isInstall:"install"===n}}),[d,u,n]),m=p.shouldDisplayLegalTicker,h=p.isInstall,f=p.buttonIsEnabled,b=p.hasExtraDetailsSection,v=Object(r.useMemo)((function(){return{titleText:h?"No Ethereum provider detected":"".concat(o?"MetaMask":"Account"," connection required"),subTitleText:h?"you should install MetaMask and refresh the page":a.a.createElement(a.a.Fragment,null,"To begin, please connect with your"," ",a.a.createElement(We,null,"Guardian address.")),buttonText:"install"===n?"Install":"Connect"}}),[h,o,n]),g=v.titleText,y=v.buttonText,E=v.subTitleText;return a.a.createElement("div",{className:t.noEthereumProviderSection},a.a.createElement(Oe.a,{style:{marginBottom:"0.5rem"},variant:"h4"},g),a.a.createElement(Oe.a,{style:{marginBottom:"1rem"}},E),b&&a.a.createElement(qe,{conceptName:"Guardian Address",details:Ne}),a.a.createElement(xe.a,{variant:"outlined",onClick:i,disabled:!f},y),m&&a.a.createElement(Re,{value:u,onValueChange:l}))})),Ue=n(694),He=n(682),Be=n(683),Ve=n(307),ze=n.n(Ve),Ke=Object(je.a)((function(e){return{centeredContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"}}})),Ye=a.a.memo((function(e){var t=Ke(),n=ze()(),r=Object(He.a)(n.breakpoints.down("sm"));return a.a.createElement(Be.a,Object.assign({className:t.centeredContainer,component:"main",disableGutters:r},e))})),$e=n(684),Xe=n(685),Je=Object(je.a)((function(e){return{appBar:{height:"".concat(5,"rem"),paddingTop:"0.5rem",paddingBottom:"0.5rem",boxSizing:"border-box"},title:{flexGrow:1,textAlign:"center",marginTop:"1em",marginBottom:"1em"}}})),Qe=a.a.memo((function(e){var t=Je();return a.a.createElement($e.a,{className:t.appBar,position:"fixed"},a.a.createElement(Xe.a,null,a.a.createElement("div",{className:t.title},a.a.createElement(Oe.a,{variant:"h5"},"ORBS Guardians Portal"))))})),Ze=Object(je.a)((function(e){return{page:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"100%",boxSizing:"border-box",padding:"2em",height:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),et=a.a.memo((function(e){var t=e.children,n=Ze();return a.a.createElement("div",{className:n.page},a.a.createElement(Xe.a,null),t)})),tt=Object(je.a)((function(e){return{app:{minHeight:"100%",flex:1,backgroundColor:"#06142e",backgroundRepeat:"repeat-y",backgroundImage:"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)",backgroundAttachment:"scroll",backgroundPosition:"top center"}}})),nt=a.a.memo((function(e){var t=tt(),n=Object(Ue.a)(!1),i=Object(r.useCallback)((function(){window.open("https://metamask.io/","_blank"),n.setTrue()}),[n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Qe,null),a.a.createElement("main",{className:t.app},a.a.createElement(Ye,{id:"appContainer"},a.a.createElement(et,null,a.a.createElement(_e,{walletConnectionPhase:"install",actionFunction:i}))),a.a.createElement(Ee.a,null)))})),rt=n(28);function at(){return a.a.useContext(F.a)}function it(){return at().cryptoWalletIntegrationStore}function ot(){return at().orbsAccountStore}var ct=n(693),st=n(687),ut=n(51),lt=n(691),dt=n(144),pt=Object(je.a)((function(e){return{helperText:{color:e.palette.secondary.main},textsList:{listStylePosition:"outside",paddingLeft:"1rem"}}})),mt=a.a.memo((function(e){var t=pt(),n=e.helperTexts;e.header,n.length;return a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:t.textsList},n.map((function(e,n){return a.a.createElement(a.a.Fragment,{key:"fragment_".concat(e)},a.a.createElement("li",{id:n.toString(),key:e.toString(),className:t.helperText},a.a.createElement(Oe.a,{style:{wordWrap:"break-word"},variant:"caption"},e)))}))))})),ht=/^0x[a-fA-F0-9]{40}$/,ft=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,bt=["The name that the Guardian will be recognized by."],vt=["The Guardian website is used by Delegators when selecting a Guardian."],gt=["A valid IPv4 address is required to allow the Guardian\u2019s node to connect to the network gossip topology."],yt=[a.a.createElement(a.a.Fragment,null,"Should be different from the"," ",a.a.createElement("div",{style:{display:"contents",fontWeight:"bold"}},"Guardian address"),"."),"Used by the Orbs node to automatically send transactions such as ReadyForCommittee.","Used to sign blocks on Orbs platform.","Should hold ETH for the automated transactions gas (A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian).","The Orbs Node address should differ from the Guardian address."];function Et(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}var wt=Object(je.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}}}})),Ot=a.a.memo((function(e){var t=wt(),n=(e.guardianAddress,e.guardianInitialInfo),i=e.submitInfo,o=e.actionButtonTitle,c=e.disableSubmit,s=e.messageForSubmitButton,u=Object(dt.a)(),l=u.register,d=u.handleSubmit,p=u.errors,m=Object(st.a)(n.name),h=Object(st.a)(n.website),f=Object(st.a)(n.ip),b=Object(st.a)(n.orbsAddr),v=!!p.nodeAddress,g=!!p.ipAddress,y=!!p.website,E=m.setValue,w=h.setValue,O=f.setValue,x=b.setValue;Object(r.useEffect)((function(){n&&(console.log("Re-setting data"),E(n.name),w(n.website),O(n.ip),x(n.orbsAddr))}),[n,O,E,x,w]);var j=Object(ut.a)(),k=Object(He.a)(j.breakpoints.down("xs"));console.log(k);Object(r.useCallback)((function(e,t,n){var r;return n&&(r=a.a.createElement(mt,{helperTexts:n})),e&&t&&(r=t),r}),[]);var C=Object(r.useCallback)((function(e){var t={ip:e.ipAddress,orbsAddr:e.nodeAddress,name:e.name,website:e.website};i(t)}),[i]);return a.a.createElement("form",{onSubmit:d((function(e){return C(e)})),style:{maxWidth:"100%",width:"100%"}},a.a.createElement(lt.a,{InputLabelProps:{style:{pointerEvents:"auto"}},name:"name",label:"Guardian name",placeholder:"e.g: Number One ORBS Guardian",title:bt[0],value:m.value,onChange:function(e){return m.setValue(e.target.value)},required:!0,inputRef:l,fullWidth:!0,className:t.textField}),a.a.createElement("br",null),a.a.createElement(lt.a,{fullWidth:!0,name:"website",label:"Guardian website",placeholder:"e.g: https://www.number1guardian.com",title:vt[0],helperText:y&&"Please use a valid URL",value:h.value,onChange:function(e){return h.setValue(e.target.value)},required:!0,error:y,inputRef:l({validate:Et}),className:t.textField}),a.a.createElement("br",null),a.a.createElement(lt.a,{fullWidth:!0,name:"ipAddress",label:"Node IP",placeholder:"e.g: 123.17.46.251",title:gt[0],value:f.value,onChange:function(e){return f.setValue(e.target.value)},required:!0,inputRef:l({pattern:ft}),error:g,helperText:g&&"Please use a valid IPV4 address",className:t.textField}),a.a.createElement("br",null),a.a.createElement(lt.a,{name:"nodeAddress",label:"Node address",placeholder:"e.g: 0x0cBb46287c93357be4CF60fe9601c2c7A2700dC2",title:yt[1],value:b.value,onChange:function(e){return b.setValue(e.target.value)},error:v,helperText:v&&"Please use a valid address",required:!0,inputRef:l({pattern:ht}),fullWidth:!0,className:t.textField}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(xe.a,{variant:"outlined",fullWidth:!0,type:"submit",disabled:c},o),a.a.createElement("br",null),a.a.createElement("br",null),s&&a.a.createElement(Oe.a,{variant:"body2",color:"error",style:{width:"fit-content"}},s))})),xt=n(696),jt=n(308),kt=n.n(jt),Ct=n(143),Tt=Object(je.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),It=a.a.memo((function(e){var t=Tt(),n=e.guardianInfo,i=e.guardianAddress,o=e.updateGuardianDetails,c=e.guardianContractInteractionTimes,s=c.lastUpdateTime,u=c.registrationTime,l=(Object(r.useMemo)((function(){return Object(ct.a)(u)}),[u]),Object(r.useMemo)((function(){return Object(ct.a)(s)}),[s]));return a.a.createElement(a.a.Fragment,null,a.a.createElement(xt.a,{className:t.avatar},a.a.createElement(kt.a,null)),a.a.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignContent:"center",overflow:"hidden"}},a.a.createElement(Oe.a,{variant:"h5"},"Guardian details update"),a.a.createElement(Oe.a,{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},i)),a.a.createElement(Ot,{guardianAddress:i,submitInfo:o,guardianInitialInfo:n,actionButtonTitle:"Update"}),a.a.createElement("br",null),a.a.createElement(Ct.Transition,{items:l,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"},update:{opacity:1}},(function(e){return function(e){return a.a.createElement(Oe.a,{variant:"h6",style:e},"Details Last updated: ",l.toLocaleString())}})),a.a.createElement("br",null))})),St=n(309),At=n.n(St),Rt=Object(je.a)((function(e){return{container:{padding:"0.5rem 0",display:"flex",flexDirection:"column",flexWrap:"wrap",justifyItems:"center",justifyContent:"center"}}})),Dt=a.a.memo((function(e){var t=Rt(),n=e.children;return a.a.createElement("div",{className:t.container},n)})),Pt=a.a.memo((function(e){return a.a.createElement(Dt,null,a.a.createElement(We,null,"Please Notice:"),a.a.createElement(qe,{conceptName:"Guardian Address",details:Ne}),a.a.createElement(qe,{conceptName:"Node Address",details:Le}))})),Gt=Object(je.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"},boldText:{fontWeight:"bold",display:"contents"}}})),Wt={orbsAddr:"",ip:"",website:"",name:""},Ft=a.a.memo((function(e){var t=Gt(),n=e.guardianAddress,i=e.registerGuardian,o=e.cryptoWalletConnectionService,c=Object(r.useState)(void 0),s=Object(we.a)(c,2),u=s[0],l=s[1],d=Object(r.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orbsAddr.toLowerCase()!==n.toLowerCase()){e.next=3;break}return l("Your Orbs node address cannot be the same as your Guardian address ".concat(n)),e.abrupt("return");case 3:return e.next=5,o.readEthereumBalance(t.orbsAddr);case 5:if(!(e.sent<1)){e.next=9;break}return l("A minimal balance of 1 Ether at the 'Node Address' is required in order to register as a guardian."),e.abrupt("return");case 9:i(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,n,i]);return a.a.createElement("div",{id:"RegisterGuardianSection",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"min-content",maxWidth:"100%"}},a.a.createElement(xt.a,{className:t.avatar},a.a.createElement(At.a,null)),a.a.createElement("div",{style:{maxWidth:"100%",textAlign:"center"}},a.a.createElement(Oe.a,{variant:"h5"},"Guardian Registration"),a.a.createElement(Oe.a,{variant:"h6"},"Your ",a.a.createElement("div",{className:t.boldText},"Guardian address "),"is:"),a.a.createElement(Oe.a,{style:{textOverflow:"ellipsis",overflow:"hidden"}},n)),a.a.createElement(Pt,null),a.a.createElement(Ot,{guardianAddress:n,submitInfo:d,guardianInitialInfo:Wt,actionButtonTitle:"Register",messageForSubmitButton:u}))})),qt=n(688),Nt=n(697),Lt=n(689),Mt=n(190),_t=n(695),Ut=Object(je.a)((function(e){return{textField:{"& label.Mui-focused":{color:"#f5f5f5"}}}})),Ht=a.a.memo((function(e){var t=Ut(),n=e.currentFrequencyInHours,i=e.updateRewardsFrequency,o=e.isUsingDefaultValue,c=Object(Ue.a)(!1),s=Object(_t.a)(Math.max(n,12),{lowerLimit:12}),u=s.setValue;Object(r.useEffect)((function(){u(Math.max(n,12))}),[n,u]);var l=Object(dt.a)(),d=l.register,p=l.handleSubmit,m=!!l.errors.rewardsFrequencyInHours,h=Object(r.useCallback)((function(e){i(e.rewardsFrequencyInHours)}),[i]),f=Math.floor(n/24),b=Math.floor(n%24),v=0===f?"":1===f?"1 day and":"".concat(f," days"),g=0===b?"":1===b?"1 hour":"".concat(b," hours"),y=""!==v&&""!==g?" and ":"",E=""!==v?" (".concat(n," hours)"):"",w="".concat(v).concat(y).concat(g).concat(E);o||"Current distribution frequency is once every ".concat(w);return a.a.createElement("form",{style:{maxWidth:"100%",width:"100%"},onSubmit:p(h)},a.a.createElement(Oe.a,{variant:"body1",style:{display:"inline"}},"Current distribution frequency is once every"," "),a.a.createElement(Oe.a,{variant:"body1",style:{display:"inline",fontWeight:"bold"}},w),a.a.createElement("br",null),a.a.createElement(Ct.Transition,{items:c.value,initial:null,from:{opacity:0},enter:{opacity:1},leave:{opacity:0,display:"none"}},(function(e){return e?function(e){return a.a.createElement("div",{style:Object(Mt.a)(Object(Mt.a)({},e),{},{maxWidth:"100%",width:"100%"})},a.a.createElement(lt.a,{fullWidth:!0,name:"rewardsFrequencyInHours",title:"Rewards Frequency in hours - Minimum ".concat(12," hours"),label:"Rewards Frequency in hours",value:s.value,onChange:function(e){return s.setValue(parseInt(e.target.value)||0)},required:!0,type:"number",inputRef:d({min:12}),error:m,helperText:m?"Minimum frequency is 12 hours":"Default frequency is 14 days (336 hours), cannot be lower than half a day (12 hours)",className:t.textField}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(xe.a,{variant:"outlined",type:"submit",fullWidth:!0},"Update"))}:function(e){return a.a.createElement(xe.a,{onClick:c.setTrue,variant:"outlined",fullWidth:!0,style:e},"Set to other value")}})))})),Bt=n(310),Vt=n.n(Bt),zt=Object(je.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main,marginLeft:"auto",marginRight:"auto"}}})),Kt=a.a.memo((function(e){var t=zt(),n=e.isUsingDefaultValue,r=e.currentFrequencyInHours,i=e.updateRewardsFrequency;return a.a.createElement(a.a.Fragment,null,a.a.createElement(xt.a,{className:t.avatar},a.a.createElement(Vt.a,null)),a.a.createElement(Oe.a,{variant:"h5"},"Rewards Distribution Frequency"),a.a.createElement(Ht,{currentFrequencyInHours:r,updateRewardsFrequency:i,isUsingDefaultValue:n}))})),Yt=Object(je.a)((function(e){return{contentFitter:{height:"100%",width:"fit-content",maxWidth:"100%"}}})),$t=a.a.memo((function(e){var t=Yt(),n=e.children;return a.a.createElement("div",{className:t.contentFitter},n)}));function Xt(){var e=a.a.useContext(F.a);if(!e)throw new Error("Tried to use services before initialising them");return e}function Jt(){return Xt().cryptoWalletIntegrationService}var Qt,Zt=Object(je.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),en=Object(F.c)((function(e){var t,n=Zt(),i=Object(be.b)().enqueueSnackbar,o=ot(),c=it(),s=Jt(),u=Object(r.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.updateGuardianInfo(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Guardian Details Update' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o]),l=Object(r.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.setGuardianDistributionFrequency(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Rewards Frequency Update' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o]),d=Object(r.useCallback)(function(){var e=Object(M.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.registerGuardian(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i("Error in 'Guardian Registration' TX ".concat(e.t0.message),{variant:"error"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i,o]);return o.errorLoading?a.a.createElement(et,null,a.a.createElement($t,null,a.a.createElement(Oe.a,null,"Error loading"))," "):o.doneLoading?(t=o.isGuardian?a.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%",width:"min-content",textAlign:"center"}},a.a.createElement(It,{guardianInfo:o.guardianInfo,guardianAddress:c.mainAddress,guardianContractInteractionTimes:o.guardianContractInteractionTimes,updateGuardianDetails:u}),a.a.createElement(qt.a,{style:{width:"100%",height:"3px"}}),a.a.createElement(Kt,{currentFrequencyInHours:o.rewardDistributionFrequencyInHours,updateRewardsFrequency:l,isUsingDefaultValue:o.isUsingDefaultRewardFrequency})):a.a.createElement(Ft,{registerGuardian:d,guardianAddress:c.mainAddress,cryptoWalletConnectionService:s}),a.a.createElement(et,null,a.a.createElement($t,null,a.a.createElement("div",{style:{display:"flex",maxWidth:"100%"}},t),a.a.createElement(Nt.a,{className:n.backdrop,open:o.txPending},a.a.createElement(Lt.a,{color:"inherit"}))))):a.a.createElement(et,null,a.a.createElement($t,null,a.a.createElement(Oe.a,null,"Loading..."))," ")})),tn=n(690),nn=n(675),rn=n(311),an=n.n(rn),on=Object(je.a)((function(e){return{footerContainer:{position:"absolute",bottom:0},bottomAppBar:{height:"3em",bottom:0,top:"auto",backgroundColor:an()(e.palette.primary.main).fade(.3).toString(),display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:"1em",paddingLeft:"1em"},appVersion:{marginLeft:"auto"}}})),cn=(a.a.memo((function(e){var t=e.children,n=Object(tn.a)();return console.log(n),a.a.createElement(nn.a,{appear:!1,direction:"up",in:n},t)})),a.a.memo((function(e){var t=on(),n=e.version;return a.a.createElement("div",{className:t.footerContainer},a.a.createElement(Xe.a,null),a.a.createElement($e.a,{className:t.bottomAppBar,position:"fixed"},a.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},a.a.createElement("div",{style:{marginRight:"auto",marginLeft:"auto",position:"absolute"}},a.a.createElement(Ae,{text:"Term of use",href:ae.termsOfUseUrl,style:{paddingInlineEnd:"1em",justifySelf:"center"}}),a.a.createElement(Ae,{href:ae.privacyPolicyUrl,text:"Privacy Policy"})),a.a.createElement("div",{className:t.appVersion},a.a.createElement(Oe.a,{variant:"caption"},"version ",n)))))}))),sn=Object(je.a)((function(){return{app:{minHeight:"100%",flex:1,backgroundColor:"#06142e",backgroundRepeat:"repeat-y",backgroundImage:"url(https://www.orbs.com/wp-content/uploads/2019/02/technology-background1.png)",backgroundAttachment:"scroll",backgroundPosition:"top center"}}})),un=Object(F.c)((function(){var e=sn(),t=it(),n=Jt(),i=ot(),o=Object(be.b)().enqueueSnackbar,c=t.isConnectedToWallet,s=Object(r.useMemo)((function(){return c?a.a.createElement(rt.c,null,a.a.createElement(rt.a,{path:"/"},a.a.createElement(en,null))):a.a.createElement(et,null,a.a.createElement(_e,{walletConnectionPhase:"connect",actionFunction:function(){return t.askToConnect()},isMetaMaskProvider:n.isMetamaskInstalled}))}),[n.isMetamaskInstalled,t,c]),u=i.txHadError;Object(r.useEffect)((function(){u&&o("Error in Transaction",{variant:"error"})}),[o,u]);var l=i.txCanceled;return Object(r.useEffect)((function(){l&&o("Transaction canceled",{variant:"info"})}),[o,l]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Qe,null),a.a.createElement("main",{className:e.app},a.a.createElement(Ye,{id:"appContainer"},s),a.a.createElement(Ee.a,null)),a.a.createElement(cn,{version:"0.1"}))}));Qt=!!window.ethereum?a.a.createElement(un,null):a.a.createElement(nt,null),o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ye,{appComponent:Qt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[324,1,2]]]);
//# sourceMappingURL=main.002a9ffc.chunk.js.map